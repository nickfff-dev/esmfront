"use strict";(globalThis.webpackChunk_openmrs_esm_patient_flags_app=globalThis.webpackChunk_openmrs_esm_patient_flags_app||[]).push([[492],{1548:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(272),s=a.n(l),n=a(2609),i=a.n(n)()(s());i.push([e.id,".-esm-patient-flags__flags-list__listWrapper___o8LVB{margin:1rem}.-esm-patient-flags__flags-list__flagTile___aU8Jo{display:flex;flex-direction:column;justify-content:space-between;border:1px solid #ededed;background-color:#f4f4f4;padding:.5rem}.omrs-breakpoint-lt-desktop .-esm-patient-flags__flags-list__flagTile___aU8Jo{margin-bottom:.5rem}.omrs-breakpoint-gt-tablet .-esm-patient-flags__flags-list__flagTile___aU8Jo{margin-bottom:.25rem}.-esm-patient-flags__flags-list__flagHeader___Hnc5_{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.875rem}.-esm-patient-flags__flags-list__titleAndType___je9bv{display:flex;align-items:baseline}.-esm-patient-flags__flags-list__flagTitle___ep2th{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#161616;margin-right:.25rem}.-esm-patient-flags__flags-list__type___sbNTN{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252;margin-left:.25rem}.-esm-patient-flags__flags-list__secondRow___sLrVc{font-size:.875rem;display:flex;align-items:center}.-esm-patient-flags__flags-list__metadata___bnZBQ{display:flex;flex-direction:column}.-esm-patient-flags__flags-list__label___ff33C{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252;margin-bottom:.25rem}.-esm-patient-flags__flags-list__value___ku3_5{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-patient-flags__flags-list__flagToggle___pS817 .cds--toggle__switch--checked{background-color:#24a148}.-esm-patient-flags__flags-list__flagsHeaderInfo___mgOIS{display:flex;justify-content:space-between;align-items:center}.-esm-patient-flags__flags-list__resultsCount___GQQUr{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px)}.-esm-patient-flags__flags-list__button___v8xa0{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-flags__flags-list__formWrapper___P8dqY{display:flex;flex-direction:column;justify-content:space-between;height:calc(100vh - 6rem);background-color:#fff}.-esm-patient-flags__flags-list__button___v8xa0{height:4rem;display:flex;align-content:flex-start;align-items:baseline;min-width:50%}.-esm-patient-flags__flags-list__tabletButtonSet___xt6Sl{padding:1.5rem 1rem;background-color:#fff}.-esm-patient-flags__flags-list__desktopButtonSet___y9N_7{padding:0}.-esm-patient-flags__flags-list__emptyText___n1Ffw{color:#525252;font-size:.875rem;text-align:center}.-esm-patient-flags__flags-list__sortDropdown___kpozS{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#161616;gap:0}.-esm-patient-flags__flags-list__sortDropdown___kpozS .cds--dropdown--inline .cds--list-box__menu{min-width:10rem;max-width:12rem;left:-4.375rem}.-esm-patient-flags__flags-list__emptyState___eAlyP{display:flex;justify-content:center;align-items:center;padding:1rem;text-align:center}.-esm-patient-flags__flags-list__tile___v18uZ{margin:auto;width:18.75rem;display:flex;flex-direction:column;align-items:center;justify-content:center}.-esm-patient-flags__flags-list__content___w0B2x{max-width:10rem;font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-bottom:1rem}.-esm-patient-flags__flags-list__helper___bzDyJ{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-patient-flags__flags-list__loader___zPk_B{display:flex;justify-content:center;background-color:#f4f4f4;min-height:3rem}","",{version:3,sources:["webpack://./src/flags/flags-list.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,qDACE,WC0BW,CDvBb,kDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,wBAAA,CACA,wBE6BQ,CF5BR,aCOW,CDHX,8EACE,mBCES,CDGX,6EACE,oBCTS,CDab,oDACE,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,mBCZW,CDaX,iBAAA,CAGF,sDACE,YAAA,CACA,oBAAA,CAGF,mDGwzBI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CHtzBF,aEOS,CFNT,mBC7BW,CDgCb,8CGkzBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CHhzBF,aEFQ,CFGR,kBCnCW,CDsCb,mDACE,iBAAA,CACA,YAAA,CACA,kBAAA,CAGF,kDACE,YAAA,CACA,qBAAA,CAGF,+CGiyBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CH/xBF,aEnBQ,CFoBR,oBCpDW,CDuDb,+CG2xBI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CHtxBF,kFACE,wBErBO,CFyBX,yDACE,YAAA,CACA,6BAAA,CACA,kBAAA,CAGF,sDG2wBI,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CHvwBJ,gDACE,WCpCW,CDqCX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,qDACE,YAAA,CACA,qBAAA,CACA,6BAAA,CACA,yBAAA,CACA,qBE/FM,CFkGR,gDACE,WCpDW,CDqDX,YAAA,CACA,wBAAA,CACA,oBAAA,CACA,aAAA,CAGF,yDACE,mBAAA,CACA,qBE5GM,CF+GR,0DACE,SAAA,CAGF,mDACE,aE7EQ,CF8ER,iBAAA,CACA,iBAAA,CAGF,sDGguBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CH9tBF,aEjFS,CFkFT,KAAA,CAEA,kGACE,eCjES,CDkET,eAAA,CACA,cAAA,CAIJ,oDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,YCnHW,CDoHX,iBAAA,CAGF,8CACE,WAAA,CACA,cAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CAGF,iDACE,eCzFW,CE2xBT,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CHhsBF,kBCnIW,CDsIb,gDG6rBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CHzrBJ,gDACE,YAAA,CACA,sBAAA,CACA,wBElIQ,CFmIR,eC1HW",sourceRoot:""}]),i.locals={listWrapper:"-esm-patient-flags__flags-list__listWrapper___o8LVB",flagTile:"-esm-patient-flags__flags-list__flagTile___aU8Jo",flagHeader:"-esm-patient-flags__flags-list__flagHeader___Hnc5_",titleAndType:"-esm-patient-flags__flags-list__titleAndType___je9bv",flagTitle:"-esm-patient-flags__flags-list__flagTitle___ep2th",type:"-esm-patient-flags__flags-list__type___sbNTN",secondRow:"-esm-patient-flags__flags-list__secondRow___sLrVc",metadata:"-esm-patient-flags__flags-list__metadata___bnZBQ",label:"-esm-patient-flags__flags-list__label___ff33C",value:"-esm-patient-flags__flags-list__value___ku3_5",flagToggle:"-esm-patient-flags__flags-list__flagToggle___pS817",flagsHeaderInfo:"-esm-patient-flags__flags-list__flagsHeaderInfo___mgOIS",resultsCount:"-esm-patient-flags__flags-list__resultsCount___GQQUr",button:"-esm-patient-flags__flags-list__button___v8xa0",formWrapper:"-esm-patient-flags__flags-list__formWrapper___P8dqY",tabletButtonSet:"-esm-patient-flags__flags-list__tabletButtonSet___xt6Sl",desktopButtonSet:"-esm-patient-flags__flags-list__desktopButtonSet___y9N_7",emptyText:"-esm-patient-flags__flags-list__emptyText___n1Ffw",sortDropdown:"-esm-patient-flags__flags-list__sortDropdown___kpozS",emptyState:"-esm-patient-flags__flags-list__emptyState___eAlyP",tile:"-esm-patient-flags__flags-list__tile___v18uZ",content:"-esm-patient-flags__flags-list__content___w0B2x",helper:"-esm-patient-flags__flags-list__helper___bzDyJ",loader:"-esm-patient-flags__flags-list__loader___zPk_B"};const r=i},8492:(e,t,a)=>{a.r(t),a.d(t,{default:()=>N});var l=a(268),s=a.n(l),n=a(6520),i=a(7279),r=a(6431),A=a(4924),o=a(7449),_=a(2870),c=a(2076),f=a(1354),g=a.n(f),m=a(1583),d=a.n(m),p=a(7378),u=a.n(p),C=a(5993),b=a.n(C),h=a(4154),y=a.n(h),v=a(8141),E=a.n(v),B=a(1548),w={};w.styleTagTransform=E(),w.setAttributes=b(),w.insert=u().bind(null,"head"),w.domAPI=d(),w.insertStyleElement=y(),g()(B.Z,w);const D=B.Z&&B.Z.locals?B.Z.locals:void 0;function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,l=new Array(t);a<t;a++)l[a]=e[a];return l}function x(e,t,a,l,s,n,i){try{var r=e[n](i),A=r.value}catch(e){return void a(e)}r.done?t(A):Promise.resolve(A).then(l,s)}function F(e){return function(){var t=this,a=arguments;return new Promise((function(l,s){var n=e.apply(t,a);function i(e){x(n,l,s,i,r,"next",e)}function r(e){x(n,l,s,i,r,"throw",e)}i(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var l,s,n=[],i=!0,r=!1;try{for(a=a.call(e);!(i=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==a.return||a.return()}finally{if(r)throw s}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var a,l,s,n,i={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function r(n){return function(r){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,l&&(s=2&n[0]?l.return:n[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,n[1])).done)return s;switch(l=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,l=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!((s=(s=i.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(6===n[0]&&i.label<s[1]){i.label=s[1],s=n;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(n);break}s[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(e){n=[6,e],l=0}finally{a=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,r])}}}function z(e){var t=e.children;return e.isTablet?s().createElement(o.mh4,null,t," "):s().createElement(s().Fragment,null,t)}const N=function(e){var t,a=e.patientUuid,f=e.closeWorkspace,g=(0,A.useTranslation)().t,m=(0,c.y$)(a),d=m.flags,p=m.isLoading,u=m.error,C=m.mutate,b="tablet"===(0,_.useLayoutType)(),h=(0,l.useRef)(null),y=S((0,l.useState)(!1),2),v=y[0],E=y[1],B=S((0,l.useState)(!1),2),w=B[0],k=B[1],x=S((0,l.useState)(""),2),N=x[0],G=x[1],I=S((0,l.useState)("A - Z"),2),W=I[0],H=I[1],Z=(0,l.useMemo)((function(){return W?"Active first"===W?(0,r.Z)(d,[function(e){return Number(e.voided)}],"asc"):"Retired first"===W?(0,r.Z)(d,[function(e){return Number(e.voided)}],"desc"):(0,r.Z)(d,(function(e){return e.flag.display}),"asc"):d}),[W,d]),R=(0,l.useMemo)((function(){return(0,i.Z)(N)?Z:Z.filter((function(e){return-1!==e.flag.display.toLowerCase().search(N.toLowerCase())}))}),[N,Z]),Y=(0,l.useMemo)((function(){return(0,n.Z)((function(e){return G(e)}),300)}),[G]),j=(t=F((function(e){return T(this,(function(t){switch(t.label){case 0:return E(!0),[4,(0,c.eF)(e)];case 1:return 200===t.sent().status?(C(),E(!1),(0,_.showToast)({critical:!0,kind:"success",description:g("flagEnabledSuccessfully","Flag successfully enabled"),title:g("enabledFlag","Enabled flag")})):(0,_.showNotification)({critical:!0,kind:"error",description:g("flagEnableError","Error enabling flag"),title:g("flagEnabled","flag enabled")}),[2]}}))})),function(e){return t.apply(this,arguments)}),q=function(){var e=F((function(e){return T(this,(function(t){switch(t.label){case 0:return k(!0),[4,(0,c.I0)(e)];case 1:return 204===t.sent().status?(C(),k(!1),(0,_.showToast)({critical:!0,kind:"success",description:g("flagDisabledSuccessfully","Flag successfully disabled"),title:g("flagDisabled","Flag disabled")})):(0,_.showNotification)({critical:!0,kind:"error",description:g("flagDisableError","Error disabling the flag"),title:g("disableFlagError","Disable flag error")}),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return p?s().createElement(o.lSo,{className:D.loading,description:"".concat(g("loading","Loading")," ...")}):u?s().createElement("div",null,u.message):s().createElement(o.l09,{className:D.formWrapper},s().createElement("div",null,s().createElement(z,{isTablet:b},s().createElement(o.olm,{labelText:g("searchForAFlag","Search for a flag"),placeholder:g("searchForAFlag","Search for a flag"),ref:h,size:b?"lg":"md",onChange:function(e){return Y(e.target.value)}})),s().createElement(o.Kqy,{gap:4},s().createElement("div",{className:D.listWrapper},s().createElement("div",{className:D.flagsHeaderInfo},R.length>0?s().createElement(s().Fragment,null,s().createElement("span",{className:D.resultsCount},g("matchesForSearchTerm","{{count}} flags",{count:R.length})),s().createElement(o.Ltx,{className:D.sortDropdown,id:"sortBy",initialSelectedItem:"A - Z",label:"",type:"inline",items:[g("alphabetically","A - Z"),g("activeFirst","Active first"),g("retiredFirst","Retired first")],onChange:function(e){var t=e.selectedItem;return H(t)}})):null),R.length>0?R.map((function(e){var t;return s().createElement("div",{className:D.flagTile,key:e.uuid},s().createElement("div",{className:D.flagHeader},s().createElement("div",{className:D.titleAndType},s().createElement("div",{className:D.flagTitle},e.flag.display),"·",s().createElement("span",{className:D.type},e.tags.find((function(e){return e.display.includes("flag type")})).display.split("-")[1])),s().createElement(o.ZDl,{className:D.flagToggle,defaultToggled:!Boolean(e.voided),id:e.uuid,labelA:"",labelB:"",onToggle:function(t){return t?j(e.uuid):q(e.uuid)},size:"sm"})),e.voided?null:s().createElement("div",{className:D.secondRow},s().createElement("div",{className:D.metadata},s().createElement("span",{className:D.label},"Assigned"),s().createElement("span",{className:D.value},(0,_.formatDate)((0,_.parseDate)(null===(t=e.auditInfo)||void 0===t?void 0:t.dateCreated),{time:!1})))))})):null,0===R.length?s().createElement("div",{className:D.emptyState},s().createElement(o.n9L,{className:D.tile},s().createElement("p",{className:D.content},g("noFlagsFound","Sorry, no flags found matching your search")),s().createElement("p",{className:D.helper},s().createElement(o.zxk,{kind:"ghost",size:"sm",onClick:function(){G(""),h.current.value="",h.current.focus()}},g("clearSearch","Clear search"))))):null))),s().createElement(o.uVA,{className:b?D.tabletButtonSet:D.desktopButtonSet},s().createElement(o.zxk,{className:D.button,kind:"secondary",onClick:function(){return f()}},g("discard","Discard")),s().createElement(o.zxk,{className:D.button,disabled:v||w,kind:"primary",type:"submit",onClick:function(){return f()}},v?g("enablingFlag","Enabling flag..."):w?g("disablingFlag","Disabling flag..."):g("saveAndClose","Save & close"))))}}}]);