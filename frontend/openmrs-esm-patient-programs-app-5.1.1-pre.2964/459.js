(globalThis.webpackChunk_openmrs_esm_patient_programs_app=globalThis.webpackChunk_openmrs_esm_patient_programs_app||[]).push([[459],{9166:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(272),a=r.n(n),o=r(2609),l=r.n(o)()(a());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc{border:1px solid #e0e0e0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/programs/programs-detailed-summary.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCrDF,sEACE,wBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-programs__programs-detailed-summary__widgetCard___R5Btc"};const i=l},7763:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(272),a=r.n(n),o=r(2609),l=r.n(o)()(a());l.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-programs__programs-overview__widgetCard___yEo1t{border:1px solid #e0e0e0}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/programs/programs-overview.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCrDF,8DACE,wBAAA",sourceRoot:""}]),l.locals={widgetCard:"-esm-patient-programs__programs-overview__widgetCard___yEo1t"};const i=l},7459:(e,t,r)=>{"use strict";r.r(t),r.d(t,{importTranslation:()=>M,programsDashboardLink:()=>q,programsDetailedSummary:()=>U,programsForm:()=>J,programsOverview:()=>W,startupApp:()=>$});var n=r(2870),a=r(4556),o={hideAddProgramButton:{_type:n.Type.Boolean,_default:!1}},l=r(268),i=r.n(l),s=r(2779),c=r.n(s),u=r(4924),d=r(7610),m=r(8871),p=r(4076),g=r(1354),f=r.n(g),v=r(1583),b=r.n(v),y=r(7378),h=r.n(y),E=r(5993),O=r.n(E),P=r(4154),w=r.n(P),A=r(8141),C=r.n(A),k=r(7763),j={};j.styleTagTransform=C(),j.setAttributes=O(),j.insert=h().bind(null,"head"),j.domAPI=b(),j.insertStyleElement=w(),f()(k.Z,j);const _=k.Z&&k.Z.locals?k.Z.locals:void 0;function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){S(e,t,r[t])}))}return e}var D=r(5362),T=r(9166),L={};L.styleTagTransform=C(),L.setAttributes=O(),L.insert=h().bind(null,"head"),L.domAPI=b(),L.insertStyleElement=w(),f()(T.Z,L);const x=T.Z&&T.Z.locals?T.Z.locals:void 0;function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){I(e,t,r[t])}))}return e}function N(e){var t=e.programEnrollmentId,r="tablet"===(0,n.useLayoutType)(),o=(0,u.useTranslation)().t,l=i().useCallback((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace",{programEnrollmentId:t})}),[t]);return i().createElement(d.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(D.I8,B({size:16},e))},iconDescription:o("editProgram","Edit Program"),onClick:l,hasIconOnly:!0,tooltipPosition:"left",size:r?"lg":"sm","data-testid":"edit-program-button"})}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H="@openmrs/esm-patient-programs-app",z={featureName:"patient-programs",moduleName:H},M=r(3979);function $(){(0,n.defineConfigSchema)(H,o)}var R,V,W=(0,n.getSyncLifecycle)((function(e){e.basePath;var t=e.patientUuid,r=(0,u.useTranslation)().t,o=(0,n.useConfig)(),l=r("programs","Program enrollments"),s=r("carePrograms","Care Programs"),g=r("seeAll","See all"),f="${openmrsSpaBase}/patient/".concat(t,"/chart/Programs"),v=(0,n.useLayoutType)(),b="tablet"===v,y=(0,n.isDesktop)(v),h=(0,p.b$)(t),E=h.activeEnrollments,O=h.availablePrograms,P=h.eligiblePrograms,w=h.enrollments,A=h.isError,C=h.isLoading,k=h.isValidating,j=(0,n.usePagination)(null!=w?w:[],5),S=j.results,D=j.goTo,T=j.currentPage,L=i().useCallback((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace")}),[]),x=[{key:"display",header:r("activePrograms","Active programs")},{key:"location",header:r("location","Location")},{key:"dateEnrolled",header:r("dateEnrolled","Date enrolled")},{key:"status",header:r("status","Status")},{key:"actions",header:r("actions","Actions")}],I=i().useMemo((function(){return null==S?void 0:S.map((function(e){var t,a;return{id:e.uuid,display:e.display,location:null!==(a=null===(t=e.location)||void 0===t?void 0:t.display)&&void 0!==a?a:"--",dateEnrolled:e.dateEnrolled?(0,n.formatDatetime)(new Date(e.dateEnrolled)):"--",status:e.dateCompleted?"".concat(r("completedOn","Completed On")," ").concat((0,n.formatDate)(new Date(e.dateCompleted))):r("active","Active")}}))}),[S,r]);return C?i().createElement(d.gqd,{role:"progressbar",compact:y,zebra:!0}):A?i().createElement(a.ErrorState,{error:A,headerTitle:s}):(null==E?void 0:E.length)?i().createElement("div",{className:_.widgetCard},i().createElement(a.CardHeader,{title:s},i().createElement("span",null,k?i().createElement(d.lSo,null):null),o.hideAddProgramButton?null:i().createElement(d.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(m.mm,Z({size:16},e))},iconDescription:"Add programs",onClick:L,disabled:(null==O?void 0:O.length)&&0===(null==P?void 0:P.length)},r("add","Add"))),(null==O?void 0:O.length)&&0===(null==P?void 0:P.length)&&i().createElement(d.K0D,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:r("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:r("fullyEnrolled","Enrolled in all programs")}),i().createElement(d.wQF,{rows:I,headers:x,isSortable:!0,size:b?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,r=e.headers,n=e.getHeaderProps,a=e.getTableProps;return i().createElement(d.xJi,null,i().createElement(d.iA_,a(),i().createElement(d.ssF,null,i().createElement(d.SCH,null,r.map((function(e){var t,r;return i().createElement(d.xDH,Z({className:c()(_.productiveHeading01,_.text02)},n({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})))),i().createElement(d.RMI,null,t.map((function(e){return i().createElement(d.SCH,{key:e.id},e.cells.map((function(e){var t,r;return i().createElement(d.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})))})))))})),i().createElement(a.PatientChartPagination,{currentItems:S.length,onPageNumberChange:function(e){var t=e.page;return D(t)},pageNumber:T,pageSize:5,totalItems:null==w?void 0:w.length,dashboardLinkUrl:f,dashboardLinkLabel:g})):i().createElement(a.EmptyState,{displayText:l,headerTitle:s,launchForm:L})}),z),U=(0,n.getSyncLifecycle)((function(e){var t=e.patientUuid,r=(0,u.useTranslation)().t,o=(0,n.useLayoutType)(),s="tablet"===o,g=(0,n.isDesktop)(o),f=(0,n.useConfig)().hideAddProgramButton,v=r("programEnrollments","Program enrollments"),b=r("carePrograms","Care Programs"),y=(0,p.b$)(t),h=y.enrollments,E=y.isLoading,O=y.isError,P=y.isValidating,w=y.availablePrograms,A=y.eligiblePrograms,C=(0,l.useMemo)((function(){return[{key:"display",header:r("activePrograms","Active programs")},{key:"location",header:r("location","Location")},{key:"dateEnrolled",header:r("dateEnrolled","Date enrolled")},{key:"status",header:r("status","Status")}]}),[r]),k=(0,l.useMemo)((function(){return null==h?void 0:h.map((function(e){var t,a;return{id:e.uuid,display:e.display,location:null!==(a=null===(t=e.location)||void 0===t?void 0:t.display)&&void 0!==a?a:"--",dateEnrolled:(0,n.formatDatetime)(new Date(e.dateEnrolled)),status:e.dateCompleted?"".concat(r("completedOn","Completed On")," ").concat((0,n.formatDate)(new Date(e.dateCompleted))):r("active","Active")}}))}),[h,r]),j=(0,l.useCallback)((function(){return(0,a.launchPatientWorkspace)("programs-form-workspace")}),[]);return E?i().createElement(d.gqd,{role:"progressbar",compact:g,zebra:!0}):O?i().createElement(a.ErrorState,{error:O,headerTitle:b}):(null==h?void 0:h.length)?i().createElement("div",{className:x.widgetCard},i().createElement(a.CardHeader,{title:b},i().createElement("span",null,P?i().createElement(d.lSo,null):null),f?null:i().createElement(d.zxk,{kind:"ghost",renderIcon:function(e){return i().createElement(m.mm,B({size:16},e))},iconDescription:"Add programs",onClick:j,disabled:(null==w?void 0:w.length)&&0===(null==A?void 0:A.length)},r("add","Add"))),(null==w?void 0:w.length)&&0===(null==A?void 0:A.length)?i().createElement(d.K0D,{style:{minWidth:"100%",margin:"0rem",padding:"0rem"},kind:"info",lowContrast:!0,subtitle:r("noEligibleEnrollments","There are no more programs left to enroll this patient in"),title:r("fullyEnrolled","Enrolled in all programs")}):null,i().createElement(d.wQF,{rows:k,headers:C,isSortable:!0,size:s?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,r=e.headers,n=e.getHeaderProps,a=e.getTableProps;return i().createElement(d.xJi,null,i().createElement(d.iA_,a(),i().createElement(d.ssF,null,i().createElement(d.SCH,null,r.map((function(e){var t,r;return i().createElement(d.xDH,B({className:c()(x.productiveHeading01,x.text02)},n({header:e,isSortable:e.isSortable})),null!==(r=null===(t=e.header)||void 0===t?void 0:t.content)&&void 0!==r?r:e.header)})),i().createElement(d.xDH,null))),i().createElement(d.RMI,{"data-testid":"program-table"},t.map((function(e,t){var r;return i().createElement(d.SCH,{key:e.id},e.cells.map((function(e){var t,r;return i().createElement(d.pj1,{key:e.id},null!==(r=null===(t=e.value)||void 0===t?void 0:t.content)&&void 0!==r?r:e.value)})),i().createElement(d.pj1,{className:"cds--table-column-menu"},i().createElement(N,{programEnrollmentId:null===(r=h[t])||void 0===r?void 0:r.uuid})))})))))}))):i().createElement(a.EmptyState,{displayText:v,headerTitle:b,launchForm:j})}),z),q=(0,n.getSyncLifecycle)((0,a.createDashboardLink)((R=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){F(e,t,r[t])}))}return e}({},{slot:"patient-chart-programs-dashboard-slot",columns:1,path:"Programs",title:"Programs"}),V=null!=(V={moduleName:H})?V:{},Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(V)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(V)).forEach((function(e){Object.defineProperty(R,e,Object.getOwnPropertyDescriptor(V,e))})),R)),z),J=(0,n.getAsyncLifecycle)((function(){return Promise.all([r.e(940),r.e(411)]).then(r.bind(r,3411))}),z)},4076:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>u,YX:()=>p,b$:()=>g,df:()=>m,oI:()=>d});var n=r(3255),a=r(2870),o=r(4221),l=r(9626),i=r(3139),s=r(6772);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){var t,r="/ws/rest/v1/programenrollment?patient=".concat(e,"&v=").concat("custom:(uuid,display,program,dateEnrolled,dateCompleted,location:(uuid,display))"),l=(0,n.ZP)(e?r:null,a.openmrsFetch),i=l.data,s=l.error,c=l.isLoading,u=l.isValidating,d=l.mutate,m=(null==i||null===(t=i.data)||void 0===t?void 0:t.results.length)>0?null==i?void 0:i.data.results.sort((function(e,t){return t.dateEnrolled>e.dateEnrolled?1:-1})):null,p=null==m?void 0:m.filter((function(e){return!e.dateCompleted}));return{data:i?(0,o.Z)(m,(function(e){var t;return null==e||null===(t=e.program)||void 0===t?void 0:t.uuid})):null,isError:s,isLoading:c,isValidating:u,activeEnrollments:p,mutateEnrollments:d}}function d(e){var t,r,o=(0,n.ZP)("/ws/rest/v1/program?v=custom:(uuid,display,allWorkflows,concept:(uuid,display))",a.openmrsFetch),c=o.data,u=o.error,d=o.isLoading,m=null!==(r=null==c||null===(t=c.data)||void 0===t?void 0:t.results)&&void 0!==r?r:null;return{data:m,isError:u,isLoading:d,eligiblePrograms:(0,l.Z)(m,(function(t){return!(0,i.Z)((0,s.Z)(e,"program.uuid"),t.uuid)}))}}function m(e,t){if(!e)return null;var r=e.program,n=e.patient,o=e.dateEnrolled,l=e.dateCompleted,i=e.location;return(0,a.openmrsObservableFetch)("/ws/rest/v1/programenrollment",{method:"POST",headers:{"Content-Type":"application/json"},body:{program:r,patient:n,dateEnrolled:o,dateCompleted:l,location:i},signal:t.signal})}function p(e,t,r){if(!t&&!t.program)return null;t.program;var n=t.dateEnrolled,o=t.dateCompleted,l=t.location;return(0,a.openmrsObservableFetch)("/ws/rest/v1/programenrollment/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:{dateEnrolled:n,dateCompleted:o,location:l},signal:r.signal})}var g=function(e){var t,r,n=u(e),a=n.data,o=n.isError,l=n.isLoading,i=n.isValidating,s=n.activeEnrollments,m=d(a),p=m.data,g=m.eligiblePrograms;return t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){c(e,t,r[t])}))}return e}({enrollments:a},{isLoading:l,isError:o}),r=null!=(r={isValidating:i,activeEnrollments:s,availablePrograms:p,eligiblePrograms:g})?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r}(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})),t}},3979:(e,t,r)=>{var n={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807]};function a(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],a=t[0];return r.e(t[1]).then((()=>r(a)))}a.keys=()=>Object.keys(n),a.id=3979,e.exports=a},506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});const n=function(e,t,r){for(var n=-1,a=Object(e),o=r(e),l=o.length;l--;){var i=o[++n];if(!1===t(a[i],i,a))break}return e};var a=r(4753);var o=r(3282);const l=(i=function(e,t){return e&&n(e,t,a.Z)},function(e,t){if(null==e)return e;if(!(0,o.Z)(e))return i(e,t);for(var r=e.length,n=-1,a=Object(e);++n<r&&!1!==t(a[n],n,a););return e});var i},9626:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(2300),a=r(506);const o=function(e,t){var r=[];return(0,a.Z)(e,(function(e,n,a){t(e,n,a)&&r.push(e)})),r};var l=r(1426),i=r(7885);const s=function(e,t){return((0,i.Z)(e)?n.Z:o)(e,(0,l.Z)(t,3))}},3139:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var n=r(1721),a=r(3282),o=r(8147),l=r(7885),i=r(3391);var s=/\s/;var c=/^\s+/;const u=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&s.test(e.charAt(t)););return t}(e)+1).replace(c,""):e};var d=r(3122),m=r(2758),p=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,f=/^0o[0-7]+$/i,v=parseInt;const b=function(e){return e?Infinity===(e=function(e){if("number"==typeof e)return e;if((0,m.Z)(e))return NaN;if((0,d.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,d.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=u(e);var r=g.test(e);return r||f.test(e)?v(e.slice(2),r?2:8):p.test(e)?NaN:+e}(e))||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var y=r(5598);var h=r(4753);const E=function(e){return null==e?[]:function(e,t){return(0,y.Z)(t,(function(t){return e[t]}))}(e,(0,h.Z)(e))};var O=Math.max;const P=function(e,t,r,s){e=(0,a.Z)(e)?e:E(e),r=r&&!s?function(e){var t=b(e),r=t%1;return t==t?r?t-r:t:0}(r):0;var c=e.length;return r<0&&(r=O(c+r,0)),function(e){return"string"==typeof e||!(0,l.Z)(e)&&(0,i.Z)(e)&&"[object String]"==(0,o.Z)(e)}(e)?r<=c&&e.indexOf(t,r)>-1:!!c&&(0,n.Z)(e,t,r)>-1}},6772:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5598),a=r(1426),o=r(506),l=r(3282);const i=function(e,t){var r=-1,n=(0,l.Z)(e)?Array(e.length):[];return(0,o.Z)(e,(function(e,a,o){n[++r]=t(e,a,o)})),n};var s=r(7885);const c=function(e,t){return((0,s.Z)(e)?n.Z:i)(e,(0,a.Z)(t,3))}}}]);