"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[616],{3223:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(272),a=o.n(n),i=o(2609),r=o.n(i)()(a());r.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}section{margin:.5rem}.-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.75rem}.-esm-service-queues__add-provider-queue-room__checkbox___VEBx1{padding-top:.75rem}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/add-provider-queue-room/add-provider-queue-room.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,QACE,YCgBW,CDbb,oEE01BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFx1BF,aDLQ,CCMR,oBCeW,CDZb,gEACE,kBCWW",sourceRoot:""}]),r.locals={sectionTitle:"-esm-service-queues__add-provider-queue-room__sectionTitle___ArcWQ",checkbox:"-esm-service-queues__add-provider-queue-room__checkbox___VEBx1"};const l=r},6616:(e,t,o)=>{o.r(t),o.d(t,{default:()=>R});var n=o(5206),a=o.n(n),i=o(4924),r=o(3028),l=o(2870),c=o(8053),s=o(1995),u=o(9672),d=o(3670),m=o(1354),v=o.n(m),p=o(1583),g=o.n(p),f=o(7378),A=o.n(f),h=o(5993),_=o.n(h),y=o(4154),S=o.n(y),b=o(8141),E=o.n(b),C=o(3223),q={};q.styleTagTransform=E(),q.setAttributes=_(),q.insert=A().bind(null,"head"),q.domAPI=g(),q.insertStyleElement=S(),v()(C.Z,q);const k=C.Z&&C.Z.locals?C.Z.locals:void 0;function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var n,a,i=[],r=!0,l=!1;try{for(o=o.call(e);!(r=(n=o.next()).done)&&(i.push(n.value),!t||i.length!==t);r=!0);}catch(e){l=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(l)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const R=function(e){var t=e.providerUuid,o=e.closeModal,m=(0,i.useTranslation)().t,v=(0,d.fn)(),p=(0,d.SY)(),g=(0,d.vM)(),f=(0,d.fn)(),A=(0,d.Hp)(),h=(0,u.ej)(t),_=h.providerRoom,y=(h.isLoading,T((0,n.useState)(""),2)),S=y[0],b=y[1],E=T((0,n.useState)(""),2),C=E[0],q=E[1];(0,n.useEffect)((function(){var e;(null==_?void 0:_.length)>0&&(b(null===(e=null==_?void 0:_[0].queueRoom)||void 0===e?void 0:e.uuid),q(null==_?void 0:_[0].uuid))}),[_]);var w=(0,u.ej)(t).mutate,R=(0,c.Su)(p).services,x=(0,u.dF)(p,g).rooms,Q=(0,s.J)().queueLocations,I=T((0,n.useState)(!1),2),D=I[0],N=I[1],B=(0,n.useCallback)((function(){S?(N(!1),(null==_?void 0:_.length)>0?(0,u.av)(C,S,t).then((function(e){200===e.status&&((0,l.showToast)({critical:!0,title:m("updateRoom","Update room"),kind:"success",description:m("queueRoomUpdatedSuccessfully","Queue room updated successfully")}),o(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,d.By)(new Date),w())}),(function(e){(0,l.showNotification)({title:m("queueRoomAddFailed","Error adding queue room"),kind:"error",critical:!0,description:null==e?void 0:e.message}),o()})):(0,u._5)(S,t).then((function(e){201===e.status&&((0,l.showToast)({critical:!0,title:m("addRoom","Add room"),kind:"success",description:m("queueRoomAddedSuccessfully","Queue room added successfully")}),o(),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString()),(0,d.By)(new Date),w())}),(function(e){(0,l.showNotification)({title:m("queueRoomAddFailed","Error adding queue room"),kind:"error",critical:!0,description:null==e?void 0:e.message})}))):N(!0)}),[S,null==_?void 0:_.length,C,t,m,o,w]);return a().createElement("div",null,a().createElement(r.xBx,{closeModal:o,title:m("addProviderQueueRoom","Add provider queue room?")}),a().createElement(r.fef,null,a().createElement(r.l09,{onSubmit:B},a().createElement("section",{className:k.section},a().createElement("div",{className:k.sectionTitle},m("queueLocation","Queue location")),a().createElement(r.Ltx,{id:"queueLocation",label:m("selectQueueLocation","Select a queue location"),type:"default",items:Q,itemToString:function(e){return e?e.name:""},onChange:function(e){var t=e.selectedItem;localStorage.setItem("queueLocationUuid",t.id),localStorage.setItem("queueLocationName",t.name),(0,d.yl)(t.name),(0,d._j)(t.id)},size:"md",initialSelectedItem:{uuid:p,name:v}})),a().createElement("section",{className:k.section},a().createElement("div",{className:k.sectionTitle},m("queueService","Queue service")),a().createElement(r.Ltx,{id:"service",label:m("selectService","Select a service"),type:"default",items:R,itemToString:function(e){return e?e.display:""},onChange:function(e){var t=e.selectedItem;localStorage.setItem("queueServiceName",t.name),localStorage.setItem("queueServiceUuid",t.uuid),(0,d.yk)(t.name),(0,d.u_)(t.uuid)},size:"md",initialSelectedItem:{uuid:g,display:f}})),a().createElement("section",{className:k.section},a().createElement("div",{className:k.sectionTitle},m("queueRoom","Queue room")),a().createElement("div",{className:k.filterContainer},a().createElement(r.PhF,{labelText:m("selectRoom","Select a room"),id:"service",invalidText:"Required",value:S,defaultValue:S,onChange:function(e){b(e.target.value),localStorage.setItem("lastUpdatedQueueRoomTimestamp",(new Date).toString())}},S?null:a().createElement(r.QlF,{text:m("chooseRoom","Select a room"),value:""}),(null==x?void 0:x.length)>0&&x.map((function(e){return a().createElement(r.QlF,{key:e.uuid,text:e.display,value:e.uuid},e.display)}))))),D&&a().createElement("section",null,a().createElement(r.K0D,{style:{margin:"0",minWidth:"100%"},kind:"error",lowContrast:!0,title:m("missingQueueRoom","Please select a queue room")})),a().createElement("section",{className:k.section},a().createElement(r.XZJ,{onChange:function(e){localStorage.setItem("isPermanentProviderQueueRoom",JSON.parse(e.target.checked)),(0,d.wE)(JSON.parse(e.target.checked))},checked:A,labelText:m("retainLocation","Retain location"),id:"retianLocation",className:k.checkbox})))),a().createElement(r.mzw,null,a().createElement(r.zxk,{kind:"secondary",onClick:o},m("cancel","Cancel")),a().createElement(r.zxk,{onClick:B},m("save","Save"))))}}}]);