"use strict";(globalThis.webpackChunk_openmrs_esm_service_queues_app=globalThis.webpackChunk_openmrs_esm_service_queues_app||[]).push([[733],{7674:(e,t,n)=>{n.d(t,{Z:()=>A});var s=n(272),r=n.n(s),o=n(2609),i=n.n(o)()(r());i.push([e.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{padding:0;border:0;margin:0;font:inherit;font-size:100%;vertical-align:baseline}button,select,input,textarea{border-radius:0;font-family:inherit}input[type=text]::-ms-clear{display:none}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section{display:block}body{line-height:1}sup{vertical-align:super}sub{vertical-align:sub}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote::before,blockquote::after,q::before,q::after{content:\"\"}table{border-collapse:collapse;border-spacing:0}*{box-sizing:border-box}button{margin:0}html{font-size:100%}body{font-weight:400;font-family:'IBM Plex Sans', 'Helvetica Neue', Arial, sans-serif;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility}code{font-family:'IBM Plex Mono', 'Menlo', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', Courier, monospace}strong{font-weight:600}@media screen and (-ms-high-contrast: active){svg{fill:ButtonText}}h1{font-size:2.625rem;font-weight:300;line-height:1.199;letter-spacing:0}h2{font-size:2rem;font-weight:400;line-height:1.25;letter-spacing:0}h3{font-size:1.75rem;font-weight:400;line-height:1.28572;letter-spacing:0}h4{font-size:1.25rem;font-weight:400;line-height:1.4;letter-spacing:0}h5{font-size:1rem;font-weight:600;line-height:1.375;letter-spacing:0}h6{font-size:.875rem;font-weight:600;line-height:1.28572;letter-spacing:.16px}p{font-size:1rem;font-weight:400;line-height:1.5;letter-spacing:0}a{color:#0f62fe}em{font-style:italic}@keyframes -esm-service-queues__remove-queue-entry__skeleton___eFvo4{0%{opacity:.3;transform:scaleX(0);transform-origin:left}20%{opacity:1;transform:scaleX(1);transform-origin:left}28%{transform:scaleX(1);transform-origin:right}51%{transform:scaleX(0);transform-origin:right}58%{transform:scaleX(0);transform-origin:right}82%{transform:scaleX(1);transform-origin:right}83%{transform:scaleX(1);transform-origin:left}96%{transform:scaleX(0);transform-origin:left}100%{opacity:.3;transform:scaleX(0);transform-origin:left}}#-esm-service-queues__remove-queue-entry__subHeading___YoXVP{font-size:.875rem;font-weight:600;line-height:1.28572;letter-spacing:.16px;color:#161616}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/_css--reset.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_reset.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_font-family.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/icons/mixins.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/type/_styles.import.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/_helper-mixins.scss","webpack://./src/remove-queue-entry-dialog/remove-queue-entry.scss","webpack://./../../node_modules/carbon-components/src/globals/scss/vendor/@carbon/elements/scss/themes/generated/_mixins.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCpBE,2ZAiFE,SAAA,CACA,QAAA,CACA,QAAA,CACA,YAAA,CACA,cAAA,CACA,uBAAA,CAIF,6BAIE,eAAA,CACA,mBAAA,CAGF,4BACE,YAAA,CAIF,mFAYE,aAAA,CAGF,KACE,aAAA,CAGF,IACE,oBAAA,CAGF,IACE,kBAAA,CAGF,MAEE,eAAA,CAGF,aAEE,WAAA,CAGF,wDAIE,UAAA,CAGF,MACE,wBAAA,CACA,gBAAA,CAGF,EACE,qBAAA,CAIF,OACE,QAAA,CC3KJ,KACE,cAAA,CAGF,KC0CA,eAAA,CDvCE,gEAViB,CAWjB,iCAAA,CACA,kCAAA,CACA,iCAAA,CAGF,KACE,wGAhBiB,CAmBnB,OC6BA,eAAA,CCxDA,8CACE,IACE,eAAA,CAAA,CFkCJ,GGghBE,kBA0LsB,CA1LtB,eA0LsB,CA1LtB,iBA0LsB,CA1LtB,gBA0LsB,CHtsBxB,GG4gBE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CA1LtB,gBA0LsB,CHlsBxB,GGwgBE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,gBA0LsB,CH9rBxB,GGogBE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CH1rBxB,GGggBE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,iBA0LsB,CA1LtB,gBA0LsB,CHtrBxB,GG4fE,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,oBA0LsB,CHlrBxB,EGwfE,cA0LsB,CA1LtB,eA0LsB,CA1LtB,eA0LsB,CA1LtB,gBA0LsB,CH9qBxB,EAII,aAAA,CAMJ,GACE,iBAAA,CIoHF,qEACE,GACE,UAAA,CACA,mBAAA,CACA,qBAAA,CAGF,IACE,SAAA,CACA,mBAAA,CACA,qBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,sBAAA,CAGF,IACE,mBAAA,CACA,qBAAA,CAGF,IACE,mBAAA,CACA,qBAAA,CAGF,KACE,UAAA,CACA,mBAAA,CACA,qBAAA,CAAA,CCrPN,6DF4jBI,iBA0LsB,CA1LtB,eA0LsB,CA1LtB,mBA0LsB,CA1LtB,oBA0LsB,CEpvBxB,aC2CQ",sourceRoot:""}]),i.locals={subHeading:"-esm-service-queues__remove-queue-entry__subHeading___YoXVP",skeleton:"-esm-service-queues__remove-queue-entry__skeleton___eFvo4"};const A=i},8733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var s=n(5206),r=n.n(s),o=n(4924),i=n(3028),A=n(2870),a=n(8179),l=n(8879),c=n.n(l),u=n(8053),m=n(3255),C=n(9457);function d(e,t,n,s,r,o,i){try{var A=e[o](i),a=A.value}catch(e){return void n(e)}A.done?t(a):Promise.resolve(a).then(s,r)}function B(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var o=e.apply(t,n);function i(e){d(o,s,r,i,A,"next",e)}function A(e){d(o,s,r,i,A,"throw",e)}i(void 0)}))}}var f=function(e,t){var n,s,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:A(0),throw:A(1),return:A(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function A(o){return function(A){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(r=2&o[0]?s.return:o[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,o[1])).done)return r;switch(s=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,s=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){i.label=o[1];break}if(6===o[0]&&i.label<r[1]){i.label=r[1],r=o;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(o);break}r[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],s=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,A])}}},p=c()(new Date).format(a.J$);function g(){return g=B((function(e,t,n,s,r,o){var i;return f(this,(function(a){switch(a.label){case 0:return i=new AbortController,s?((null==o?void 0:o.length)&&o.forEach((l=B((function(e){return f(this,(function(t){switch(t.label){case 0:return[4,Promise.all([h("Completed",e.uuid)])];case 1:return t.sent(),[2]}}))})),function(e){return l.apply(this,arguments)})),[4,Promise.all([(0,u.TW)(e,t,n)])]):[3,2];case 1:return a.sent(),[2,(0,A.updateVisit)(r,s,i).pipe((0,C.P)()).subscribe((function(e){return e.status}),(function(e){return e}))];case 2:return[4,Promise.all([(0,u.TW)(e,t,n)]).then((function(e){return e})).catch((function(e){return e}))];case 3:return[2,a.sent()];case 4:return[2]}var l}))})),g.apply(this,arguments)}function h(e,t){return b.apply(this,arguments)}function b(){return(b=B((function(e,t){var n;return f(this,(function(s){return n="/ws/rest/v1/appointments/".concat(t,"/status-change"),[2,(0,A.openmrsFetch)(n,{body:{toStatus:e,onDate:p,timeZone:a.EQ},method:"POST",headers:{"Content-Type":"application/json"}})]}))}))).apply(this,arguments)}var v=n(1354),y=n.n(v),E=n(1583),L=n.n(E),_=n(7378),w=n.n(_),k=n(5993),q=n.n(k),G=n(4154),F=n.n(G),x=n(8141),I=n.n(x),z=n(7674),P={};P.styleTagTransform=I(),P.setAttributes=q(),P.insert=w().bind(null,"head"),P.domAPI=L(),P.insertStyleElement=F(),y()(z.Z,P);const T=z.Z&&z.Z.locals?z.Z.locals:void 0,D=function(e){var t=e.queueEntry,n=e.closeModal,s=(0,o.useTranslation)().t,l=(0,A.useVisit)(t.patientUuid).currentVisit,c=(0,u.P4)("","").mutate,C=(new AbortController,function(e,t){var n,s=new AbortController,r="/ws/rest/v1/appointments/search",o=(0,m.ZP)(r,(function(){return(0,A.openmrsFetch)(r,{method:"POST",signal:s.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:e,startDate:t}})})),i=o.data,a=o.error,l=o.isLoading,c=o.isValidating,u=(null==i||null===(n=i.data)||void 0===n?void 0:n.length)?i.data.filter((function(e){return"CheckedIn"===e.status})):null;return{data:i?u:null,isError:a,isLoading:l,isValidating:c}}(t.patientUuid,a.b7)),d=C.data;return r().createElement("div",null,r().createElement(i.xBx,{closeModal:n,label:s("serviceQueue","Service queue"),title:s("removeFromQueueAndEndVisit","Remove patient from queue and end active visit?")}),r().createElement(i.fef,null,r().createElement("p",{className:T.subHeading,id:"subHeading"},s("endVisitWarningMessage","Ending this visit will remove this patient from the queue and will not allow you to fill another encounter form for this patient"))),r().createElement(i.mzw,null,r().createElement(i.zxk,{kind:"secondary",onClick:n},s("cancel","Cancel")),r().createElement(i.zxk,{kind:"danger",onClick:function(){var e,r,o={location:null==l||null===(e=l.location)||void 0===e?void 0:e.uuid,startDatetime:(0,A.parseDate)(null==l?void 0:l.startDatetime),visitType:null==l||null===(r=l.visitType)||void 0===r?void 0:r.uuid,stopDatetime:new Date},i=new Date;(function(e,t,n,s,r,o){return g.apply(this,arguments)})(t.queueUuid,t.queueEntryUuid,i,o,t.visitUuid,d).then((function(e){n(),c(),(0,A.showToast)({critical:!0,kind:"success",description:s("queueEntryRemovedSuccessfully","Queue entry removed successfully"),title:s("queueEntryRemoved","Queue entry removed")})}))}},s("endVisit","End visit"))))}}}]);