(globalThis.webpackChunk_openmrs_esm_patient_appointments_app=globalThis.webpackChunk_openmrs_esm_patient_appointments_app||[]).push([[43],{7380:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(272),i=n.n(a),r=n(2609),o=n.n(r)()(i());o.push([t.id,".-esm-patient-appointments__appointments-action-menu__layer___hDJfI{height:100%}.-esm-patient-appointments__appointments-action-menu__menuItem___EGjhA{max-width:none}","",{version:3,sources:["webpack://./src/appointments/appointments-action-menu.scss"],names:[],mappings:"AAAA,oEACE,WAAA,CAGF,uEACE,cAAA",sourceRoot:""}]),o.locals={layer:"-esm-patient-appointments__appointments-action-menu__layer___hDJfI",menuItem:"-esm-patient-appointments__appointments-action-menu__menuItem___EGjhA"};const s=o},2164:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(272),i=n.n(a),r=n(2609),o=n.n(r)()(i());o.push([t.id,":root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-appointments__appointments-base__widgetCard___NI4uc{border:1px solid #e0e0e0}.-esm-patient-appointments__appointments-base__productiveHeading01___x9FHS{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px)}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J{display:flex;width:fit-content;justify-content:flex-end;align-items:center;width:60%}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button{background-color:#fff}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div button:first-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-left:1px solid #a6c8ff;border-right:none;border-radius:.25rem 0 0px .25rem}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div button:last-child{border-top:1px solid #a6c8ff;border-bottom:1px solid #a6c8ff;border-right:1px solid #a6c8ff;border-left:none;border-radius:0px .25rem .25rem 0px}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button[aria-selected=true],.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button[aria-selected=true]:first-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-right:1px solid #0f62fe}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button[aria-selected=true],.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button[aria-selected=true]:last-child{background-color:#edf5ff;color:#0f62fe;border-color:#0f62fe;border-left:1px solid #0f62fe}.-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J>div>button[aria-selected=true]:focus{box-shadow:none}.-esm-patient-appointments__appointments-base__divider___FZdR7{width:1px;height:1rem;color:#e0e0e0;margin:0 1rem}.-esm-patient-appointments__appointments-base__content___eGlEQ{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-patient-appointments__appointments-base__tile___E8QFA{text-align:center}","",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/appointments/appointments-base.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CC7CF,kEACE,wBAAA,CAGF,2EC4zBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CDxzBJ,8EACE,YAAA,CACA,iBAAA,CACA,wBAAA,CACA,kBAAA,CACA,SAAA,CAGF,yFACE,qBD1BM,CC6BR,qGACE,4BAAA,CACA,+BAAA,CACA,6BAAA,CACA,iBAAA,CACA,iCAAA,CAGF,oGACE,4BAAA,CACA,+BAAA,CACA,8BAAA,CACA,gBAAA,CACA,mCAAA,CAGF,sOAEE,wBAxCc,CAyCd,aDtCgB,CCuChB,oBDvCgB,CCwChB,8BAAA,CAGF,qOAEE,wBAhDc,CAiDd,aD9CgB,CC+ChB,oBD/CgB,CCgDhB,6BAAA,CAGF,mHACE,eAAA,CAGF,+DACE,SAAA,CACA,WErCW,CFsCX,aG1BQ,CH2BR,aAAA,CAGF,+DCiwBI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CD/vBF,aDtEQ,CCuER,eE7CW,CF8CX,mBExDW,CF2Db,4DACE,iBAAA",sourceRoot:""}]),o.locals={widgetCard:"-esm-patient-appointments__appointments-base__widgetCard___NI4uc",productiveHeading01:"-esm-patient-appointments__appointments-base__productiveHeading01___x9FHS",contentSwitcherWrapper:"-esm-patient-appointments__appointments-base__contentSwitcherWrapper___tC04J",divider:"-esm-patient-appointments__appointments-base__divider___FZdR7",content:"-esm-patient-appointments__appointments-base__content___eGlEQ",tile:"-esm-patient-appointments__appointments-base__tile___E8QFA"};const s=o},8019:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(272),i=n.n(a),r=n(2609),o=n.n(r)()(i());o.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),o.locals={};const s=o},2258:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var a=n(272),i=n.n(a),r=n(2609),o=n.n(r)()(i());o.push([t.id,':root{--brand-01: #005d5d;--brand-02: #004144;--brand-03: #007d79}.-esm-patient-appointments__upcoming-appointments-card__container___IsFLz{margin:1rem}.-esm-patient-appointments__upcoming-appointments-card__container___IsFLz section{margin:1rem 0}.-esm-patient-appointments__upcoming-appointments-card__sectionTitle___Kl7Jw{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin:0 0 .5rem 0}.-esm-patient-appointments__upcoming-appointments-card__checkbox___vDzus:not(:first-child){margin:0rem 0rem}.-esm-patient-appointments__upcoming-appointments-card__input___wBHUI{margin:0rem 1rem 1rem}.-esm-patient-appointments__upcoming-appointments-card__headerLabel___UUCT_{font-size:var(--cds-label-01-font-size, 0.75rem);font-weight:var(--cds-label-01-font-weight, 400);line-height:var(--cds-label-01-line-height, 1.33333);letter-spacing:var(--cds-label-01-letter-spacing, 0.32px);color:#525252}.-esm-patient-appointments__upcoming-appointments-card__checkboxContainer___g7G3W{display:grid;grid-template-columns:1fr 1fr}.-esm-patient-appointments__upcoming-appointments-card__structuredList___pOjTt{padding:.5rem .5rem .5rem}.-esm-patient-appointments__upcoming-appointments-card__inlineNotification___J4geb{width:100%;max-width:unset;padding:"0rem"}',"",{version:3,sources:["webpack://./../../node_modules/@openmrs/esm-styleguide/src/_vars.scss","webpack://./src/appointments/upcoming-appointments-card.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAoDA,MACE,mBAAA,CACA,mBAAA,CACA,mBAAA,CCnDF,0EACE,WC0BW,CDxBX,kFACE,aAAA,CAIJ,6EE8zBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CF5zBF,aDTQ,CCUR,kBAAA,CAGE,2FACE,gBAAA,CAIJ,sEACE,qBAAA,CAGF,4EE+yBE,gDAAA,CAAA,gDAAA,CAAA,oDAAA,CAAA,yDAAA,CF7yBA,aDxBM,CC2BR,kFACE,YAAA,CACA,6BAAA,CAGF,+EACE,yBAAA,CAIF,mFACE,UAAA,CACA,eAAA,CACA,cAAA",sourceRoot:""}]),o.locals={container:"-esm-patient-appointments__upcoming-appointments-card__container___IsFLz",sectionTitle:"-esm-patient-appointments__upcoming-appointments-card__sectionTitle___Kl7Jw",checkbox:"-esm-patient-appointments__upcoming-appointments-card__checkbox___vDzus",input:"-esm-patient-appointments__upcoming-appointments-card__input___wBHUI",headerLabel:"-esm-patient-appointments__upcoming-appointments-card__headerLabel___UUCT_",checkboxContainer:"-esm-patient-appointments__upcoming-appointments-card__checkboxContainer___g7G3W",structuredList:"-esm-patient-appointments__upcoming-appointments-card__structuredList___pOjTt",inlineNotification:"-esm-patient-appointments__upcoming-appointments-card__inlineNotification___J4geb"};const s=o},6824:function(t){t.exports=function(){"use strict";return function(t,e,n){e.prototype.isToday=function(){var t="YYYY-MM-DD",e=n();return this.format(t)===e.format(t)}}}()},264:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,n=/([+-]|\d\d)/g;return function(a,i,r){var o=i.prototype;r.utc=function(t){return new i({date:t,utc:!0,args:arguments})},o.utc=function(e){var n=r(this.toDate(),{locale:this.$L,utc:!0});return e?n.add(this.utcOffset(),t):n},o.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var c=o.init;o.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else c.call(this)};var p=o.utcOffset;o.utcOffset=function(a,i){var r=this.$utils().u;if(r(a))return this.$u?0:r(this.$offset)?p.call(this):this.$offset;if("string"==typeof a&&(a=function(t){void 0===t&&(t="");var a=t.match(e);if(!a)return null;var i=(""+a[0]).match(n)||["-",0,0],r=i[0],o=60*+i[1]+ +i[2];return 0===o?0:"+"===r?o:-o}(a),null===a))return this;var o=Math.abs(a)<=16?60*a:a,s=this;if(i)return s.$offset=o,s.$u=0===a,s;if(0!==a){var c=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+c,t)).$offset=o,s.$x.$localOffset=c}else s=this.utc();return s};var l=o.format;o.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return l.call(this,e)},o.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var m=o.toDate;o.toDate=function(t){return"s"===t&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():m.call(this)};var u=o.diff;o.diff=function(t,e,n){if(t&&this.$u===t.$u)return u.call(this,t,e,n);var a=this.local(),i=r(t).local();return u.call(a,i,e,n)}}}()},9318:(t,e,n)=>{"use strict";n.d(e,{Ae:()=>A,GB:()=>d,l9:()=>u,v1:()=>h,zt:()=>m});var a=n(3565),i=n.n(a),r=n(3255),o=n(2870),s=n(6824),c=n.n(s);function p(t,e,n,a,i,r,o){try{var s=t[r](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(a,i)}i().extend(c());var l="/ws/rest/v1/appointments/search";function m(t,e,n){var a,s,c,p,m,u,d,A=(0,r.ZP)(l,(function(){return(0,o.openmrsFetch)(l,{method:"POST",signal:n.signal,headers:{"Content-Type":"application/json"},body:{patientUuid:t,startDate:e}})})),f=A.data,_=A.error,h=A.isLoading,g=A.isValidating,v=A.mutate,b=(null==f||null===(a=f.data)||void 0===a?void 0:a.length)?f.data:null,C=null==b||null===(c=b.sort((function(t,e){return e.startDateTime>t.startDateTime?1:-1})))||void 0===c||null===(s=c.filter((function(t){return"Cancelled"!==t.status})))||void 0===s?void 0:s.filter((function(t){var e=t.startDateTime;return i()(new Date(e).toISOString()).isBefore((new Date).setHours(0,0,0,0))})),y=null==b||null===(m=b.sort((function(t,e){return t.startDateTime>e.startDateTime?1:-1})))||void 0===m||null===(p=m.filter((function(t){return"Cancelled"!==t.status})))||void 0===p?void 0:p.filter((function(t){var e=t.startDateTime;return i()(new Date(e).toISOString()).isAfter(new Date)})),E=null==b||null===(d=b.sort((function(t,e){return t.startDateTime>e.startDateTime?1:-1})))||void 0===d||null===(u=d.filter((function(t){return"Cancelled"!==t.status})))||void 0===u?void 0:u.filter((function(t){var e=t.startDateTime;return i()(new Date(e).toISOString()).isToday()}));return{data:f?{pastAppointments:C,upcomingAppointments:y,todaysAppointments:E}:null,isError:_,isLoading:h,isValidating:g,mutate:v}}function u(){var t=(0,r.ZP)("/ws/rest/v1/appointmentService/all/full",o.openmrsFetch),e=t.data,n=t.error,a=t.isLoading;return{data:e?e.data:null,isError:n,isLoading:a}}function d(t,e){return(0,o.openmrsFetch)("/ws/rest/v1/appointment",{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json"},body:t})}function A(t,e){return(0,o.openmrsFetch)("/ws/rest/v1/recurring-appointments",{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json"},body:t})}var f,_,h=(f=function(t,e,n){var a,r,s;return function(t,e){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}(this,(function(n){switch(n.label){case 0:return a=Intl.DateTimeFormat().resolvedOptions().timeZone,r=i()(new Date).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"),s="/ws/rest/v1/appointments/".concat(e,"/status-change"),[4,(0,o.openmrsFetch)(s,{body:{toStatus:t,onDate:r,timeZone:a},method:"POST",headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent()]}}))},_=function(){var t=this,e=arguments;return new Promise((function(n,a){var i=f.apply(t,e);function r(t){p(i,n,a,r,o,"next",t)}function o(t){p(i,n,a,r,o,"throw",t)}r(void 0)}))},function(t,e,n){return _.apply(this,arguments)})},2043:(t,e,n)=>{"use strict";n.r(e),n.d(e,{appointmentsCancelConfirmationDialog:()=>At,appointmentsDetailedSummary:()=>mt,appointmentsFormWorkspace:()=>dt,appointmentsOverview:()=>lt,appointmentsSummaryDashboardLink:()=>ut,importTranslation:()=>it,startupApp:()=>st,upcomingAppointmentsWidget:()=>ft});var a=n(2870),i=n(4556),r=n(7900),o=n.n(r),s=n(4924),c=n(3565),p=n.n(c),l=n(2876),m=n(8871),u=n(9318),d=n(2779),A=n.n(d),f=n(1354),_=n.n(f),h=n(1583),g=n.n(h),v=n(7378),b=n.n(v),C=n(5993),y=n.n(C),E=n(4154),w=n.n(E),D=n(8141),S=n.n(D),T=n(7380),O={};O.styleTagTransform=S(),O.setAttributes=y(),O.insert=b().bind(null,"head"),O.domAPI=g(),O.insertStyleElement=w(),_()(T.Z,O);const k=T.Z&&T.Z.locals?T.Z.locals:void 0;var x=function(t){var e=t.appointment,n=t.patientUuid,c=(0,s.useTranslation)().t,p="tablet"===(0,a.useLayoutType)(),m=(0,r.useCallback)((function(){return(0,i.launchPatientWorkspace)("appointments-form-workspace",{workspaceTitle:c("editAppointment","Edit an appointment"),appointment:e,context:"editing"})}),[e,c]);return o().createElement(l.mh4,{className:k.layer},o().createElement(l.PQB,{ariaLabel:"Edit or delete appointment",size:p?"lg":"sm",flipped:!0},o().createElement(l.laM,{className:k.menuItem,id:"editAppointment",onClick:m,itemText:c("edit","Edit")}),o().createElement(l.laM,{className:k.menuItem,id:"cancelAppointment",itemText:c("cancel","Cancel"),onClick:function(){var t=(0,a.showModal)("appointment-cancel-confirmation-dialog",{closeCancelModal:function(){return t()},appointmentUuid:e.uuid,patientUuid:n})},isDelete:!0,hasDivider:!0})))},B=n(8019),F={};F.styleTagTransform=S(),F.setAttributes=y(),F.insert=b().bind(null,"head"),F.domAPI=g(),F.insertStyleElement=w(),_()(B.Z,F);const P=B.Z&&B.Z.locals?B.Z.locals:void 0;function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=n(264);p().extend(I);const U=function(t){var e=t.patientAppointments,n=t.patientUuid,c=t.switchedView,p=t.setSwitchedView,m=(0,s.useTranslation)().t,u=(0,a.usePagination)(e,10),d=u.results,f=u.currentPage,_=u.goTo,h="tablet"===(0,a.useLayoutType)();(0,r.useEffect)((function(){c&&1!==f&&_(1)}),[c,_,f]);var g=(0,r.useMemo)((function(){return[{key:"date",header:m("date","Date")},{key:"location",header:m("location","Location")},{key:"service",header:m("service","Service")},{key:"status",header:m("status","Status")},{key:"type",header:m("type","Type")},{key:"notes",header:m("notes","Notes")}]}),[m]),v=(0,r.useMemo)((function(){return null==d?void 0:d.map((function(t){var e,n;return{id:t.uuid,date:(0,a.formatDatetime)((0,a.parseDate)(t.startDateTime),{mode:"wide"}),location:(null==t||null===(e=t.location)||void 0===e?void 0:e.name)?null==t||null===(n=t.location)||void 0===n?void 0:n.name:"——",service:t.service.name,status:t.status,type:t.appointmentKind?t.appointmentKind:"——",notes:t.comments?t.comments:"——"}}))}),[d]);return o().createElement("div",null,o().createElement(l.wQF,{rows:v,headers:g,isSortable:!0,size:h?"lg":"sm",useZebraStyles:!0},(function(t){var e=t.rows,a=t.headers,i=t.getHeaderProps,r=t.getTableProps;return o().createElement(l.xJi,null,o().createElement(l.iA_,r(),o().createElement(l.ssF,null,o().createElement(l.SCH,null,a.map((function(t){var e,n;return o().createElement(l.xDH,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){j(t,e,n[e])}))}return t}({className:A()(P.productiveHeading01,P.text02)},i({header:t,isSortable:t.isSortable})),null!==(n=null===(e=t.header)||void 0===e?void 0:e.content)&&void 0!==n?n:t.header)})),o().createElement(l.xDH,null))),o().createElement(l.RMI,null,e.map((function(t,e){return o().createElement(l.SCH,{key:t.id},t.cells.map((function(t){var e,n;return o().createElement(l.pj1,{key:t.id},null!==(n=null===(e=t.value)||void 0===e?void 0:e.content)&&void 0!==n?n:t.value)})),o().createElement(l.pj1,{className:"cds--table-column-menu"},o().createElement(x,{appointment:d[e],patientUuid:n})))})))))})),o().createElement(i.PatientChartPagination,{currentItems:d.length,totalItems:e.length,onPageNumberChange:function(t){var e=t.page;p(!1),_(e)},pageNumber:f,pageSize:10}))};var $=n(2164),Z={};Z.styleTagTransform=S(),Z.setAttributes=y(),Z.insert=b().bind(null,"head"),Z.domAPI=g(),Z.insertStyleElement=w(),_()($.Z,Z);const N=$.Z&&$.Z.locals?$.Z.locals:void 0;function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a,i,r=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(a=n.next()).done)&&(r.push(a.value),!e||r.length!==e);o=!0);}catch(t){s=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H;!function(t){t[t.UPCOMING=0]="UPCOMING",t[t.TODAY=1]="TODAY",t[t.PAST=2]="PAST"}(H||(H={}));const G=function(t){var e,n,c,d,A=t.patientUuid,f=(0,s.useTranslation)().t,_=f("appointments","Appointments"),h="tablet"===(0,a.useLayoutType)(),g=M((0,r.useState)(!1),2),v=g[0],b=g[1],C=M((0,r.useState)(0),2),y=C[0],E=C[1],w=p()((new Date).toISOString()).subtract(6,"month").toISOString(),D=(0,u.zt)(A,w,new AbortController),S=D.data,T=D.isError,O=D.isLoading,k=D.isValidating;return O?o().createElement(l.gqd,{role:"progressbar",compact:!h,zebra:!0}):T?o().createElement(i.ErrorState,{headerTitle:_,error:T}):(null===(e=Object.keys(S))||void 0===e?void 0:e.length)?o().createElement("div",{className:N.widgetCard},o().createElement(i.CardHeader,{title:_},k?o().createElement("span",null,o().createElement(l.lSo,null)):null,o().createElement("div",{className:N.contentSwitcherWrapper},o().createElement(l.GHR,{size:h?"md":"sm",onChange:function(t){var e=t.index;E(e),b(!0)}},o().createElement(l.rsf,{name:"upcoming",text:f("upcoming","Upcoming")}),o().createElement(l.rsf,{name:"today",text:f("today","Today")}),o().createElement(l.rsf,{name:"past",text:f("past","Past")})),o().createElement("div",{className:N.divider},"|"),o().createElement(l.zxk,{kind:"ghost",renderIcon:function(t){return o().createElement(m.mm,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){z(t,e,n[e])}))}return t}({size:16},t))},iconDescription:"Add Appointments",onClick:function(){return(0,i.launchPatientWorkspace)("appointments-form-workspace",{workspaceTitle:f("scheduleAppointment","Schedule appointment")})}},f("add","Add")))),0===y?(null===(n=S.upcomingAppointments)||void 0===n?void 0:n.length)?o().createElement(U,{patientAppointments:null==S?void 0:S.upcomingAppointments,switchedView:v,setSwitchedView:b,patientUuid:A}):o().createElement(l.mh4,null,o().createElement(l.n9L,{className:N.tile},o().createElement(i.EmptyDataIllustration,null),o().createElement("p",{className:N.content},f("noUpcomingAppointmentsForPatient","There are no upcoming appointments to display for this patient")))):1===y?(null===(c=S.todaysAppointments)||void 0===c?void 0:c.length)?o().createElement(U,{patientAppointments:null==S?void 0:S.todaysAppointments,switchedView:v,setSwitchedView:b,patientUuid:A}):o().createElement(l.mh4,null,o().createElement(l.n9L,{className:N.tile},o().createElement(i.EmptyDataIllustration,null),o().createElement("p",{className:N.content},f("noCurrentAppointments","There are no appointments scheduled for today to display for this patient")))):2===y?(null===(d=S.pastAppointments)||void 0===d?void 0:d.length)?o().createElement(U,{patientAppointments:null==S?void 0:S.pastAppointments,switchedView:v,setSwitchedView:b,patientUuid:A}):o().createElement(l.mh4,null,o().createElement(l.n9L,{className:N.tile},o().createElement(i.EmptyDataIllustration,null),o().createElement("p",{className:N.content},f("noPastAppointments","There are no past appointments to display for this patient")))):void 0):void 0};var W=n(5986),J=n(2263),Y=n(4405),R=n(7885),V=n(3282),Q=n(2143),K=n(5441),q=n(2663),X=Object.prototype.hasOwnProperty;var tt=n(2258),et={};et.styleTagTransform=S(),et.setAttributes=y(),et.insert=b().bind(null,"head"),et.domAPI=g(),et.insertStyleElement=w(),_()(tt.Z,et);const nt=tt.Z&&tt.Z.locals?tt.Z.locals:void 0;function at(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=n(3979),rt="@openmrs/esm-patient-appointments-app",ot={featureName:"patient-appointments",moduleName:rt};function st(){(0,a.defineConfigSchema)(rt,{})}var ct,pt,lt=(0,a.getSyncLifecycle)((function(t){var e=t.patientUuid;return o().createElement(G,{patientUuid:e})}),ot),mt=(0,a.getSyncLifecycle)((function(t){var e=t.patientUuid;return o().createElement(G,{patientUuid:e})}),ot),ut=(0,a.getSyncLifecycle)((0,i.createDashboardLink)((ct=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),a.forEach((function(e){at(t,e,n[e])}))}return t}({},{slot:"patient-chart-appointments-dashboard-slot",columns:1,title:"Appointments",path:"Appointments"}),pt=null!=(pt={moduleName:rt})?pt:{},Object.getOwnPropertyDescriptors?Object.defineProperties(ct,Object.getOwnPropertyDescriptors(pt)):function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);n.push.apply(n,a)}return n}(Object(pt)).forEach((function(t){Object.defineProperty(ct,t,Object.getOwnPropertyDescriptor(pt,t))})),ct)),ot),dt=(0,a.getAsyncLifecycle)((function(){return Promise.all([n.e(940),n.e(605)]).then(n.bind(n,7605))}),ot),At=(0,a.getAsyncLifecycle)((function(){return n.e(323).then(n.bind(n,3323))}),ot),ft=(0,a.getSyncLifecycle)((function(t){var e,n,c=t.patientUuid,m=t.setUpcomingAppointment,d=(0,s.useTranslation)().t,A=p()((new Date).toISOString()).subtract(6,"month").toISOString(),f=d("upcomingAppointments","Upcoming appointments"),_=(0,r.useMemo)((function(){return new AbortController}),[]);(0,r.useEffect)((function(){return function(){return _.abort()}}),[_]);var h=(0,u.zt)(c,A,_),g=h.data,v=h.isError,b=h.isLoading,C=(null==g||null===(e=g.todaysAppointments)||void 0===e?void 0:e.length)?null==g?void 0:g.todaysAppointments:[],y=(null==g||null===(n=g.upcomingAppointments)||void 0===n?void 0:n.length)?null==g?void 0:g.upcomingAppointments:[],E=C.concat(y),w=function(t){if(null==t)return!0;if((0,V.Z)(t)&&((0,R.Z)(t)||"string"==typeof t||"function"==typeof t.splice||(0,Q.Z)(t)||(0,q.Z)(t)||(0,Y.Z)(t)))return!t.length;var e=(0,J.Z)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if((0,K.Z)(t))return!(0,W.Z)(t).length;for(var n in t)if(X.call(t,n))return!1;return!0}(E)?[]:null==E?void 0:E.filter((function(t){return null===t.dateHonored}));return v?o().createElement(i.ErrorState,{headerTitle:f,error:v}):(b&&l.lSo,(null==w?void 0:w.length)?o().createElement("div",null,o().createElement("div",null,o().createElement("p",{className:nt.sectionTitle},f),o().createElement("span",{className:nt.headerLabel},d("appointmentToFulfill","Select appointment(s) to fulfill"))," "),o().createElement(l.x4x,null,o().createElement(l.SmK,null,o().createElement(l.s1N,{head:!0},o().createElement(l.agF,{head:!0},d("date","Date")),o().createElement(l.agF,{head:!0},d("appointmentType","Appointment type")),o().createElement(l.agF,{head:!0},d("action","Action")))),o().createElement(l.FxI,null,w.map((function(t,e){return o().createElement(l.s1N,{label:!0,key:"row-".concat(e),className:nt.structuredList},o().createElement(l.agF,null,(0,a.formatDate)((0,a.parseDate)(t.startDateTime),{mode:"wide"})),o().createElement(l.agF,null,t.service?t.service.name:"——"),o().createElement(l.agF,null,o().createElement(l.XZJ,{className:nt.checkbox,key:e,labelText:"",defaultChecked:p()(new Date(t.startDateTime).toISOString()).isToday(),id:t.uuid,onChange:function(e){return e.target.checked?m(t):""}})))}))))):o().createElement(l.K0D,{kind:"info",lowContrast:!0,className:nt.inlineNotification,title:d("upcomingAppointments","Upcoming appointments"),subtitle:d("noUpcomingAppointments","No upcoming appointments found")}))}),ot)},3979:(t,e,n)=>{var a={"./am.json":[8788,788],"./ar.json":[4460,460],"./en.json":[3574,574],"./es.json":[8319,319],"./fr.json":[2757,757],"./he.json":[5833,833],"./km.json":[7807,807]};function i(t){if(!n.o(a,t))return Promise.resolve().then((()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[t],i=e[0];return n.e(e[1]).then((()=>n(i)))}i.keys=()=>Object.keys(a),i.id=3979,t.exports=i}}]);