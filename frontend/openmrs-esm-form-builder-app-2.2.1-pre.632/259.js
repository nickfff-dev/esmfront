"use strict";(globalThis.webpackChunk_openmrs_esm_form_builder_app=globalThis.webpackChunk_openmrs_esm_form_builder_app||[]).push([[259],{89454:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__action-buttons__actionButtons___fHui9{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__action-buttons__actionButtons___fHui9 button{margin-left:1rem}.-esm-form-builder__action-buttons__spinner___uTjVo.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/action-buttons/action-buttons.scss"],names:[],mappings:"AAAA,0DACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,iEACE,gBAAA,CAKF,wEACE,eAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__action-buttons__actionButtons___fHui9",spinner:"-esm-form-builder__action-buttons__spinner___uTjVo"};const l=i},40270:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__dashboard__container___Wal_P{padding:2rem;background-color:#f4f4f4}.-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5{flex:1}.-esm-form-builder__dashboard__flexContainer___Mm18q{display:flex;justify-content:space-between}.-esm-form-builder__dashboard__toolbarWrapper___RUga4{position:relative;display:flex;justify-content:flex-end}.omrs-breakpoint-lt-desktop .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:3rem}.omrs-breakpoint-gt-tablet .-esm-form-builder__dashboard__toolbarWrapper___RUga4{height:2rem}.-esm-form-builder__dashboard__tableToolbar___C3SIt{width:20%;min-width:12.5rem}.-esm-form-builder__dashboard__headerContainer___p8D9T{background-color:#f4f4f4}.-esm-form-builder__dashboard__searchbox___Xqlyd input{outline:2px solid #ff832b !important}.-esm-form-builder__dashboard__table___bB2_m tr:last-of-type td{border-bottom:none}.-esm-form-builder__dashboard__table___bB2_m td{padding-top:0;padding-bottom:0}.-esm-form-builder__dashboard__heading___xWICQ{margin-bottom:1.5rem}.-esm-form-builder__dashboard__toolbar___Jd1Mo{position:relative;display:flex;width:100%;min-height:2rem;margin-bottom:.5rem}.-esm-form-builder__dashboard__emptyContainer___NMRCU{justify-content:center;align-items:center;width:100%;padding:1rem}.-esm-form-builder__dashboard__tableContainer___g3LIB{padding:0}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--data-table-content{border:1px solid #e0e0e0;border-bottom:none;overflow:visible}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--table-toolbar{position:relative;height:2rem;min-height:0rem;overflow:visible;top:0}.-esm-form-builder__dashboard__tableContainer___g3LIB.cds--data-table-container{padding-top:0rem}.-esm-form-builder__dashboard__tableContainer___g3LIB .cds--btn--icon-only{padding-block-start:.5rem}.-esm-form-builder__dashboard__filterContainer____yxN0{flex:1}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--dropdown__wrapper--inline{gap:0}.-esm-form-builder__dashboard__filterContainer____yxN0 .cds--list-box__menu-icon{height:1rem}.-esm-form-builder__dashboard__content___rpYvj{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252;margin-bottom:.5rem}.-esm-form-builder__dashboard__tileContainer___qC3f7{background-color:#fff;border-top:1px solid #525252;padding:5rem 0}.-esm-form-builder__dashboard__tile___NdQlL{margin:auto;width:fit-content}.-esm-form-builder__dashboard__tileContent___OIedg{display:flex;flex-direction:column;align-items:center}.-esm-form-builder__dashboard__warningMessage___hTdHn{margin:1.5rem 0}.-esm-form-builder__dashboard__spinner___e3Lbh.cds--inline-loading{min-height:1rem}","",{version:3,sources:["webpack://./src/components/dashboard/dashboard.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iDACE,YAAA,CACA,wBCoCQ,CDjCV,uEACE,MAAA,CAGF,qDACE,YAAA,CACA,6BAAA,CAGF,sDACE,iBAAA,CACA,YAAA,CACA,wBAAA,CAIA,kFACE,WEyBS,CFpBX,iFACE,WESS,CFLb,oDACE,SAAA,CACA,iBAAA,CAGF,uDACE,wBAAA,CAIA,uDACE,oCAAA,CAQE,gEACE,kBAAA,CAKN,gDACE,aAAA,CACA,gBAAA,CAIJ,+CACE,oBAAA,CAGF,+CACE,iBAAA,CACA,YAAA,CACA,UAAA,CACA,eAAA,CACA,mBAAA,CAGF,sDACE,sBAAA,CACA,kBAAA,CACA,UAAA,CACA,YAAA,CAGF,sDACE,SAAA,CAEA,+EACE,wBAAA,CACA,kBAAA,CACA,gBAAA,CAGF,0EACE,iBAAA,CACA,WAAA,CACA,eAAA,CACA,gBAAA,CACA,KAAA,CAGF,gFACE,gBAAA,CAIF,2EACE,yBAAA,CAIJ,uDACE,MAAA,CAEA,uFACE,KAAA,CAGF,iFACE,WAAA,CAIJ,+CGquBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CHnuBF,aC/EQ,CDgFR,mBAAA,CAGF,qDACE,qBCVQ,CDWR,4BAAA,CACA,cAAA,CAGF,4CACE,WAAA,CACA,iBAAA,CAGF,mDACE,YAAA,CACA,qBAAA,CACA,kBAAA,CAGF,sDACE,eAAA,CAIA,mEACE,eAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__dashboard__container___Wal_P",backgroundDataFetchingIndicator:"-esm-form-builder__dashboard__backgroundDataFetchingIndicator___pvhG5",flexContainer:"-esm-form-builder__dashboard__flexContainer___Mm18q",toolbarWrapper:"-esm-form-builder__dashboard__toolbarWrapper___RUga4",tableToolbar:"-esm-form-builder__dashboard__tableToolbar___C3SIt",headerContainer:"-esm-form-builder__dashboard__headerContainer___p8D9T",searchbox:"-esm-form-builder__dashboard__searchbox___Xqlyd",table:"-esm-form-builder__dashboard__table___bB2_m",heading:"-esm-form-builder__dashboard__heading___xWICQ",toolbar:"-esm-form-builder__dashboard__toolbar___Jd1Mo",emptyContainer:"-esm-form-builder__dashboard__emptyContainer___NMRCU",tableContainer:"-esm-form-builder__dashboard__tableContainer___g3LIB",filterContainer:"-esm-form-builder__dashboard__filterContainer____yxN0",content:"-esm-form-builder__dashboard__content___rpYvj",tileContainer:"-esm-form-builder__dashboard__tileContainer___qC3f7",tile:"-esm-form-builder__dashboard__tile___NdQlL",tileContent:"-esm-form-builder__dashboard__tileContent___OIedg",warningMessage:"-esm-form-builder__dashboard__warningMessage___hTdHn",spinner:"-esm-form-builder__dashboard__spinner___e3Lbh"};const l=i},4298:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__empty-state__action___O1dBg{margin-bottom:.5rem}.-esm-form-builder__empty-state__content___qowQ3{font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);color:#525252;margin-top:1rem;margin-bottom:.5rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__tabletHeading___BEQmV h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__empty-state__desktopHeading___kdF99,.-esm-form-builder__empty-state__tabletHeading___BEQmV{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__empty-state__desktopHeading___kdF99 h4:after,.-esm-form-builder__empty-state__tabletHeading___BEQmV h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__heading___UrKNa:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__empty-state__tile___kOT5S{text-align:center;border:1px solid #525252}',"",{version:3,sources:["webpack://./src/components/empty-state/empty-state.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,gDACE,mBCgBW,CDbb,iDE01BI,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CFx1BF,aGsCQ,CHrCR,eCoBW,CDnBX,mBCSW,CDLX,2DEk1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFh1BA,aG8BM,CHzBR,0DE20BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFz0BA,aGuBM,CHnBV,+GACE,eAAA,CACA,yBAAA,CACA,kBCDW,CDGX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,uDACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAGF,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={action:"-esm-form-builder__empty-state__action___O1dBg",content:"-esm-form-builder__empty-state__content___qowQ3",desktopHeading:"-esm-form-builder__empty-state__desktopHeading___kdF99",tabletHeading:"-esm-form-builder__empty-state__tabletHeading___BEQmV",heading:"-esm-form-builder__empty-state__heading___UrKNa",tile:"-esm-form-builder__empty-state__tile___kOT5S"};const l=i},39761:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__error-state__errorMessage___Y5qNF{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-top:2.25rem;margin-bottom:.5rem}.-esm-form-builder__error-state__errorCopy___JQziZ{margin-bottom:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__tabletHeading___XUrSF h4{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);color:#525252}.-esm-form-builder__error-state__desktopHeading___Ri1i7,.-esm-form-builder__error-state__tabletHeading___XUrSF{text-align:left;text-transform:capitalize;margin-bottom:1rem}.-esm-form-builder__error-state__desktopHeading___Ri1i7 h4:after,.-esm-form-builder__error-state__tabletHeading___XUrSF h4:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__error-state__tile___w49e4{text-align:center;border:1px solid #e0e0e0}',"",{version:3,sources:["webpack://./src/components/error-state/error-state.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,sDC81BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD31BF,kBAAA,CACA,mBEaW,CFVb,mDACE,mBESW,CD60BT,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDp1BF,aGkCQ,CH9BR,2DCg1BE,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD90BA,aG4BM,CHvBR,0DCy0BE,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDv0BA,aGqBM,CHjBV,+GACE,eAAA,CACA,yBAAA,CACA,kBEHW,CFKX,iIACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,8CACE,iBAAA,CACA,wBAAA",sourceRoot:""}]),i.locals={errorMessage:"-esm-form-builder__error-state__errorMessage___Y5qNF",errorCopy:"-esm-form-builder__error-state__errorCopy___JQziZ",desktopHeading:"-esm-form-builder__error-state__desktopHeading___Ri1i7",tabletHeading:"-esm-form-builder__error-state__tabletHeading___XUrSF",tile:"-esm-form-builder__error-state__tile___w49e4"};const l=i},34553:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__form-editor__container___EWcU0{padding:2rem;display:flex;flex-direction:column}.-esm-form-builder__form-editor__breadcrumbsContainer___PDhcm nav{background-color:#fff}.-esm-form-builder__form-editor__grid___wYMDM{margin-left:0;margin-right:0;padding-left:0;padding-right:0;max-width:100%}.-esm-form-builder__form-editor__grid___wYMDM .cds--tabs__nav-item--selected{border-bottom:2px solid var(--cds-border-interactive, #005d5d);outline:none !important}.-esm-form-builder__form-editor__column___C5MAT{margin-left:0;margin-right:0}.-esm-form-builder__form-editor__errorNotification___G_V3y{min-width:100%;margin:0;padding:0}.-esm-form-builder__form-editor__actionButtons___SA2Vs{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__form-editor__actionButtons___SA2Vs button{margin-left:1rem}.-esm-form-builder__form-editor__editorContainer___ABeSl{padding:1rem}.-esm-form-builder__form-editor__heading___SeRaW{display:flex;margin-right:1rem;align-items:center}.-esm-form-builder__form-editor__tabHeading___As8B0{display:flex;align-items:center;font-size:var(--cds-heading-compact-01-font-size, 0.875rem);font-weight:var(--cds-heading-compact-01-font-weight, 600);line-height:var(--cds-heading-compact-01-line-height, 1.28572);letter-spacing:var(--cds-heading-compact-01-letter-spacing, 0.16px);min-height:2.5rem;width:100%;padding:.75rem}","",{version:3,sources:["webpack://./src/components/form-editor/form-editor.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,mDACE,YAAA,CACA,YAAA,CACA,qBAAA,CAIA,kEACE,qBC8GM,CD1GV,8CACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CACA,cAAA,CAEA,6EACE,8DAAA,CACA,uBAAA,CAIJ,gDACE,aAAA,CACA,cAAA,CAGF,2DACE,cAAA,CACA,QAAA,CACA,SAAA,CAGF,uDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,8DACE,gBAAA,CAIJ,yDACE,YAAA,CAGF,iDACE,YAAA,CACA,iBAAA,CACA,kBAAA,CAGF,oDACE,YAAA,CACA,kBAAA,CEmyBE,2DAAA,CAAA,0DAAA,CAAA,8DAAA,CAAA,mEAAA,CFjyBF,iBAAA,CACA,UAAA,CACA,cAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-editor__container___EWcU0",breadcrumbsContainer:"-esm-form-builder__form-editor__breadcrumbsContainer___PDhcm",grid:"-esm-form-builder__form-editor__grid___wYMDM",column:"-esm-form-builder__form-editor__column___C5MAT",errorNotification:"-esm-form-builder__form-editor__errorNotification___G_V3y",actionButtons:"-esm-form-builder__form-editor__actionButtons___SA2Vs",editorContainer:"-esm-form-builder__form-editor__editorContainer___ABeSl",heading:"-esm-form-builder__form-editor__heading___SeRaW",tabHeading:"-esm-form-builder__form-editor__tabHeading___As8B0"};const l=i},51659:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__form-renderer__container___qmP2j,.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#fff;padding:1rem;overflow-y:scroll;height:100vh}.-esm-form-builder__form-renderer__loadingContainer___RJP8p{background-color:#f4f4f4;margin-top:5rem}.-esm-form-builder__form-renderer__loader___AOiPt{display:flex;justify-content:center;align-items:center;height:inherit}.-esm-form-builder__form-renderer__emptyStateTile___mZ_kI,.-esm-form-builder__form-renderer__errorStateTile___q9583{width:80%;margin:1.25rem auto;display:flex;flex-flow:column wrap;align-items:center;justify-content:center;padding:1.5rem}.-esm-form-builder__form-renderer__errorStateTile___q9583 .-esm-form-builder__form-renderer__helperText___Pnlco{margin:.75rem 0}.-esm-form-builder__form-renderer__errorStateTile___q9583 button{margin-top:.25rem}.-esm-form-builder__form-renderer__heading___S2HQc{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);color:#161616}.-esm-form-builder__form-renderer__helperText___Pnlco{margin-top:.5rem;font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);color:#262626}","",{version:3,sources:["webpack://./src/components/form-renderer/form-renderer.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iHACE,qBCqHQ,CDpHR,YAAA,CACA,iBAAA,CACA,YAAA,CAGF,4DAEE,wBC6BQ,CD5BR,eAAA,CAGF,kDACE,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,cAAA,CAGF,oHACE,SAAA,CACA,mBAAA,CACA,YAAA,CACA,qBAAA,CACA,kBAAA,CACA,sBAAA,CACA,cAAA,CAMA,gHACE,eAAA,CAGF,iEACE,iBAAA,CAIJ,mDEozBI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CFlzBF,aCGS,CAAA,sDDCT,gBAAA,CE8yBE,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CF5yBF,aCJQ",sourceRoot:""}]),i.locals={container:"-esm-form-builder__form-renderer__container___qmP2j",loadingContainer:"-esm-form-builder__form-renderer__loadingContainer___RJP8p",loader:"-esm-form-builder__form-renderer__loader___AOiPt",emptyStateTile:"-esm-form-builder__form-renderer__emptyStateTile___mZ_kI",errorStateTile:"-esm-form-builder__form-renderer__errorStateTile___q9583",helperText:"-esm-form-builder__form-renderer__helperText___Pnlco",heading:"-esm-form-builder__form-renderer__heading___S2HQc"};const l=i},16003:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__draggable-question__buttonsContainer___DCYP_{display:flex;align-items:center}.-esm-form-builder__draggable-question__iconAndName___IqOwD{display:flex;align-items:center}.-esm-form-builder__draggable-question__questionLabel___Qbeje{font-size:var(--cds-body-01-font-size, 0.875rem);font-weight:var(--cds-body-01-font-weight, 400);line-height:var(--cds-body-01-line-height, 1.42857);letter-spacing:var(--cds-body-01-letter-spacing, 0.16px)}.-esm-form-builder__draggable-question__isDragged___Ro1hP,.-esm-form-builder__draggable-question__normal___NG24l{display:flex;height:3rem;justify-content:space-between;align-items:center;width:100%}.-esm-form-builder__draggable-question__isDragged___Ro1hP{box-shadow:0 4px 8px rgba(0,0,0,.2);background-color:rgba(255,255,255,.552)}.-esm-form-builder__draggable-question__dragIcon___QEZvt{margin-right:.5rem}.-esm-form-builder__draggable-question__dragIcon___QEZvt :focus{border:none !important}","",{version:3,sources:["webpack://./src/components/interactive-builder/draggable-question.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIA,iEACE,YAAA,CACA,kBAAA,CAGF,4DACE,YAAA,CACA,kBAAA,CAGF,8DCo1BI,gDAAA,CAAA,+CAAA,CAAA,mDAAA,CAAA,wDAAA,CDh1BJ,iHACE,YAAA,CACA,WAAA,CACA,6BAAA,CACA,kBAAA,CACA,UAAA,CAGF,0DACE,mCAAA,CACA,uCAAA,CAGF,yDACE,kBAAA,CAEA,gEACE,sBAAA",sourceRoot:""}]),i.locals={buttonsContainer:"-esm-form-builder__draggable-question__buttonsContainer___DCYP_",iconAndName:"-esm-form-builder__draggable-question__iconAndName___IqOwD",questionLabel:"-esm-form-builder__draggable-question__questionLabel___Qbeje",isDragged:"-esm-form-builder__draggable-question__isDragged___Ro1hP",normal:"-esm-form-builder__draggable-question__normal___NG24l",dragIcon:"-esm-form-builder__draggable-question__dragIcon___QEZvt"};const l=i},83531:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__editable-value__schemaLabel___n7Tqt{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0)}.-esm-form-builder__editable-value__pageLabel___HDnGY{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__editable-value__pageLabel___HDnGY:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__editable-value__sectionLabel___SfPGZ{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}',"",{version:3,sources:["webpack://./src/components/interactive-builder/editable-value.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAEA,wDCg2BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD51BJ,sDC41BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD11BF,iBAAA,CAEA,4DACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,yDC+0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA",sourceRoot:""}]),i.locals={schemaLabel:"-esm-form-builder__editable-value__schemaLabel___n7Tqt",pageLabel:"-esm-form-builder__editable-value__pageLabel___HDnGY",sectionLabel:"-esm-form-builder__editable-value__sectionLabel___SfPGZ"};const l=i},28787:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__interactive-builder__container___QqXP7 .cds--modal-content:focus{outline:none}.-esm-form-builder__interactive-builder__container___QqXP7 .cds--tooltip{z-index:1}.-esm-form-builder__interactive-builder__flexContainer___hKEjz{display:flex;align-items:center}.-esm-form-builder__interactive-builder__helperText___hIqWi{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);margin:1rem 0rem}.-esm-form-builder__interactive-builder__heading___YzI9_,.-esm-form-builder__interactive-builder__name___DstHx,.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin:1rem 0rem .5rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0);margin:.5rem 0rem}.-esm-form-builder__interactive-builder__styledHeading___On3NK:after{content:"";display:block;width:2rem;padding-top:.188rem;border-bottom:.375rem solid var(--brand-03)}.-esm-form-builder__interactive-builder__subheading___KNIIX{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__name___DstHx{font-size:var(--cds-heading-02-font-size, 1rem);font-weight:var(--cds-heading-02-font-weight, 600);line-height:var(--cds-heading-02-line-height, 1.5);letter-spacing:var(--cds-heading-02-letter-spacing, 0)}.-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus{margin:1rem 0;border-bottom:1px solid #e0e0e0}.-esm-form-builder__interactive-builder__addQuestionButton___tNA7f{margin:.75rem 0}.-esm-form-builder__interactive-builder__header___PFzXV{margin:2rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c{margin:1rem .5rem}.-esm-form-builder__interactive-builder__explainer___IK72c p{margin:1.5rem 0}.-esm-form-builder__interactive-builder__explainer___IK72c p:first-of-type{font-size:var(--cds-heading-04-font-size, 1.75rem);font-weight:var(--cds-heading-04-font-weight, 400);line-height:var(--cds-heading-04-line-height, 1.28572);letter-spacing:var(--cds-heading-04-letter-spacing, 0)}.-esm-form-builder__interactive-builder__sectionExplainer___g_g6b{margin:1rem .5rem}.-esm-form-builder__interactive-builder__startButton___BrSte{margin:1rem 0}.-esm-form-builder__interactive-builder__editorContainer___OseKc{display:flex;justify-content:space-between;margin:.25rem .5rem;align-items:center;width:100%}.-esm-form-builder__interactive-builder__buttonContainer___JLN17 span{margin:0rem .5rem}.-esm-form-builder__interactive-builder__addSectionButton___BOQnt{margin:1rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/interactive-builder.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAIE,qFACE,YAAA,CAGF,yEACE,SAAA,CAIJ,+DACE,YAAA,CACA,kBAAA,CAGF,4DCg1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD90BF,gBAAA,CAGF,2KC20BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDz0BF,sBAAA,CAGF,+DCs0BI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDp0BF,iBAAA,CAEA,qEACE,UAAA,CACA,aAAA,CACA,UAAA,CACA,mBAAA,CACA,2CAAA,CAIJ,4DCyzBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDpzBJ,sDCozBI,+CAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CD/yBJ,yEACE,aAAA,CACA,+BAAA,CAGF,mEACE,eAAA,CAGF,wDACE,aAAA,CAGF,2DACE,iBAAA,CAEA,6DACE,eAAA,CAEA,2EC4xBA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,sDAAA,CDtxBJ,kEACE,iBAAA,CAGF,6DACE,aAAA,CAGF,iEACE,YAAA,CACA,6BAAA,CACA,mBAAA,CACA,kBAAA,CACA,UAAA,CAIA,sEACE,iBAAA,CAIJ,kEACE,WAAA",sourceRoot:""}]),i.locals={container:"-esm-form-builder__interactive-builder__container___QqXP7",flexContainer:"-esm-form-builder__interactive-builder__flexContainer___hKEjz",helperText:"-esm-form-builder__interactive-builder__helperText___hIqWi",heading:"-esm-form-builder__interactive-builder__heading___YzI9_",name:"-esm-form-builder__interactive-builder__name___DstHx",subheading:"-esm-form-builder__interactive-builder__subheading___KNIIX",styledHeading:"-esm-form-builder__interactive-builder__styledHeading___On3NK",editableFieldsContainer:"-esm-form-builder__interactive-builder__editableFieldsContainer___IXTus",addQuestionButton:"-esm-form-builder__interactive-builder__addQuestionButton___tNA7f",header:"-esm-form-builder__interactive-builder__header___PFzXV",explainer:"-esm-form-builder__interactive-builder__explainer___IK72c",sectionExplainer:"-esm-form-builder__interactive-builder__sectionExplainer___g_g6b",startButton:"-esm-form-builder__interactive-builder__startButton___BrSte",editorContainer:"-esm-form-builder__interactive-builder__editorContainer___OseKc",buttonContainer:"-esm-form-builder__interactive-builder__buttonContainer___JLN17",addSectionButton:"-esm-form-builder__interactive-builder__addSectionButton___BOQnt"};const l=i},76115:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,'.-esm-form-builder__question-modal__label___sskPy{margin-bottom:.5rem}.-esm-form-builder__question-modal__loader___Qa5xT{padding:.75rem .5rem}.-esm-form-builder__question-modal__tag___vovd0{margin-right:.5rem}.-esm-form-builder__question-modal__form___iKunL{overflow-y:scroll}.-esm-form-builder__question-modal__conceptList___mA4im{background:#fff;max-height:14rem;overflow-y:auto;border:1px solid #e0e0e0;border-top:none}.-esm-form-builder__question-modal__conceptList___mA4im li:hover{background-color:#e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr{padding:.75rem;border-bottom:1px solid #e0e0e0}.-esm-form-builder__question-modal__concept___mZEZr:last-of-type{border-bottom:none}.-esm-form-builder__question-modal__emptyResults___WqYUv{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);color:#525252;min-height:1rem}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp{padding:.5rem 1rem;display:flex;justify-content:space-between;align-items:center;background-color:#8d8d8d}.-esm-form-builder__question-modal__oclLauncherBanner___bvAqp p{color:#fff}.-esm-form-builder__question-modal__oclLink___MSYtU{color:#edf5ff;display:flex;align-items:center}.-esm-form-builder__question-modal__oclLink___MSYtU svg{margin-left:.25rem}.-esm-form-builder__question-modal__table___yZxgG,.-esm-form-builder__question-modal__tableStriped___db53S{width:100%}.-esm-form-builder__question-modal__table___yZxgG tr,.-esm-form-builder__question-modal__tableStriped___db53S tr{background-color:#fff;border:1px solid #e0e0e0}.-esm-form-builder__question-modal__table___yZxgG td,.-esm-form-builder__question-modal__tableStriped___db53S td,.-esm-form-builder__question-modal__table___yZxgG th,.-esm-form-builder__question-modal__tableStriped___db53S th{padding:.25rem;border:1px solid #e0e0e0;max-width:10rem;text-align:left}.-esm-form-builder__question-modal__tableStriped___db53S thead{font-weight:bold}.-esm-form-builder__question-modal__tableStriped___db53S tbody>tr:nth-child(odd){background-color:#f4f4f4}.-esm-form-builder__question-modal__multiSelect___GYmMF .cds--list-box__field--wrapper{align-items:center;display:flex;height:2.5rem;justify-content:space-between;margin-left:.5rem;width:100%}.-esm-form-builder__question-modal__error___insjw{width:100%;max-width:unset;padding:"0rem";margin-bottom:1rem}',"",{version:3,sources:["webpack://./src/components/interactive-builder/question-modal.scss","webpack://./node_modules/@carbon/colors/index.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss"],names:[],mappings:"AAGA,kDACE,mBAAA,CAGF,mDACE,oBAAA,CAGF,gDACE,kBAAA,CAGF,iDACE,iBAAA,CAGF,wDACE,eCsGQ,CDrGR,gBAAA,CACA,eAAA,CACA,wBAAA,CACA,eAAA,CAGF,iEACE,wBCeQ,CDZV,oDACE,cAAA,CACA,+BAAA,CAEA,iEACE,kBAAA,CAIJ,yDE0zBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CFxzBF,aCMQ,CDLR,eAAA,CAGF,8DACE,kBAAA,CACA,YAAA,CACA,6BAAA,CACA,kBAAA,CACA,wBCLQ,CDOR,gEACE,UCoEM,CDhEV,oDACE,aC/CQ,CDgDR,YAAA,CACA,kBAAA,CAEA,wDACE,kBAAA,CAIJ,2GACE,UAAA,CAEA,iHACE,qBCkDM,CDjDN,wBAAA,CAGF,kOACE,cAAA,CACA,wBAAA,CACA,eAAA,CACA,eAAA,CAOF,+DACE,gBAAA,CAGF,iFACE,wBClDM,CDuDR,uFACE,kBAAA,CACA,YAAA,CACA,aAAA,CACA,6BAAA,CACA,iBAAA,CACA,UAAA,CAIJ,kDACE,UAAA,CACA,eAAA,CACA,cAAA,CACA,kBAAA",sourceRoot:""}]),i.locals={label:"-esm-form-builder__question-modal__label___sskPy",loader:"-esm-form-builder__question-modal__loader___Qa5xT",tag:"-esm-form-builder__question-modal__tag___vovd0",form:"-esm-form-builder__question-modal__form___iKunL",conceptList:"-esm-form-builder__question-modal__conceptList___mA4im",concept:"-esm-form-builder__question-modal__concept___mZEZr",emptyResults:"-esm-form-builder__question-modal__emptyResults___WqYUv",oclLauncherBanner:"-esm-form-builder__question-modal__oclLauncherBanner___bvAqp",oclLink:"-esm-form-builder__question-modal__oclLink___MSYtU",table:"-esm-form-builder__question-modal__table___yZxgG",tableStriped:"-esm-form-builder__question-modal__tableStriped___db53S",multiSelect:"-esm-form-builder__question-modal__multiSelect___GYmMF",error:"-esm-form-builder__question-modal__error___insjw"};const l=i},81201:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__value-editor__actionButtons___IHzt_{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__value-editor__actionButtons___IHzt_ button{margin-left:1rem}","",{version:3,sources:["webpack://./src/components/interactive-builder/value-editor.scss"],names:[],mappings:"AAAA,wDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,+DACE,gBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__value-editor__actionButtons___IHzt_"};const l=i},62852:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__save-form-modal__spinner___MeJjY.cds--inline-loading{min-height:1rem}.-esm-form-builder__save-form-modal__saveFormBody___DeV3z{max-height:75vh;overflow-y:auto}","",{version:3,sources:["webpack://./src/components/modals/save-form-modal.scss"],names:[],mappings:"AACE,yEACE,eAAA,CAIJ,0DACE,eAAA,CACA,eAAA",sourceRoot:""}]),i.locals={spinner:"-esm-form-builder__save-form-modal__spinner___MeJjY",saveFormBody:"-esm-form-builder__save-form-modal__saveFormBody___DeV3z"};const l=i},2511:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__pagination__bodyShort01___EqwXU,.-esm-form-builder__pagination__configurableLink___p0FSW{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px)}.-esm-form-builder__pagination__desktop___hgBiG,.-esm-form-builder__pagination__tablet___qRkW1{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);display:flex;justify-content:space-between;color:#525252;background-color:#fff;padding-left:1rem;align-items:center}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination{min-height:0rem;height:2rem;width:auto;border:none}.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--select-input,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--btn,.-esm-form-builder__pagination__desktop___hgBiG .cds--pagination .cds--pagination__right{min-height:0rem;height:2rem}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination{min-height:0rem;height:3rem;width:auto;border:none}.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--select-input,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--btn,.-esm-form-builder__pagination__tablet___qRkW1 .cds--pagination .cds--pagination__right{min-height:0rem;height:3rem}.-esm-form-builder__pagination__configurableLink___p0FSW{text-decoration:none;padding:0 .5rem}.-esm-form-builder__pagination__pagination___AT0no{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;display:flex}div.-esm-form-builder__pagination__pagination___AT0no>.cds--pagination__left{display:none}","",{version:3,sources:["webpack://./src/components/pagination/pagination.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,6GC81BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CD11BJ,+FC01BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDx1BF,YAAA,CACA,6BAAA,CACA,aEoCQ,CFnCR,qBE6GQ,CF5GR,iBAAA,CACA,kBAAA,CAGF,iEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,wPACE,eAAA,CACA,WAAA,CAIJ,gEACE,eAAA,CACA,WAAA,CACA,UAAA,CACA,WAAA,CAEA,qPACE,eAAA,CACA,WAAA,CAIJ,yDACE,oBAAA,CAEA,eAAA,CAGF,mDCkzBI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDhzBF,qBEwEQ,CFvER,aEHQ,CFIR,YAAA,CAIA,6EACE,YAAA",sourceRoot:""}]),i.locals={bodyShort01:"-esm-form-builder__pagination__bodyShort01___EqwXU",configurableLink:"-esm-form-builder__pagination__configurableLink___p0FSW",desktop:"-esm-form-builder__pagination__desktop___hgBiG",tablet:"-esm-form-builder__pagination__tablet___qRkW1",pagination:"-esm-form-builder__pagination__pagination___AT0no"};const l=i},14858:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(87537),o=n.n(r),a=n(23645),i=n.n(a)()(o());i.push([e.id,".-esm-form-builder__schema-editor__actionButtons___RskyC{display:flex;align-items:center;justify-content:flex-end;margin:1rem 0}.-esm-form-builder__schema-editor__actionButtons___RskyC button{margin-left:1rem}.-esm-form-builder__schema-editor__errorContainer___qqx2V{font-size:var(--cds-body-compact-02-font-size, 1rem);font-weight:var(--cds-body-compact-02-font-weight, 400);line-height:var(--cds-body-compact-02-line-height, 1.375);letter-spacing:var(--cds-body-compact-02-letter-spacing, 0);background-color:#ffd7d9;color:#a2191f;padding:1.5rem;margin:1rem 0}.-esm-form-builder__schema-editor__heading___wAlzp{font-size:var(--cds-heading-compact-02-font-size, 1rem);font-weight:var(--cds-heading-compact-02-font-weight, 600);line-height:var(--cds-heading-compact-02-line-height, 1.375);letter-spacing:var(--cds-heading-compact-02-letter-spacing, 0);margin-bottom:1rem}","",{version:3,sources:["webpack://./src/components/schema-editor/schema-editor.scss","webpack://./node_modules/@carbon/type/scss/_styles.scss","webpack://./node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAGA,yDACE,YAAA,CACA,kBAAA,CACA,wBAAA,CACA,aAAA,CAEA,gEACE,gBAAA,CAIJ,0DCo1BI,oDAAA,CAAA,uDAAA,CAAA,yDAAA,CAAA,2DAAA,CDl1BF,wBE6EO,CF5EP,aEiFO,CFhFP,cAAA,CACA,aAAA,CAGF,mDC40BI,uDAAA,CAAA,0DAAA,CAAA,4DAAA,CAAA,8DAAA,CD10BF,kBAAA",sourceRoot:""}]),i.locals={actionButtons:"-esm-form-builder__schema-editor__actionButtons___RskyC",errorContainer:"-esm-form-builder__schema-editor__errorContainer___qqx2V",heading:"-esm-form-builder__schema-editor__heading___wAlzp"};const l=i},84124:(e,t,n)=>{n.r(t),n.d(t,{default:()=>On});var r=n(81672),o=n.n(r),a=n(79655),i=n(89250),l=n(43261),s=n.n(l),c=n(63397),u=n(34501),d=n(44672),m=n(32254),A=n(17141),f=n(81132);function _(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){_(a,r,o,i,l,"next",e)}function l(e){_(a,r,o,i,l,"throw",e)}i(void 0)}))}}function b(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function h(e){return g.apply(this,arguments)}function g(){return(g=p((function(e){return b(this,(function(t){switch(t.label){case 0:return[4,(0,f.openmrsFetch)("/ws/rest/v1/clobdata/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function y(){return(y=p((function(e){return b(this,(function(t){switch(t.label){case 0:return[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,t.sent()]}}))}))).apply(this,arguments)}function C(){return(C=p((function(e,t){return b(this,(function(n){switch(n.label){case 0:return[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e,"/resource/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json"}})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function v(e){return E.apply(this,arguments)}function E(){return(E=p((function(e){var t,n;return b(this,(function(r){switch(r.label){case 0:return t=new Blob([JSON.stringify(e)],{type:void 0}),(n=new FormData).append("file",t),[4,window.fetch("".concat(window.openmrsBase,"/ws/rest/v1/clobdata"),{body:n,method:"POST"}).then((function(e){return e.text()}))];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function w(e,t){return S.apply(this,arguments)}function S(){return(S=p((function(e,t){var n;return b(this,(function(r){switch(r.label){case 0:return n={name:"JSON schema",dataType:"AmpathJsonSchema",valueReference:t},[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e,"/resource"),{method:"POST",headers:{"Content-Type":"application/json"},body:n})];case 1:return[2,r.sent()]}}))}))).apply(this,arguments)}function k(e,t,n,r,o){return x.apply(this,arguments)}function x(){return(x=p((function(e,t,n,r,o){var a,i;return b(this,(function(l){switch(l.label){case 0:return a=new AbortController,i={name:t,version:n,description:r,encounterType:{uuid:o}},[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:i,signal:a.signal})];case 1:return[2,l.sent()]}}))}))).apply(this,arguments)}function D(e,t,n,r,o){return O.apply(this,arguments)}function O(){return(O=p((function(e,t,n,r,o){var a,i,l;return b(this,(function(s){switch(s.label){case 0:return a=new AbortController,i={name:e,version:t,published:null!=n&&n,description:null!=r?r:""},o&&(i.encounterType=o),l={"Content-Type":"application/json"},[4,(0,f.openmrsFetch)("/ws/rest/v1/form",{method:"POST",headers:l,body:i,signal:a.signal})];case 1:return[2,s.sent().data]}}))}))).apply(this,arguments)}function I(e){return B.apply(this,arguments)}function B(){return(B=p((function(e){var t;return b(this,(function(n){switch(n.label){case 0:return t={published:!0},[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function T(e){return q.apply(this,arguments)}function q(){return(q=p((function(e){var t;return b(this,(function(n){switch(n.label){case 0:return t={published:!1},[4,(0,f.openmrsFetch)("/ws/rest/v1/form/".concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:t})];case 1:return[2,n.sent()]}}))}))).apply(this,arguments)}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=n(87410),P=n.n(N),j=n(44766),z=n.n(j),M=n(51991),L=n.n(M),R=n(33702),G=n.n(R),U=n(12434),Z=n.n(U),Q=n(81422),H=n.n(Q),V=n(2511),Y={};Y.styleTagTransform=H(),Y.setAttributes=G(),Y.insert=L().bind(null,"head"),Y.domAPI=z(),Y.insertStyleElement=Z(),P()(V.Z,Y);const J=V.Z&&V.Z.locals?V.Z.locals:void 0;var W=function(e){var t=e.totalItems,n=e.pageSize,a=e.onPageNumberChange,i=e.pageNumber,l=function(e,t,n,o){var a=(0,c.useTranslation)().t,i=(0,r.useMemo)((function(){var n,r=Math.ceil(t/e);return isNaN(r)&&(r=0),(n=Array(r).keys(),function(e){if(Array.isArray(e))return F(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){return(t+1)*e}))}),[e,t]),l=(0,r.useMemo)((function(){return e>t?"".concat(t," / ").concat(t):e*n>t?"".concat(e*(n-1)+o," / ").concat(t):"".concat(e*n," / ").concat(t)}),[e,t,n,o]);return{pageSizes:i,itemsDisplayed:"".concat(l," ").concat(a("items"," items"))}}(n,t,i,e.currentItems),s=l.itemsDisplayed,d=l.pageSizes,m="tablet"===(0,f.useLayoutType)();return o().createElement(o().Fragment,null,t>0&&o().createElement("div",{className:m?J.tablet:J.desktop},o().createElement("div",null,s),o().createElement(u.tlE,{className:J.pagination,page:i,pageSize:n,pageSizes:d,totalItems:t,onChange:a,size:m?"lg":"sm"})))},K=n(49770),X=function(e){var t,n,r,o=null==e||null===(n=e.resources)||void 0===n||null===(t=n.find((function(e){return"JSON schema"===e.name})))||void 0===t?void 0:t.valueReference,a=e&&(null==e||null===(r=e.resources)||void 0===r?void 0:r.length)>0&&o,i="/ws/rest/v1/clobdata/".concat(o),l=(0,K.Z)(a?i:null,f.openmrsFetch),s=l.data,c=l.error,u=l.isLoading,d=l.isValidating,m=l.mutate;return{clobdata:null==s?void 0:s.data,clobdataError:c,isLoadingClobdata:u,isValidatingClobdata:d,mutate:m}},$=n(95591),ee=function(e){var t=e.width,n=void 0===t?"64":t,r=e.height,a=void 0===r?"64":r;return o().createElement("svg",{width:n,height:a,viewBox:"0 0 64 64"},o().createElement("title",null,"Empty data illustration"),o().createElement("g",{fill:"none",fillRule:"evenodd"},o().createElement("path",{d:"M38.133 13.186H21.947c-.768.001-1.39.623-1.39 1.391V50.55l-.186.057-3.97 1.216a.743.743 0 01-.927-.493L3.664 12.751a.742.742 0 01.492-.926l6.118-1.874 17.738-5.43 6.119-1.873a.741.741 0 01.926.492L38.076 13l.057.186z",fill:"#F4F4F4"}),o().createElement("path",{d:"M41.664 13L38.026 1.117A1.576 1.576 0 0036.056.07l-8.601 2.633-17.737 5.43-8.603 2.634a1.578 1.578 0 00-1.046 1.97l12.436 40.616a1.58 1.58 0 001.969 1.046l5.897-1.805.185-.057v-.194l-.185.057-5.952 1.822a1.393 1.393 0 01-1.737-.923L.247 12.682a1.39 1.39 0 01.923-1.738L9.772 8.31 27.51 2.881 36.112.247a1.393 1.393 0 011.737.923L41.47 13l.057.186h.193l-.057-.185z",fill:"#8D8D8D"}),o().createElement("path",{d:"M11.378 11.855a.836.836 0 01-.798-.59L9.385 7.361a.835.835 0 01.554-1.042l16.318-4.996a.836.836 0 011.042.554l1.195 3.902a.836.836 0 01-.554 1.043l-16.318 4.995a.831.831 0 01-.244.037z",fill:"#C6C6C6"}),o().createElement("circle",{fill:"#C6C6C6",cx:17.636,cy:2.314,r:1.855}),o().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:17.636,cy:2.314,r:1.175}),o().createElement("path",{d:"M55.893 53.995H24.544a.79.79 0 01-.788-.789V15.644a.79.79 0 01.788-.788h31.349a.79.79 0 01.788.788v37.562a.79.79 0 01-.788.789z",fill:"#F4F4F4"}),o().createElement("path",{d:"M41.47 13H21.948a1.579 1.579 0 00-1.576 1.577V52.4l.185-.057V14.577c.001-.768.623-1.39 1.391-1.39h19.581L41.471 13zm17.02 0H21.947a1.579 1.579 0 00-1.576 1.577v42.478c0 .87.706 1.576 1.576 1.577H58.49a1.579 1.579 0 001.576-1.577V14.577a1.579 1.579 0 00-1.576-1.576zm1.39 44.055c0 .768-.622 1.39-1.39 1.392H21.947c-.768-.001-1.39-.624-1.39-1.392V14.577c0-.768.622-1.39 1.39-1.39H58.49c.768 0 1.39.622 1.39 1.39v42.478z",fill:"#8D8D8D"}),o().createElement("path",{d:"M48.751 17.082H31.686a.836.836 0 01-.835-.835v-4.081c0-.46.374-.834.835-.835H48.75c.461 0 .834.374.835.835v4.08c0 .462-.374.835-.835.836z",fill:"#C6C6C6"}),o().createElement("circle",{fill:"#C6C6C6",cx:40.218,cy:9.755,r:1.855}),o().createElement("circle",{fill:"#FFF",fillRule:"nonzero",cx:40.218,cy:9.755,r:1.13})))},te=n(4298),ne={};ne.styleTagTransform=H(),ne.setAttributes=G(),ne.insert=L().bind(null,"head"),ne.domAPI=z(),ne.insertStyleElement=Z(),P()(te.Z,ne);const re=te.Z&&te.Z.locals?te.Z.locals:void 0,oe=function(){var e=(0,c.useTranslation)().t,t="tablet"===(0,f.useLayoutType)();return o().createElement(u.mh4,null,o().createElement(u.n9L,{className:re.tile},o().createElement("div",{className:t?re.tabletHeading:re.desktopHeading},o().createElement("h4",null,e("forms","Forms"))),o().createElement(ee,null),o().createElement("p",{className:re.content},e("noFormsToDisplay","There are no forms to display.")),o().createElement("p",{className:re.action},o().createElement(u.rUS,{onClick:function(){return(0,f.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},e("createNewForm","Create a new form")))))};var ae=n(39761),ie={};ie.styleTagTransform=H(),ie.setAttributes=G(),ie.insert=L().bind(null,"head"),ie.domAPI=z(),ie.insertStyleElement=Z(),P()(ae.Z,ie);const le=ae.Z&&ae.Z.locals?ae.Z.locals:void 0,se=function(e){var t=e.error,n=(0,c.useTranslation)().t,r="tablet"===(0,f.useLayoutType)();return o().createElement(u.mh4,null,o().createElement(u.n9L,{className:le.tile},o().createElement("div",{className:r?le.tabletHeading:le.desktopHeading},o().createElement("h4",null,n("forms","Forms"))),o().createElement("p",{className:le.errorMessage},n("error","Error"),": ",null==t?void 0:t.message),o().createElement("p",{className:le.errorCopy},n("errorCopy","Sorry, there was a problem displaying this information. You can try to reload this page, or contact the site administrator and quote the error code above."))))};var ce=n(40270),ue={};ue.styleTagTransform=H(),ue.setAttributes=G(),ue.insert=L().bind(null,"head"),ue.domAPI=z(),ue.insertStyleElement=Z(),P()(ce.Z,ue);const de=ce.Z&&ce.Z.locals?ce.Z.locals:void 0;function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){fe(e,t,n[t])}))}return e}function pe(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e){var t=e.condition,n=(0,c.useTranslation)().t;return t?o().createElement(u.Vp9,{type:"green",size:"md",title:"Clear Filter","data-testid":"yes-tag"},n("yes","Yes")):o().createElement(u.Vp9,{type:"red",size:"md",title:"Clear Filter","data-testid":"no-tag"},n("no","No"))}function ge(e){var t=e.form,n=e.mutate,a=e.responsiveSize,i=e.t,l=X(t).clobdata,s=null==t?void 0:t.resources,c=be((0,r.useState)(!1),2),A=c[0],_=c[1],p=be((0,r.useState)(!1),2),b=p[0],h=p[1],g=(0,r.useMemo)((function(){return new Blob([JSON.stringify(l,null,2)],{type:"application/json"})}),[l]),C=(0,r.useCallback)((function(e){var r,o;(function(e){return y.apply(this,arguments)})(e).then((r=function(e){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(r){switch(r.label){case 0:return 204!==e.status?[3,2]:((0,f.showToast)({title:i("formDeleted","Form deleted"),kind:"success",critical:!0,description:"".concat(t.name," ")+i("formDeletedSuccessfully","deleted successfully")}),[4,n()]);case 1:r.sent(),_(!1),r.label=2;case 2:return[2]}}))},o=function(){var e=this,t=arguments;return new Promise((function(n,o){var a=r.apply(e,t);function i(e){Ae(a,n,o,i,l,"next",e)}function l(e){Ae(a,n,o,i,l,"throw",e)}i(void 0)}))},function(e){return o.apply(this,arguments)})).catch((function(e){return(0,f.showNotification)({title:i("errorDeletingForm","Error deleting form"),kind:"error",critical:!0,description:null==e?void 0:e.message})})).finally((function(){return h(!1)}))}),[t.name,n,i]),v=function(){return o().createElement(u.zxk,{renderIcon:d.rs,onClick:function(){return(0,f.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("import","Import"),hasIconOnly:!0,size:a})},E=function(){return o().createElement(u.zxk,{enterDelayMs:300,renderIcon:d.I8,onClick:function(){return(0,f.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(t.uuid)})},kind:"ghost",iconDescription:i("editSchema","Edit schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"})},w=function(){return o().createElement("a",{download:"".concat(null==t?void 0:t.name,".json"),href:window.URL.createObjectURL(g)},o().createElement(u.zxk,{enterDelayMs:300,renderIcon:d.UW,kind:"ghost",iconDescription:i("downloadSchema","Download schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"}))},S=function(){return o().createElement(u.zxk,{enterDelayMs:300,renderIcon:m.ZN,onClick:function(){return _(!0)},kind:"ghost",iconDescription:i("deleteSchema","Delete schema"),hasIconOnly:!0,size:a,tooltipAlignment:"start"})},k=function(){return o().createElement(u.lpG,{danger:!0,open:A,onClose:function(){return _(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:i("deleteForm","Delete form")}),o().createElement(u.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,null,o().createElement("p",null,i("deleteFormConfirmation","Are you sure you want to delete this form?")))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return _(!1)}},i("cancel","Cancel")),o().createElement(u.zxk,{disabled:b,kind:"danger",onClick:function(){h(!0),C(t.uuid)}},b?o().createElement(u.lSo,{className:de.spinner,description:i("deleting","Deleting")+"..."}):o().createElement("span",null,i("delete","Delete")))))};return o().createElement(o().Fragment,null,0!=s.length&&(null==t?void 0:t.resources[0])?o().createElement(o().Fragment,null,o().createElement(E,null),o().createElement(w,null)):o().createElement(v,null),o().createElement(S,null),A&&o().createElement(k,null))}function ye(e){var t=e.forms,n=e.isValidating,a=e.mutate,i=e.t,l=(0,f.useConfig)(),c="tablet"===(0,f.useLayoutType)(),d=c?"lg":"sm",m=be((0,r.useState)(""),2),_=m[0],p=m[1],b=be((0,r.useState)(""),2),h=b[0],g=b[1],y=(0,f.useDebounce)(h),C=(0,r.useMemo)((function(){return y?y?s().filter(y,t,{extract:function(e){return"".concat(e.name," ").concat(e.version)}}).sort((function(e,t){return e.score-t.score})).map((function(e){return e.original})):t:"Retired"===_?t.filter((function(e){return e.retired})):"Published"===_?t.filter((function(e){return e.published})):"Unpublished"===_?t.filter((function(e){return!e.published})):t}),[_,t,y]),v=[{header:i("name","Name"),key:"name"},{header:i("version","Version"),key:"version"},{header:i("published","Published"),key:"published"},{header:i("retired","Retired"),key:"retired"},{header:i("schemaActions","Schema actions"),key:"actions"}],E=(0,f.usePagination)(C,10),w=E.paginated,S=E.goTo,k=E.results,x=E.currentPage,D=null==k?void 0:k.map((function(e){return pe(_e({},e),{id:null==e?void 0:e.uuid,published:o().createElement(he,{condition:e.published}),retired:o().createElement(he,{condition:e.retired}),actions:o().createElement(ge,{form:e,mutate:a,responsiveSize:d,t:i})})}));return o().createElement(o().Fragment,null,l.showSchemaSaveWarning&&o().createElement(u.K0D,{className:de.warningMessage,kind:"info",lowContrast:!0,title:i("schemaSaveWarningMessage","The dev3 server is ephemeral at best and can't be relied upon to save your schemas permanently. To avoid losing your work, please save your schemas to your local machine. Alternatively, upload your schema to the distro repo to have it persisted across server resets.")}),o().createElement("div",{className:de.flexContainer},o().createElement("div",{className:de.filterContainer},o().createElement(u.Ltx,{id:"publishStatusFilter",initialSelectedItem:"All",label:"",titleText:i("filterBy","Filter by")+":",size:d,type:"inline",items:["All","Published","Unpublished","Retired"],onChange:function(e){var t=e.selectedItem;return p(t)}})),o().createElement("div",{className:de.backgroundDataFetchingIndicator},o().createElement("span",null,n?o().createElement(u.lSo,null):null))),o().createElement(u.wQF,{rows:D,headers:v,size:c?"lg":"sm",useZebraStyles:!0},(function(e){var t=e.rows,n=e.headers,r=e.getTableProps,a=e.getHeaderProps,l=e.getRowProps;return o().createElement(o().Fragment,null,o().createElement(u.xJi,{className:de.tableContainer,"data-testid":"forms-table"},o().createElement("div",{className:de.toolbarWrapper},o().createElement(u.fjU,{className:de.tableToolbar,size:d},o().createElement(u.Vj0,{className:de.headerContainer},o().createElement(u.Ys1,{className:de.searchbox,onChange:function(e){return g(e.target.value)},placeholder:i("searchThisList","Search this list")}),o().createElement(u.zxk,{kind:"primary",iconDescription:i("createNewForm","Create a new form"),renderIcon:function(){return o().createElement(A.mm,{size:16})},size:d,onClick:function(){return(0,f.navigate)({to:"".concat(window.spaBase,"/form-builder/new")})}},i("createNewForm","Create a new form"))))),o().createElement(u.iA_,pe(_e({},r()),{className:de.table}),o().createElement(u.ssF,null,o().createElement(u.SCH,null,n.map((function(e){return o().createElement(u.xDH,a({header:e}),e.header)})))),o().createElement(u.RMI,null,t.map((function(e){return o().createElement(u.SCH,pe(_e({key:"row.id"},l({row:e})),{"data-testid":"form-row-".concat(e.id)}),e.cells.map((function(e){return o().createElement(u.pj1,{key:e.id},e.value)})))}))))),0===t.length?o().createElement("div",{className:de.tileContainer},o().createElement(u.n9L,{className:de.tile},o().createElement("div",{className:de.tileContent},o().createElement("p",{className:de.content},i("noMatchingFormsToDisplay","No matching forms to display")),o().createElement("p",{className:de.helper},i("checkFilters","Check the filters above"))))):null)})),w&&o().createElement(W,{currentItems:k.length,totalItems:C.length,onPageNumberChange:function(e){var t=e.page;S(t)},pageNumber:x,pageSize:10}))}const Ce=function(){var e=(0,c.useTranslation)().t,t=function(){var e,t,n=(0,$.ZP)("/ws/rest/v1/form?v=custom:(uuid,name,encounterType:(uuid,name),version,published,retired,resources:(uuid,name,dataType,valueReference))",f.openmrsFetch),r=n.data,o=n.error,a=n.isValidating,i=n.mutate;return{forms:null!==(t=null==r||null===(e=r.data)||void 0===e?void 0:e.results)&&void 0!==t?t:[],error:o,isLoading:!r&&!o||!1,isValidating:a,mutate:i}}(),n=t.error,r=t.forms,a=t.isLoading,i=t.isValidating,l=t.mutate;return o().createElement("div",{className:de.container},o().createElement("h3",{className:de.heading},e("formBuilder","Form Builder")),n?o().createElement(se,{error:n}):a?o().createElement(u.gqd,{role:"progressbar"}):0===r.length?o().createElement(oe,null):o().createElement(ye,{forms:r,isValidating:i,mutate:l,t:e}))};var ve=function(e){var t="/ws/rest/v1/form/".concat(e,"?v=full"),n=(0,K.Z)(e?t:null,f.openmrsFetch),r=n.data,o=n.error,a=n.isLoading,i=n.isValidating,l=n.mutate;return{form:null==r?void 0:r.data,formError:o,isLoadingForm:a,isValidatingForm:i,mutate:l}},Ee=n(62852),we={};we.styleTagTransform=H(),we.setAttributes=G(),we.insert=L().bind(null,"head"),we.domAPI=z(),we.insertStyleElement=Z(),P()(Ee.Z,we);const Se=Ee.Z&&Ee.Z.locals?Ee.Z.locals:void 0;function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xe(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function De(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xe(a,r,o,i,l,"next",e)}function l(e){xe(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ie(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Oe(e,t,n[t])}))}return e}function Te(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}const Ne=function(e){var t,n,a,l,s,d,m=e.form,A=e.schema,_=(0,c.useTranslation)().t,p=(a=(0,K.Z)("/ws/rest/v1/encountertype?v=custom:(uuid,name)",f.openmrsFetch),l=a.data,s=a.error,d=a.isLoading,{encounterTypes:null!==(n=null==l||null===(t=l.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],encounterTypesError:s,isEncounterTypesLoading:d}).encounterTypes,b=(0,i.UO)().formUuid,g=ve(b).mutate,y=!b,E=qe((0,r.useState)(""),2),S=E[0],x=E[1],O=qe((0,r.useState)(""),2),I=O[0],B=O[1],T=qe((0,r.useState)(!1),2),q=T[0],F=T[1],N=qe((0,r.useState)(!1),2),P=N[0],j=N[1],z=qe((0,r.useState)(""),2),M=z[0],L=z[1],R=qe((0,r.useState)(!1),2),G=R[0],U=R[1],Z=qe((0,r.useState)(!1),2),Q=Z[0],H=Z[1],V=qe((0,r.useState)(""),2),Y=V[0],J=V[1],W=qe((0,r.useState)(""),2),X=W[0],$=W[1],ee=(0,r.useCallback)((function(){return localStorage.removeItem("formSchema")}),[]);(0,r.useEffect)((function(){A&&(L(A.name),x(A.description),B(A.encounterType),$(A.version))}),[A]);var te,ne=(0,r.useCallback)((function(e){"newVersion"===e?(J("newVersion"),U(!1),H(!0)):"new"===e?(J("newVersion"),H(!0)):"update"===e&&(J("update"),U(!1),H(!0))}),[]),re=(te=De((function(e){var t,n,r,o,a,i,l,s,c,u,d,p,b,y,E;return Fe(this,(function(x){switch(x.label){case 0:if(e.preventDefault(),j(!0),t=e.target,"new"!==Y&&"newVersion"!==Y)return[3,8];n=t.name.value,r=t.version.value,o=t.encounterType.value,a=t.description.value,x.label=1;case 1:return x.trys.push([1,6,,7]),[4,D(n,r,!1,a,o)];case 2:return i=x.sent(),[4,v(Te(Be({},A),{name:n,version:r,description:a,encounterType:o,uuid:i.uuid}))];case 3:return l=x.sent(),[4,w(i.uuid,l.toString())];case 4:return x.sent(),(0,f.showToast)({title:_("formCreated","New form created"),kind:"success",critical:!0,description:n+" "+_("saveSuccessMessage","was created successfully. It is now visible on the Forms dashboard.")}),ee(),H(!1),[4,g()];case 5:return x.sent(),(0,f.navigate)({to:"".concat(window.spaBase,"/form-builder/edit/").concat(i.uuid)}),j(!1),[3,7];case 6:return Ie(s=x.sent(),Error)&&(0,f.showNotification)({title:_("errorCreatingForm","Error creating form"),kind:"error",critical:!0,description:null==s?void 0:s.message}),j(!1),[3,7];case 7:return[3,13];case 8:return x.trys.push([8,12,,13]),u=Te(Be({},A),{name:M,version:X,description:S,encounterType:I}),[4,k(m.uuid,M,X,S,I)];case 9:return x.sent(),0===(null==m||null===(c=m.resources)||void 0===c?void 0:c.length)?[3,11]:(y=null!==(b=null==m||null===(p=m.resources)||void 0===p||null===(d=p.find((function(e){return"JSON schema"===e.name})))||void 0===d?void 0:d.valueReference)&&void 0!==b?b:"",[4,h(y).catch((function(e){return console.error("Unable to delete clobdata: ",e)})).then((function(){var e,t,n,r=null!==(n=null==m||null===(t=m.resources)||void 0===t||null===(e=t.find((function(e){return"JSON schema"===e.name})))||void 0===e?void 0:e.uuid)&&void 0!==n?n:"";(function(e,t){return C.apply(this,arguments)})(null==m?void 0:m.uuid,r).then((function(){v(u).then((function(e){w(null==m?void 0:m.uuid,e.toString()).then(De((function(){return Fe(this,(function(e){switch(e.label){case 0:return(0,f.showToast)({title:_("success","Success!"),kind:"success",critical:!0,description:(null==m?void 0:m.name)+" "+_("saveSuccess","was updated successfully")}),H(!1),[4,g()];case 1:return e.sent(),j(!1),[2]}}))}))).catch((function(e){console.error("Error associating form with new schema: ",e),(0,f.showNotification)({title:_("errorSavingForm","Unable to save form"),kind:"error",critical:!0,description:_("saveError","There was a problem saving your form. Try saving again. To ensure you dont lose your changes, copy them, reload the page and then paste them back into the editor.")})}))})).catch((function(e){return console.error("Error uploading new schema: ",e)}))})).catch((function(e){return console.error("Unable to create new clobdata resource: ",e)}))}))]);case 10:x.sent(),x.label=11;case 11:return[3,13];case 12:return Ie(E=x.sent(),Error)&&(0,f.showNotification)({title:_("errorUpdatingForm","Error updating form"),kind:"error",critical:!0,description:null==E?void 0:E.message}),j(!1),[3,13];case 13:return[2]}}))})),function(e){return te.apply(this,arguments)});return o().createElement(o().Fragment,null,y?null:o().createElement(u.lpG,{open:G,onClose:function(){return U(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:_("saveConfirmation","Save or Update form")}),o().createElement(u.fef,null,o().createElement("p",null,_("saveAsModal","A version of the form you're working on already exists on the server. Do you want to update the form or to save it as a new version?"))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"tertiary",onClick:function(){return ne("update")}},_("updateExistingForm","Update existing version")),o().createElement(u.zxk,{kind:"primary",onClick:function(){return ne("newVersion")}},_("saveAsNewForm","Save as a new")),o().createElement(u.zxk,{kind:"secondary",onClick:function(){return U(!1)}},_("close","Close")))),o().createElement(u.lpG,{open:Q,onClose:function(){return H(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:_("saveFormToServer","Save form to server")}),o().createElement(u.l09,{onSubmit:re,className:Se.saveFormBody},o().createElement(u.fef,null,o().createElement("p",null,_("saveExplainerText","Clicking the Save button saves your form schema to the database. To see your form in your frontend, you first need to publish it. Click the Publish button to publish your form.")),o().createElement(u.cwH,{legendText:""},o().createElement(u.Kqy,{gap:5},o().createElement(u.oil,{id:"name",labelText:_("formName","Form Name"),onChange:function(e){return L(e.target.value)},placeholder:_("formNamePlaceholder","e.g. OHRI Express Care Patient Encounter Form"),required:!0,value:M}),"update"===Y?o().createElement(u.oil,{id:"uuid",labelText:_("autogeneratedUuid","UUID (auto-generated"),disabled:!0,value:null==m?void 0:m.uuid}):null,o().createElement(u.oil,{id:"version",labelText:_("version","Version"),placeholder:"e.g. 1.0",onChange:function(e){!function(e){if(!e)return F(!1);F(!/^[0-9]/.test(e))}(e.target.value),q||$(e.target.value)},invalid:q,invalidText:_("invalidVersionWarning","Version can only start with with a number"),required:!0,value:X}),o().createElement(u.PhF,{id:"encounterType",labelText:_("encounterType","Encounter Type"),onChange:function(e){return B(e.target.value)},required:!0,value:I},I?null:o().createElement(u.QlF,{text:_("chooseEncounterType","Choose an encounter type to link your form to"),value:""}),(null==p?void 0:p.length)>0&&p.map((function(e){return o().createElement(u.QlF,{key:e.uuid,value:e.uuid,text:e.name},e.name)}))),o().createElement(u.Kx8,{labelText:_("description","Description"),onChange:function(e){return x(e.target.value)},cols:6,rows:3,id:"description",placeholder:_("descriptionPlaceholderText","e.g. A form used to collect encounter data for clients in the Express Care program."),required:!0,value:S})))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return H(!1)}},_("close","Close")),o().createElement(u.zxk,{disabled:P||q,className:Se.spinner,type:"submit",kind:"primary"},P?o().createElement(u.lSo,{description:_("saving","Saving")+"..."}):o().createElement("span",null,_("save","Save")))))),o().createElement(u.zxk,{disabled:!A,kind:"primary",onClick:function(){return y?ne("new"):U(!0)}},_("saveForm","Save form")))};var Pe=n(89454),je={};je.styleTagTransform=H(),je.setAttributes=G(),je.insert=L().bind(null,"head"),je.domAPI=z(),je.insertStyleElement=Z(),P()(Pe.Z,je);const ze=Pe.Z&&Pe.Z.locals?Pe.Z.locals:void 0;function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Le(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Le(a,r,o,i,l,"next",e)}function l(e){Le(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Ge(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}const Qe=function(e){var t=e.schema,n=e.t,a=(0,i.UO)().formUuid,l=ve(a),s=l.form,c=l.mutate,d=Ue((0,r.useState)("idle"),2),m=d[0],A=d[1],_=Ue((0,r.useState)(!1),2),p=_[0],b=_[1];function h(){return(h=Re((function(){var e;return Ze(this,(function(t){switch(t.label){case 0:A("publishing"),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,I(s.uuid)];case 2:return t.sent(),(0,f.showToast)({title:n("formPublished","Form published"),kind:"success",critical:!0,description:"".concat(s.name," ")+n("formPublishedSuccessfully","form was published successfully")}),A("published"),[4,c()];case 3:return t.sent(),[3,5];case 4:return Ge(e=t.sent(),Error)&&((0,f.showNotification)({title:n("errorPublishingForm","Error publishing form"),kind:"error",critical:!0,description:null==e?void 0:e.message}),A("error")),[3,5];case 5:return[2]}}))}))).apply(this,arguments)}function g(){return(g=Re((function(){var e;return Ze(this,(function(t){switch(t.label){case 0:A("unpublishing"),t.label=1;case 1:return t.trys.push([1,4,,5]),[4,T(s.uuid)];case 2:return t.sent(),(0,f.showToast)({title:n("formUnpublished","Form unpublished"),kind:"success",critical:!0,description:"".concat(s.name," ")+n("formUnpublishedSuccessfully","form was unpublished successfully")}),A("unpublished"),[4,c()];case 3:return t.sent(),[3,5];case 4:return Ge(e=t.sent(),Error)&&((0,f.showNotification)({title:n("errorUnpublishingForm","Error unpublishing form"),kind:"error",critical:!0,description:null==e?void 0:e.message}),A("error")),[3,5];case 5:return b(!1),[2]}}))}))).apply(this,arguments)}return o().createElement("div",{className:ze.actionButtons},o().createElement(Ne,{form:s,schema:t}),o().createElement(o().Fragment,null,s&&!s.published?o().createElement(u.zxk,{kind:"secondary",onClick:function(){return h.apply(this,arguments)},disabled:"publishing"===m},"publishing"!==m||(null==s?void 0:s.published)?o().createElement("span",null,n("publishForm","Publish form")):o().createElement(u.lSo,{className:ze.spinner,description:n("publishing","Publishing")+"..."})):null,s&&s.published?o().createElement(u.zxk,{kind:"danger",onClick:function(){b(!0)},disabled:"unpublishing"===m},n("unpublishForm","Unpublish form")):null,!!p&&o().createElement(u.lpG,{open:!0,onClose:function(){return b(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:n("unpublishConfirmation","Are you sure you want to unpublish this form?")}),o().createElement(u.fef,null,o().createElement("p",null,n("unpublishExplainerText","Unpublishing a form means you can no longer access it from your frontend. Unpublishing forms does not delete their associated schemas, it only affects whether or not you can access them in your frontend."))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return b(!1)}},n("cancel","Cancel")),o().createElement(u.zxk,{disabled:"unpublishing"===m,kind:"unpublishing"===m?"secondary":"danger",onClick:function(){return g.apply(this,arguments)}},"unpublishing"===m?o().createElement(u.lSo,{className:ze.spinner,description:n("unpublishing","Unpublishing")+"..."}):o().createElement("span",null,n("confirm","Confirm")))))))},He=function(e){var t,n,r,a,i,l,s,d=e.form,m=(0,c.useTranslation)().t;return o().createElement(u.x4x,{isCondensed:!0,selection:!1},o().createElement(u.FxI,null,o().createElement(u.s1N,null,o().createElement(u.agF,null,o().createElement("b",null,m("formName","Form Name"))),o().createElement(u.agF,null,d.name)),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("description","Description")),o().createElement(u.agF,null,d.description)),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("formUuid","Form UUID")),o().createElement(u.agF,null,d.uuid)),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("version","Version")),o().createElement(u.agF,null,d.version)),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("encounterType","Encounter Type")),o().createElement(u.agF,null,d.encounterType.uuid)),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("createdBy","Created By")),o().createElement(u.agF,null,"".concat(null!==(s=null==d||null===(n=d.auditInfo)||void 0===n||null===(t=n.creator)||void 0===t?void 0:t.display)&&void 0!==s?s:m("unknownUser","Unknown")," on ").concat((0,f.formatDatetime)((0,f.parseDate)(null==d||null===(r=d.auditInfo)||void 0===r?void 0:r.dateCreated))))),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("lastEditedBy","Last Edited By")),o().createElement(u.agF,null,(null==d||null===(a=d.auditInfo)||void 0===a?void 0:a.dateChanged)?"".concat(null==d||null===(i=d.auditInfo)||void 0===i?void 0:i.changedBy.display," on ").concat((0,f.formatDatetime)((0,f.parseDate)(null==d||null===(l=d.auditInfo)||void 0===l?void 0:l.dateChanged))):m("uneditedFormMsg","This form has never been edited"))),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("published","Published")),o().createElement(u.agF,null,d.published?m("yes","Yes"):m("no","No"))),o().createElement(u.s1N,null,o().createElement(u.agF,null,m("retired","Retired")),o().createElement(u.agF,null,d.retired?m("yes","Yes"):m("no","No")))))};var Ve=n(4511),Ye=n(33500),Je=n(51659),We={};We.styleTagTransform=H(),We.setAttributes=G(),We.insert=L().bind(null,"head"),We.domAPI=z(),We.insertStyleElement=Z(),P()(Je.Z,We);const Ke=Je.Z&&Je.Z.locals?Je.Z.locals:void 0;function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e){var t=e.error,n=e.resetErrorBoundary,r=(0,c.useTranslation)().t;return o().createElement(u.n9L,{className:Ke.errorStateTile},o().createElement("h4",{className:Ke.heading},r("problemLoadingPreview","There was a problem loading the form preview")),o().createElement("p",{className:Ke.helperText},o().createElement("pre",null,t.message)),o().createElement(u.zxk,{kind:"primary",onClick:n},r("tryAgain","Try again")))}const et=function(e){var t,n,a=e.isLoading,i=e.schema,l=(0,c.useTranslation)().t,s=(t=(0,r.useState)({encounterType:"",name:"Test Form",pages:[{label:"Test Page",sections:[{label:"Test Section",isExpanded:"true",questions:[{label:"Test Question",type:"obs",questionOptions:{rendering:"text",concept:"xxxx"},id:"testQuestion"}]}]}],processor:"EncounterFormProcessor",referencedForms:[],uuid:"xxx"}),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],m=s[1];return(0,r.useEffect)((function(){i&&m(i)}),[i]),a?o().createElement("div",{className:Ke.loadingContainer},o().createElement(u.lSo,{className:Ke.loader,description:l("loading","Loading")+"..."})):o().createElement("div",{className:Ke.container},!i&&o().createElement(u.n9L,{className:Ke.emptyStateTile},o().createElement("h4",{className:Ke.heading},l("noSchemaLoaded","No schema loaded")),o().createElement("p",{className:Ke.helperText},l("formRendererHelperText","Load a form schema in the Schema Editor to the left to see it rendered here by the Form Engine."))),i===d&&o().createElement(Ve.SV,{FallbackComponent:$e},o().createElement(Ye.w9,{formJson:d,mode:"enter",patientUUID:""})))};var tt=n(60887),nt=n(43925);function rt(e){var t,n,r="/ws/rest/v1/concept?q=".concat(e,"&v=full"),o=(0,$.ZP)(e?r:null,f.openmrsFetch),a=o.data,i=o.error;return{concepts:null!==(n=null==a||null===(t=a.data)||void 0===t?void 0:t.results)&&void 0!==n?n:[],conceptLookupError:i,isLoadingConcepts:!a&&!i||!1}}var ot=n(76115),at={};at.styleTagTransform=H(),at.setAttributes=G(),at.insert=L().bind(null,"head"),at.domAPI=z(),at.insertStyleElement=Z(),P()(ot.Z,at);const it=ot.Z&&ot.Z.locals?ot.Z.locals:void 0;function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function st(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const ut=function(e){var t=e.schema,n=e.onSchemaChange,a=e.pageIndex,i=e.sectionIndex,l=e.questionIndex,s=e.resetIndices,d=e.showModal,m=e.onModalChange,_=(0,c.useTranslation)().t,p=(0,f.useConfig)(),b=p.fieldTypes,h=p.questionTypes,g=ct((0,r.useState)([]),2),y=g[0],C=g[1],v=ct((0,r.useState)([]),2),E=v[0],w=v[1],S=ct((0,r.useState)(""),2),k=S[0],x=S[1],D=ct((0,r.useState)(null),2),O=D[0],I=D[1],B=ct((0,r.useState)(!1),2),T=B[0],q=B[1],F=ct((0,r.useState)(""),2),N=F[0],P=F[1],j=ct((0,r.useState)(""),2),z=j[0],M=j[1],L=ct((0,r.useState)(""),2),R=L[0],G=L[1],U=ct((0,r.useState)(""),2),Z=U[0],Q=U[1],H=ct((0,r.useState)(null),2),V=H[0],Y=H[1],J=ct((0,r.useState)(""),2),W=J[0],K=J[1],X=ct((0,r.useState)(null),2),$=X[0],ee=X[1],te=ct((0,r.useState)([]),2),ne=te[0],re=te[1],oe=rt(k),ae=oe.concepts,ie=oe.isLoadingConcepts,le=function(e){var n,r=null==t||null===(n=t.pages)||void 0===n?void 0:n.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,nt.Z)(r).includes(e)};return o().createElement(u.lpG,{open:d,onClose:function(){return m(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:_("createNewQuestion","Create a new question")}),o().createElement(u.l09,{className:it.form,onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,{hasScrollingContent:!0},o().createElement(u.cwH,{legendText:""},o().createElement(u.Kqy,{gap:5},o().createElement(u.oil,{id:"questionLabel",labelText:_("questionLabel","Label"),placeholder:_("labelPlaceholder","e.g. Type of Anaesthesia"),value:Z,onChange:function(e){return Q(e.target.value)},required:!0}),o().createElement(u.oil,{id:"questionId",invalid:le(R),invalidText:_("questionIdExists","This question ID already exists in your schema"),labelText:_("questionId","Question ID (prefer using camel-case for IDs)"),value:R,onChange:function(e){G(e.target.value)},placeholder:_("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),o().createElement(u.SYO,{defaultSelected:"optional",name:"isQuestionRequired",legendText:_("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},o().createElement(u.EUY,{id:"questionIsNotRequired",defaultChecked:!0,labelText:_("optional","Optional"),onClick:function(){return q(!1)},value:"optional"}),o().createElement(u.EUY,{id:"questionIsRequired",defaultChecked:!1,labelText:_("required","Required"),onClick:function(){return q(!0)},value:"required"})),o().createElement(u.PhF,{value:V,onChange:function(e){return Y(e.target.value)},id:"questionType",invalidText:_("typeRequired","Type is required"),labelText:_("questionType","Question type"),required:!0},!V&&o().createElement(u.QlF,{text:_("chooseQuestionType","Choose a question type"),value:""}),h.map((function(e,t){return o().createElement(u.QlF,{text:e,value:e,key:t})}))),o().createElement(u.PhF,{value:O,onChange:function(e){return I(e.target.value)},id:"renderingType",invalidText:_("validFieldTypeRequired","A valid field type value is required"),labelText:_("fieldType","Field type"),required:!0},!O&&o().createElement(u.QlF,{text:_("chooseFieldType","Choose a field type"),value:""}),b.map((function(e,t){return o().createElement(u.QlF,{text:e,value:e,key:t})}))),"number"===O?o().createElement(o().Fragment,null,o().createElement(u.oil,{id:"min",labelText:"Min",value:z||"",onChange:function(e){return M(e.target.value)},required:!0}),o().createElement(u.oil,{id:"max",labelText:"Max",value:N||"",onChange:function(e){return P(e.target.value)},required:!0})):"textarea"===O?o().createElement(u.oil,{id:"textAreaRows",labelText:_("rows","Rows"),value:W||"",onChange:function(e){return K(e.target.value)},required:!0}):null,"ui-select-extended"!==O&&o().createElement("div",null,o().createElement(u.lXp,{className:it.label},_("searchForBackingConcept","Search for a backing concept")),o().createElement(u.olm,{size:"md",id:"conceptLookup",onClear:function(){return ee(null)},onChange:function(e){return x(e.target.value)},placeholder:_("searchConcept","Search using a concept name or UUID"),value:k||($?$.display:""),required:!0}),k?ie?o().createElement(u.lSo,{className:it.loader,description:_("searching","Searching")+"..."}):(null==ae?void 0:ae.length)&&!ie?o().createElement("ul",{className:it.conceptList},null==ae?void 0:ae.map((function(e,t){return o().createElement("li",{role:"menuitem",className:it.concept,key:t,onClick:function(){return function(e){var t,n;x(""),ee(e),C(null==e||null===(t=e.answers)||void 0===t?void 0:t.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}}))),w(null==e||null===(n=e.mappings)||void 0===n?void 0:n.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}})))}(e)}},e.display)}))):o().createElement(u.mh4,null,o().createElement(u.n9L,{className:it.emptyResults},o().createElement("span",null,_("noMatchingConcepts","No concepts were found that match")," ",o().createElement("strong",null,'"',k,'".'))),o().createElement("div",{className:it.oclLauncherBanner},o().createElement("p",{className:it.bodyShort01},_("conceptSearchHelpText","Can't find a concept?")),o().createElement("a",{className:it.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},_("searchInOCL","Search in OCL"),o().createElement(A.Gu,{size:16})))):null),(null==E?void 0:E.length)?o().createElement(u.cwH,null,o().createElement(u.lXp,{className:it.label},_("mappings","Mappings")),o().createElement("table",{className:it.tableStriped},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",null,_("relationship","Relationship")),o().createElement("th",null,_("source","Source")),o().createElement("th",null,_("code","Code")))),o().createElement("tbody",null,E.map((function(e,t){return o().createElement("tr",{key:"mapping-".concat(t)},o().createElement("td",null,e.relationship),o().createElement("td",null,e.type),o().createElement("td",null,e.value))}))))):null,(null==y?void 0:y.length)?o().createElement(u.NUq,{className:it.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:y.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return re(t.sort())},size:"md",titleText:_("selectAnswersToDisplay","Select answers to display")}):null,ne.length?o().createElement("div",null,ne.map((function(e){return o().createElement(u.Vp9,{className:it.tag,key:e.id,type:"blue"},e.text)}))):null)))),o().createElement(u.mzw,null,o().createElement(u.zxk,{onClick:function(){return m(!1)},kind:"secondary"},_("cancel","Cancel")),o().createElement(u.zxk,{disabled:!Z||!R||le(R)||!O||"ui-select-extended"!==O&&!$,onClick:function(){(function(){try{var e,r,o,c,u="question".concat(l+1,"Section").concat(i+1,"Page-").concat(a+1);null===(c=t.pages[a])||void 0===c||null===(o=c.sections)||void 0===o||null===(r=o[i])||void 0===r||null===(e=r.questions)||void 0===e||e.push({label:Z,type:V,required:T,id:null!=R?R:u,questionOptions:{rendering:O,concept:null==$?void 0:$.uuid,conceptMappings:E,answers:null==ne?void 0:ne.map((function(e){return{concept:e.id,label:e.text}}))},validators:[]}),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){st(e,t,n[t])}))}return e}({},t)),s(),Q(""),G(""),q(!1),Y(null),I(null),ee(null),w([]),C([]),re([]),(0,f.showToast)({title:_("success","Success!"),kind:"success",critical:!0,description:_("questionCreated","New question created")})}catch(e){d=e,(null!=(m=Error)&&"undefined"!=typeof Symbol&&m[Symbol.hasInstance]?m[Symbol.hasInstance](d):d instanceof m)&&(0,f.showNotification)({title:_("errorCreatingQuestion","Error creating question"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var d,m})(),m(!1)}},o().createElement("span",null,_("save","Save")))))};function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const mt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.sectionIndex,l=e.schema,s=e.showModal,d=(0,c.useTranslation)().t;return o().createElement(u.lpG,{open:s,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:d("deleteSectionConfirmation","Are you sure you want to delete this section?")}),o().createElement(u.fef,null,o().createElement("p",null,d("deleteSectionExplainerText","Deleting this section will delete all the questions associated with it. This action cannot be undone."))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return t(!1)}},d("cancel","Cancel")),o().createElement(u.zxk,{kind:"danger",onClick:function(){(function(e,t){try{l.pages[e].sections.splice(t,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){dt(e,t,n[t])}))}return e}({},l)),r(),(0,f.showToast)({title:d("success","Success!"),kind:"success",critical:!0,description:d("SectionDeleted","Section deleted")})}catch(e){o=e,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&(0,f.showNotification)({title:d("errorDeletingSection","Error deleting section"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var o,a})(a,i),t(!1)}},o().createElement("span",null,d("deleteSection","Delete section")))))};function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ft=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.schema,l=e.showModal,s=(0,c.useTranslation)().t;return o().createElement(u.lpG,{open:l,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:s("deletePageConfirmation","Are you sure you want to delete this page?")}),o().createElement(u.fef,null,o().createElement("p",null,s("deletePageExplainerText","Deleting this page will delete all the sections and questions associated with it. This action cannot be undone."))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return t(!1)}},s("cancel","Cancel")),o().createElement(u.zxk,{kind:"danger",onClick:function(){(function(e){try{i.pages.splice(e,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){At(e,t,n[t])}))}return e}({},i)),r(),(0,f.showToast)({title:s("success","Success!"),kind:"success",critical:!0,description:s("pageDeleted","Page deleted")})}catch(e){t=e,(null!=(o=Error)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](t):t instanceof o)&&(0,f.showNotification)({title:s("errorDeletingPage","Error deleting page"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var t,o})(a),t(!1)}},o().createElement("span",null,s("deletePage","Delete page")))))};function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const pt=function(e){var t=e.onModalChange,n=e.onSchemaChange,r=e.resetIndices,a=e.pageIndex,i=e.sectionIndex,l=e.questionIndex,s=e.schema,d=e.showModal,m=(0,c.useTranslation)().t;return o().createElement(u.lpG,{open:d,onClose:function(){return t(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:m("deleteQuestionConfirmation","Are you sure you want to delete this question?")}),o().createElement(u.fef,null,o().createElement("p",null,m("deleteQuestionExplainerText","This action cannot be undone."))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return t(!1)}},m("cancel","Cancel")),o().createElement(u.zxk,{kind:"danger",onClick:function(){(function(e,t,o){try{s.pages[e].sections[t].questions.splice(o,1),n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_t(e,t,n[t])}))}return e}({},s)),r(),(0,f.showToast)({title:m("success","Success!"),kind:"success",critical:!0,description:m("QuestionDeleted","Question deleted")})}catch(e){a=e,(null!=(i=Error)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](a):a instanceof i)&&(0,f.showNotification)({title:m("errorDeletingQuestion","Error deleting question"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var a,i})(a,i,l),t(!1)}},o().createElement("span",null,m("deleteQuestion","Delete question")))))};var bt=n(8891);function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Ct=function(e){var t,n,a,i,l,s,d,m,_,p,b,h,g,y,C,v,E,w,S,k,x,D,O,I=e.questionToEdit,B=e.schema,T=e.onSchemaChange,q=e.pageIndex,F=e.sectionIndex,N=e.questionIndex,P=e.resetIndices,j=e.showModal,z=e.onModalChange,M=e.onQuestionEdit,L=(0,c.useTranslation)().t,R=(0,f.useConfig)(),G=R.fieldTypes,U=R.questionTypes,Z=yt((0,r.useState)(!1),2),Q=Z[0],H=Z[1],V=yt((0,r.useState)([]),2),Y=V[0],J=V[1],W=yt((0,r.useState)(I.questionOptions.conceptMappings),2),K=W[0],X=W[1],ee=yt((0,r.useState)(""),2),te=ee[0],ne=ee[1],re=yt((0,r.useState)(null),2),oe=re[0],ae=re[1],ie=yt((0,r.useState)(!1),2),le=ie[0],se=ie[1],ce=yt((0,r.useState)(""),2),ue=ce[0],de=ce[1],me=yt((0,r.useState)(""),2),Ae=me[0],fe=me[1],_e=yt((0,r.useState)(""),2),pe=_e[0],be=_e[1],he=yt((0,r.useState)(""),2),ge=he[0],ye=he[1],Ce=yt((0,r.useState)(null),2),ve=Ce[0],Ee=Ce[1],we=yt((0,r.useState)(""),2),Se=we[0],ke=we[1],xe=yt((0,r.useState)([]),2),De=xe[0],Oe=xe[1],Ie=yt((0,r.useState)(null),2),Be=Ie[0],Te=Ie[1],qe=rt(te),Fe=qe.concepts,Ne=qe.isLoadingConcepts,Pe=(h=I.questionOptions.concept,v="/ws/rest/v1/concept/".concat(h,"?v=").concat("custom:(name:(display))"),w=(E=(0,$.ZP)(h?v:null,f.openmrsFetch)).data,S=E.error,{conceptName:null!==(C=null==w||null===(y=w.data)||void 0===y||null===(g=y.name)||void 0===g?void 0:g.display)&&void 0!==C?C:null,conceptNameLookupError:S,isLoadingConceptName:!w&&!S||!1}),je=Pe.conceptName,ze=Pe.conceptNameLookupError,Me=Pe.isLoadingConceptName,Le=Be&&(null==I||null===(t=I.questionOptions)||void 0===t?void 0:t.concept)!==(null==Be?void 0:Be.uuid),Re=(0,r.useMemo)((function(){return(0,bt.Z)((function(e){return ne(e)}),500)}),[]);return o().createElement(u.lpG,{open:j,onClose:function(){return z(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:L("editQuestion","Edit question")}),o().createElement(u.l09,{className:it.form,onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,{hasScrollingContent:!0},o().createElement(u.Kqy,{gap:5},o().createElement(u.oil,{defaultValue:I.label,id:I.id,labelText:L("questionLabel","Label"),onChange:function(e){return ye(e.target.value)},required:!0}),o().createElement(u.oil,{defaultValue:I.id,id:"questionId",invalid:function(e){var t;if((null==I?void 0:I.id)===e)return!1;var n=null==B||null===(t=B.pages)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.sections)||void 0===t?void 0:t.map((function(e){var t;return null==e||null===(t=e.questions)||void 0===t?void 0:t.map((function(e){return e.id}))}))}));return(0,nt.Z)(n).includes(e)}(pe),invalidText:L("questionIdExists","This question ID already exists in your schema"),labelText:L("questionId","Question ID (prefer using camel-case for IDs)"),onChange:function(e){return be(e.target.value)},placeholder:L("questionIdPlaceholder",'Enter a unique ID e.g. "anaesthesiaType" for a question asking about the type of anaesthesia.'),required:!0}),o().createElement(u.SYO,{defaultSelected:/true/.test(null==I||null===(n=I.required)||void 0===n?void 0:n.toString())?"required":"optional",name:"isQuestionRequired",legendText:L("isQuestionRequiredOrOptional","Is this question a required or optional field? Required fields must be answered before the form can be submitted.")},o().createElement(u.EUY,{id:"questionIsNotRequired",defaultChecked:!0,labelText:L("optional","Optional"),onClick:function(){return se(!1)},value:"optional"}),o().createElement(u.EUY,{id:"questionIsRequired",defaultChecked:!1,labelText:L("required","Required"),onClick:function(){return se(!0)},value:"required"})),o().createElement(u.PhF,{defaultValue:I.type,onChange:function(e){return Ee(e.target.value)},id:"questionType",invalidText:L("typeRequired","Type is required"),labelText:L("questionType","Question type"),required:!0},!ve&&o().createElement(u.QlF,{text:L("chooseQuestionType","Choose a question type"),value:""}),U.map((function(e,t){return o().createElement(u.QlF,{text:e,value:e,key:t})}))),o().createElement(u.PhF,{defaultValue:I.questionOptions.rendering,onChange:function(e){return ae(e.target.value)},id:"renderingType",invalidText:L("validFieldTypeRequired","A valid field type value is required"),labelText:L("fieldType","Field type"),required:!0},!oe&&o().createElement(u.QlF,{text:L("chooseFieldType","Choose a field type"),value:""}),G.map((function(e,t){return o().createElement(u.QlF,{text:e,value:e,key:t})}))),"number"===oe?o().createElement(o().Fragment,null,o().createElement(u.oil,{id:"min",labelText:"Min",value:Ae||"",onChange:function(e){return fe(e.target.value)},required:!0}),o().createElement(u.oil,{id:"max",labelText:"Max",value:ue||"",onChange:function(e){return de(e.target.value)},required:!0})):"textarea"===oe?o().createElement(u.oil,{id:"textAreaRows",labelText:L("rows","Rows"),value:Se||"",onChange:function(e){return ke(e.target.value)},required:!0}):null,"ui-select-extended"!==oe&&o().createElement("div",null,o().createElement(u.lXp,{className:it.label},L("searchForBackingConcept","Search for a backing concept")),ze?o().createElement(u.K0D,{kind:"error",lowContrast:!0,className:it.error,title:L("errorFetchingConceptName","Couldn't resolve concept name"),subtitle:L("conceptDoesNotExist","The linked concept does not exist in your dictionary.")}):null,Me?o().createElement(u.lSo,{className:it.loader,description:L("loading","Loading")+"..."}):o().createElement(o().Fragment,null,o().createElement(u.olm,{defaultValue:je,id:"conceptLookup",onClear:function(){return Te(null)},onChange:function(e){var t,n;(n=null===(t=e.target.value)||void 0===t?void 0:t.trim())&&Re(n)},placeholder:L("searchConcept","Search using a concept name or UUID"),required:!0,size:"md",value:null==Be?void 0:Be.display}),te?Ne?o().createElement(u.lSo,{className:it.loader,description:L("searching","Searching")+"..."}):(null==Fe?void 0:Fe.length)&&!Ne?o().createElement("ul",{className:it.conceptList},null==Fe?void 0:Fe.map((function(e,t){return o().createElement("li",{role:"menuitem",className:it.concept,key:t,onClick:function(){return function(e){var t,n,r;ne(""),Oe([]),Te(e),X(null==e||null===(t=e.mappings)||void 0===t?void 0:t.map((function(e){var t=e.display.split(": ");return{relationship:e.conceptMapType.display,type:t[0],value:t[1]}}))),J(null!==(r=null==e||null===(n=e.answers)||void 0===n?void 0:n.map((function(e){return{concept:null==e?void 0:e.uuid,label:null==e?void 0:e.display}})))&&void 0!==r?r:[])}(e)}},e.display)}))):o().createElement(u.mh4,null,o().createElement(u.n9L,{className:it.emptyResults},o().createElement("span",null,L("noMatchingConcepts","No concepts were found that match")," ",o().createElement("strong",null,'"',te,'".'))),o().createElement("div",{className:it.oclLauncherBanner},o().createElement("p",{className:it.bodyShort01},L("conceptSearchHelpText","Can't find a concept?")),o().createElement("a",{className:it.oclLink,target:"_blank",rel:"noopener noreferrer",href:"https://app.openconceptlab.org/"},L("searchInOCL","Search in OCL"),o().createElement(A.Gu,{size:16})))):null)),(null==K?void 0:K.length)?o().createElement(u.cwH,null,o().createElement(u.lXp,{className:it.label},L("mappings","Mappings")),o().createElement("table",{className:it.tableStriped},o().createElement("thead",null,o().createElement("tr",null,o().createElement("th",null,L("relationship","Relationship")),o().createElement("th",null,L("source","Source")),o().createElement("th",null,L("code","Code")))),o().createElement("tbody",null,K.map((function(e,t){return o().createElement("tr",{key:"mapping-".concat(t)},o().createElement("td",null,null!==(k=e.relationship)&&void 0!==k?k:"--"),o().createElement("td",null,null!==(x=e.type)&&void 0!==x?x:"--"),o().createElement("td",null,null!==(D=e.value)&&void 0!==D?D:"--"))}))))):null,!Le&&(null==I||null===(a=I.questionOptions.answers)||void 0===a?void 0:a.length)?o().createElement(u.NUq,{className:it.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},initialSelectedItems:null==I||null===(l=I.questionOptions)||void 0===l||null===(i=l.answers)||void 0===i?void 0:i.map((function(e){return{id:e.concept,text:e.label}})),items:null==I||null===(d=I.questionOptions)||void 0===d||null===(s=d.answers)||void 0===s?void 0:s.map((function(e){return{id:e.concept,text:null!==(O=e.label)&&void 0!==O?O:""}})),onChange:function(e){var t=e.selectedItems;H(!0),Oe(t.sort())},size:"md",titleText:L("selectAnswersToDisplay","Select answers to display")}):null,Le||!(null==I||null===(_=I.questionOptions)||void 0===_||null===(m=_.answers)||void 0===m?void 0:m.length)||Q?null:o().createElement("div",null,null==I||null===(b=I.questionOptions)||void 0===b||null===(p=b.answers)||void 0===p?void 0:p.map((function(e){return o().createElement(u.Vp9,{className:it.tag,key:null==e?void 0:e.concept,type:"blue"},null==e?void 0:e.label)}))),Le&&Y.length?o().createElement(u.NUq,{className:it.multiSelect,direction:"top",id:"selectAnswers",itemToString:function(e){return e.text},items:Y.map((function(e){return{id:e.concept,text:e.label}})),onChange:function(e){var t=e.selectedItems;return Oe(t.sort())},size:"md",titleText:L("selectAnswersToDisplay","Select answers to display")}):null,(null!=Le?Le:Q)&&o().createElement("div",null,De.map((function(e){return o().createElement(u.Vp9,{className:it.tag,key:e.id,type:"blue"},e.text)}))))),o().createElement(u.mzw,null,o().createElement(u.zxk,{onClick:function(){return z(!1)},kind:"secondary"},L("cancel","Cancel")),o().createElement(u.zxk,{onClick:function(){!function(e){var t,n,r;r=!Le&&(null==De?void 0:De.length)?De.map((function(e){return{concept:e.id,label:e.text}})):Le&&0===Y.length?[]:Le&&(null==Y?void 0:Y.length)>0&&(null==De?void 0:De.length)&&(null==De?void 0:De.length)?De.map((function(e){return{concept:e.id,label:e.text}})):I.questionOptions.answers;try{var o,a={label:ge||I.label,type:ve||I.type,required:le||/true/.test(null==I||null===(o=I.required)||void 0===o?void 0:o.toString()),id:pe||I.id,questionOptions:{rendering:oe||I.questionOptions.rendering,concept:(null==Be?void 0:Be.uuid)?Be.uuid:I.questionOptions.concept,conceptMappings:(null==K?void 0:K.length)?K:I.questionOptions.conceptMappings,answers:r}};B.pages[q].sections[F].questions[e]=a,T(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){gt(e,t,n[t])}))}return e}({},B)),P(),ye(""),be(""),se(!1),Ee(null),ae(null),Te(null),X([]),Oe([]),M(null),(0,f.showToast)({title:L("success","Success!"),kind:"success",critical:!0,description:L("questionUpdated","Question updated")}),z(!1)}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&(0,f.showNotification)({title:L("errorUpdatingQuestion","Error updating question"),kind:"error",critical:!0,description:null==e?void 0:e.message})}}(N)}},o().createElement("span",null,L("save","Save"))))))};var vt=n(69160),Et=n(95977),wt=n(81201),St={};St.styleTagTransform=H(),St.setAttributes=G(),St.insert=L().bind(null,"head"),St.domAPI=z(),St.insertStyleElement=Z(),P()(wt.Z,St);const kt=wt.Z&&wt.Z.locals?wt.Z.locals:void 0;function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Dt(e,t,n[t])}))}return e}function It(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const Bt=function(e){var t,n,a=e.id,i=e.handleCancel,l=e.handleSave,s=e.value,d=(0,c.useTranslation)().t,m=(t=(0,r.useState)(s),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=m[0],f=m[1];return o().createElement(o().Fragment,null,o().createElement(u.oil,{id:a,labelText:"",value:A,onChange:function(e){return f(e.target.value)}}),o().createElement("div",{className:kt.actionButtons},o().createElement(u.zxk,{size:"md",renderIcon:function(e){return o().createElement(vt.vc,It(Ot({},e),{size:16}))},kind:"primary",onClick:function(){return l(A)}},d("saveButtonText","Save")),o().createElement(u.zxk,{size:"md",renderIcon:function(e){return o().createElement(Et.x8,It(Ot({},e),{size:16}))},kind:"secondary",onClick:i},d("cancelButtonText","Cancel"))))};var Tt=n(83531),qt={};qt.styleTagTransform=H(),qt.setAttributes=G(),qt.insert=L().bind(null,"head"),qt.domAPI=z(),qt.insertStyleElement=Z(),P()(Tt.Z,qt);const Ft=Tt.Z&&Tt.Z.locals?Tt.Z.locals:void 0;function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const jt=function(e){var t,n,a=e.elementType,i=e.id,l=e.value,s=e.onSave,m=(0,c.useTranslation)().t,A=(t=(0,r.useState)(!1),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=A[0],_=A[1],p=function(){_(!1)};return f?o().createElement(Bt,{handleCancel:p,handleSave:function(e){s(e),p()},id:i,value:l}):o().createElement(o().Fragment,null,o().createElement("h1",{className:Ft["".concat(a)+"Label"]},l),o().createElement(u.zxk,{kind:"ghost",size:"sm",enterDelayMs:300,iconDescription:m("editButton","Edit {{elementType}}",{elementType:a}),onClick:function(){return _(!0)},renderIcon:function(e){return o().createElement(d.I8,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pt(e,t,n[t])}))}return e}({size:16},e))},hasIconOnly:!0}))};function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const Rt=function(e){var t=e.schema,n=e.onSchemaChange,a=e.showModal,i=e.onModalChange,l=(0,c.useTranslation)().t,s=Lt((0,r.useState)(""),2),d=s[0],m=s[1],A=Lt((0,r.useState)(""),2),_=A[0],p=A[1];return o().createElement(u.lpG,{open:a,onClose:function(){return i(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:l("createNewForm","Create a new form")}),o().createElement(u.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,null,o().createElement(u.Kqy,{gap:5},o().createElement(u.cwH,{legendText:""},o().createElement(u.oil,{id:"formName",labelText:l("formName","Form Name"),placeholder:l("namePlaceholder","What the form is called in the system"),value:d,onChange:function(e){return m(e.target.value)}})),o().createElement(u.cwH,{legendText:""},o().createElement(u.oil,{id:"formDescription",labelText:l("formDescription","Form description"),placeholder:l("formDescriptionPlaceholder","A short description of the form e.g. A form for collecting COVID-19 symptoms"),value:_,onChange:function(e){return p(e.target.value)}}))))),o().createElement(u.mzw,null,o().createElement(u.zxk,{kind:"secondary",onClick:function(){return i(!1)}},l("cancel","Cancel")),o().createElement(u.zxk,{disabled:!d,onClick:function(){d&&(function(e){try{var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Mt(e,t,n[t])}))}return e}({},t,e);n(r),(0,f.showToast)({title:l("success","Success!"),kind:"success",critical:!0,description:l("formCreated","New form created")})}catch(e){o=e,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?a[Symbol.hasInstance](o):o instanceof a)&&(0,f.showNotification)({title:l("errorCreatingForm","Error creating form"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var o,a}({name:d,description:_}),i(!1))}},o().createElement("span",null,l("createForm","Create Form")))))};function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Zt=function(e){var t,n,a=e.schema,i=e.onSchemaChange,l=e.showModal,s=e.onModalChange,d=(0,c.useTranslation)().t,m=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),A=m[0],_=m[1];return o().createElement(u.lpG,{open:l,onClose:function(){return s(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:d("createNewPage","Create a new page")}),o().createElement(u.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,null,o().createElement(u.cwH,{legendText:""},o().createElement(u.oil,{id:"pageTitle",labelText:d("enterPageTitle","Enter a title for your new page"),value:A,onChange:function(e){return _(e.target.value)}})))),o().createElement(u.mzw,null,o().createElement(u.zxk,{onClick:function(){return s(!1)},kind:"secondary"},d("cancel","Cancel")),o().createElement(u.zxk,{disabled:!A,onClick:function(){(function(){try{A&&(a.pages.push({label:A,sections:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ut(e,t,n[t])}))}return e}({},a)),_("")),(0,f.showToast)({title:d("success","Success!"),kind:"success",critical:!0,description:d("pageCreated","New page created")})}catch(n){e=n,(null!=(t=Error)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)&&(0,f.showNotification)({title:d("errorCreatingPage","Error creating page"),kind:"error",critical:!0,description:null==n?void 0:n.message})}var e,t})(),s(!1)}},o().createElement("span",null,d("save","Save")))))};function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Vt=function(e){var t,n,a=e.schema,i=e.onSchemaChange,l=e.pageIndex,s=e.resetIndices,d=e.showModal,m=e.onModalChange,A=(0,c.useTranslation)().t,_=(t=(0,r.useState)(""),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return Qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qt(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=_[0],b=_[1];return o().createElement(u.lpG,{open:d,onClose:function(){return m(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:A("createNewSection","Create a new section")}),o().createElement(u.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,null,o().createElement(u.cwH,{legendText:""},o().createElement(u.oil,{id:"sectionTitle",labelText:A("enterSectionTitle","Enter a section title"),value:p,onChange:function(e){return b(e.target.value)}})))),o().createElement(u.mzw,null,o().createElement(u.zxk,{onClick:function(){return m(!1)},kind:"secondary"},A("cancel","Cancel")),o().createElement(u.zxk,{disabled:!p,onClick:function(){(function(){try{var e,t;null===(t=a.pages[l])||void 0===t||null===(e=t.sections)||void 0===e||e.push({label:p,isExpanded:"true",questions:[]}),i(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ht(e,t,n[t])}))}return e}({},a)),b(""),s(),(0,f.showToast)({title:A("success","Success!"),kind:"success",critical:!0,description:A("sectionCreated","New section created")})}catch(e){n=e,(null!=(r=Error)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](n):n instanceof r)&&(0,f.showNotification)({title:A("errorCreatingSection","Error creating section"),kind:"error",critical:!0,description:null==e?void 0:e.message})}var n,r})(),m(!1)}},o().createElement("span",null,A("save","Save")))))};var Yt=n(24285),Jt=n(16003),Wt={};Wt.styleTagTransform=H(),Wt.setAttributes=G(),Wt.insert=L().bind(null,"head"),Wt.domAPI=z(),Wt.insertStyleElement=Z(),P()(Jt.Z,Wt);const Kt=Jt.Z&&Jt.Z.locals?Jt.Z.locals:void 0;function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xt(e,t,n[t])}))}return e}var en=function(e){var t=e.question,n=e.pageIndex,r=e.sectionIndex,a=e.questionIndex,i=e.handleDuplicateQuestion,l=e.handleDeleteButtonClick,s=e.handleEditButtonClick,A=e.questionCount,f=(0,c.useTranslation)().t,_="question-".concat(n,"-").concat(r,"-").concat(a),p=(0,tt.O1)({id:_,disabled:A<=1}),b=p.attributes,h=p.listeners,g=p.transform,y=p.isDragging,C=p.setNodeRef,v={transform:Yt.ux.Translate.toString(g)},E=y?Kt.isDragged:Kt.normal;return o().createElement("div",{className:E,style:v},o().createElement("div",{className:Kt.iconAndName},o().createElement("div",$t({ref:C},b,h),o().createElement(u.zxk,{className:Kt.dragIcon,enterDelayMs:300,hasIconOnly:!0,iconDescription:f("reorderQuestion","Reorder question"),kind:"ghost",renderIcon:function(e){return o().createElement(d._l,$t({size:16},e))},size:"md"})),o().createElement("p",{className:Kt.questionLabel},t.label)),o().createElement("div",{className:Kt.buttonsContainer},o().createElement(u.qi1,{align:"top",className:"cds--btn--sm",feedback:f("duplicated","Duplicated")+"!",iconDescription:f("duplicateQuestion","Duplicate question"),kind:"ghost",onClick:function(){return!y&&i(t,n,r)}}),o().createElement(u.zxk,{enterDelayMs:300,hasIconOnly:!0,iconDescription:f("editQuestion","Edit question"),kind:"ghost",onClick:function(){y||s(t)},renderIcon:function(e){return o().createElement(d.I8,$t({size:16},e))},size:"md"}),o().createElement(u.zxk,{enterDelayMs:300,hasIconOnly:!0,iconDescription:f("deleteQuestion","Delete question"),kind:"ghost",onClick:l,renderIcon:function(e){return o().createElement(m.ZN,$t({size:16},e))},size:"md"})))};function tn(e){var t=e.id,n=e.children,r=(0,tt.Zj)({id:t}),a=r.isOver,i=r.setNodeRef,l={border:"1px solid ".concat(a?"#005d5d":"transparent")};return o().createElement("div",{ref:i,style:l},n)}var nn=n(28787),rn={};rn.styleTagTransform=H(),rn.setAttributes=G(),rn.insert=L().bind(null,"head"),rn.domAPI=z(),rn.insertStyleElement=Z(),P()(nn.Z,rn);const on=nn.Z&&nn.Z.locals?nn.Z.locals:void 0;function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ln(e,t,n[t])}))}return e}function un(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||mn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}const An=function(e){var t,n=e.isLoading,a=e.onSchemaChange,l=e.schema,s=(0,tt.VT)(tt.MA,{activationConstraint:{distance:10}}),d=(0,tt.VT)(tt.Lg),_=(0,tt.Dy)(s,d),p=(0,c.useTranslation)().t,b=(0,i.UO)().formUuid,h=Boolean(b),g=dn((0,r.useState)(0),2),y=g[0],C=g[1],v=dn((0,r.useState)(0),2),E=v[0],w=v[1],S=dn((0,r.useState)(),2),k=S[0],x=S[1],D=dn((0,r.useState)(0),2),O=D[0],I=D[1],B=dn((0,r.useState)(!1),2),T=B[0],q=B[1],F=dn((0,r.useState)(!1),2),N=F[0],P=F[1],j=dn((0,r.useState)(!1),2),z=j[0],M=j[1],L=dn((0,r.useState)(!1),2),R=L[0],G=L[1],U=dn((0,r.useState)(!1),2),Z=U[0],Q=U[1],H=dn((0,r.useState)(!1),2),V=H[0],Y=H[1],J=dn((0,r.useState)(!1),2),W=J[0],K=J[1],X=dn((0,r.useState)(!1),2),$=X[0],ee=X[1],te=(0,r.useCallback)((function(){l||a(cn({},{name:"",pages:[],processor:"EncounterFormProcessor",encounterType:"",referencedForms:[],uuid:""}))}),[a,l]),ne=function(){C(0),I(0),w(0)},re=(0,r.useCallback)((function(e){try{e&&(l.name=e),a(cn({},l)),(0,f.showToast)({title:p("success","Success!"),kind:"success",critical:!0,description:p("formRenamed","Form renamed")})}catch(e){(0,f.showNotification)({title:p("errorRenamingForm","Error renaming form"),kind:"error",critical:!0,description:null==e?void 0:e.message})}}),[a,l,p]),oe=(0,r.useCallback)((function(e,t){try{e&&(l.pages[t].label=e),a(cn({},l)),(0,f.showToast)({title:p("success","Success!"),kind:"success",critical:!0,description:p("pageRenamed","Page renamed")})}catch(e){sn(e,Error)&&(0,f.showNotification)({title:p("errorRenamingPage","Error renaming page"),kind:"error",critical:!0,description:null==e?void 0:e.message})}}),[a,l,p]),ae=(0,r.useCallback)((function(e,t,n){try{e&&(l.pages[t].sections[n].label=e),a(cn({},l)),ne(),(0,f.showToast)({title:p("success","Success!"),kind:"success",critical:!0,description:p("sectionRenamed","Section renamed")})}catch(e){sn(e,Error)&&(0,f.showNotification)({title:p("errorRenamingSection","Error renaming section"),kind:"error",critical:!0,description:null==e?void 0:e.message})}}),[a,l,p]),ie=(0,r.useCallback)((function(e,t,n){try{var r=JSON.parse(JSON.stringify(e));r.id=r.id+"Duplicate",l.pages[t].sections[n].questions.push(r),a(cn({},l)),ne(),(0,f.showToast)({title:p("success","Success!"),kind:"success",critical:!0,description:p("questionDuplicated","Question duplicated. Please change the duplicated question's ID to a unique, camelcased value")})}catch(e){sn(e,Error)&&(0,f.showNotification)({title:p("errorDuplicatingQuestion","Error duplicating question"),kind:"error",critical:!0,description:null==e?void 0:e.message})}}),[a,l,p]),le=function(e){K(!0),C(y),I(O),w(E),x(e)},se=function(){C(y),I(O),w(E),Q(!0)};return o().createElement("div",{className:on.container},n?o().createElement(u.lSo,{description:p("loadingSchema","Loading schema")+"..."}):null,$?o().createElement(Rt,{schema:l,onSchemaChange:a,showModal:$,onModalChange:ee}):null,T?o().createElement(Zt,{schema:l,onSchemaChange:a,showModal:T,onModalChange:q}):null,z?o().createElement(Vt,{schema:l,onSchemaChange:a,pageIndex:y,resetIndices:ne,showModal:z,onModalChange:M}):null,N?o().createElement(ut,{onModalChange:P,onQuestionEdit:x,onSchemaChange:a,pageIndex:y,sectionIndex:O,questionIndex:E,resetIndices:ne,schema:l,showModal:N}):null,W?o().createElement(Ct,{onModalChange:K,onQuestionEdit:x,onSchemaChange:a,pageIndex:y,questionIndex:E,questionToEdit:k,resetIndices:ne,schema:l,sectionIndex:O,showModal:W}):null,R?o().createElement(ft,{onModalChange:G,onSchemaChange:a,resetIndices:ne,pageIndex:y,schema:l,showModal:R}):null,V?o().createElement(mt,{onModalChange:Y,onSchemaChange:a,resetIndices:ne,pageIndex:y,sectionIndex:O,schema:l,showModal:V}):null,Z?o().createElement(pt,{onModalChange:Q,onSchemaChange:a,resetIndices:ne,pageIndex:y,sectionIndex:O,questionIndex:E,schema:l,showModal:Z}):null,(null==l?void 0:l.name)&&o().createElement(o().Fragment,null,o().createElement("div",{className:on.header},o().createElement("div",{className:on.explainer},o().createElement("p",null,p("welcomeHeading","Welcome to the Interactive Schema builder")),o().createElement("p",null,p("welcomeExplainer","Add pages, sections and questions to your form. The Preview tab automatically updates as you build your form. For a detailed explanation of what constitutes an OpenMRS form schema, please read through the ")," ",o().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://ohri-docs.globalhealthapp.net/"},p("formBuilderDocs","form builder documentation"),"."))),o().createElement(u.zxk,{kind:"ghost",renderIcon:A.mm,onClick:function(){q(!0)},iconDescription:p("addPage","Add Page")},p("addPage","Add Page"))),o().createElement("div",{className:on.editorContainer},o().createElement(jt,{elementType:"schema",id:"formNameInput",value:null==l?void 0:l.name,onSave:function(e){return re(e)}}))),!h&&!(null==l?void 0:l.name)&&o().createElement("div",{className:on.header},o().createElement("p",{className:on.explainer},p("interactiveBuilderHelperText","The Interactive Builder lets you build your form schema without writing JSON code. The Preview tab automatically updates as you build your form. When done, click Save Form to save your form.")),o().createElement(u.zxk,{onClick:function(){te(),ee(!0)},className:on.startButton,kind:"ghost"},p("startBuilding","Start building"))),o().createElement(tt.LB,{onDragEnd:function(e){return function(e){var t=e.active,n=e.delta;if(t){var r=t.id.toString().split("-"),o=parseInt(r[1]),i=parseInt(r[2]),s=parseInt(r[3]),c=l.pages[o].sections[i].questions,u=c[s];c.splice(s,1),c.splice(s+n.y,0,u);var d=un(cn({},l),{pages:l.pages.map((function(e,t){return t===o?un(cn({},e),{sections:e.sections.map((function(e,t){return t===i?un(cn({},e),{questions:(n=c,function(e){if(Array.isArray(e))return an(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||mn(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}):e;var n}))}):e}))});a(d)}}(e)},sensors:_},(null==l||null===(t=l.pages)||void 0===t?void 0:t.length)?l.pages.map((function(e,t){var n,r,a;return o().createElement("div",{className:on.editableFieldsContainer},o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",{className:on.editorContainer},o().createElement(jt,{elementType:"page",id:"pageNameInput",value:l.pages[t].label,onSave:function(e){return oe(e,t)}})),o().createElement(u.zxk,{hasIconOnly:!0,enterDelayMs:300,iconDescription:p("deletePage","Delete page"),kind:"ghost",onClick:function(){C(t),G(!0)},renderIcon:function(e){return o().createElement(m.ZN,cn({size:16},e))},size:"sm"})),o().createElement("div",null,(null==e||null===(n=e.sections)||void 0===n?void 0:n.length)?o().createElement("p",{className:on.sectionExplainer},p("expandSectionExplainer","Below are the sections linked to this page. Expand each section to add questions to it.")):null,(null==e||null===(r=e.sections)||void 0===r?void 0:r.length)?null===(a=e.sections)||void 0===a?void 0:a.map((function(e,n){var r;return o().createElement(u.UQy,null,o().createElement(u.Qdk,{title:e.label},o().createElement(o().Fragment,null,o().createElement("div",{style:{display:"flex",alignItems:"center"}},o().createElement("div",{className:on.editorContainer},o().createElement(jt,{elementType:"section",id:"sectionNameInput",value:e.label,onSave:function(e){return ae(e,t,n)}})),o().createElement(u.zxk,{hasIconOnly:!0,enterDelayMs:300,iconDescription:p("deleteSection","Delete section"),kind:"ghost",onClick:function(){C(t),I(n),Y(!0)},renderIcon:function(e){return o().createElement(m.ZN,cn({size:16},e))},size:"sm"})),o().createElement("div",null,(null===(r=e.questions)||void 0===r?void 0:r.length)?e.questions.map((function(r,a){return o().createElement(tn,{id:"droppable-question-".concat(t,"-").concat(n,"-").concat(a)},o().createElement(en,{key:r.id,question:r,pageIndex:t,sectionIndex:n,questionIndex:a,handleDuplicateQuestion:ie,handleEditButtonClick:le,handleDeleteButtonClick:se,questionCount:e.questions.length}))})):o().createElement("p",{className:on.explainer},p("sectionExplainer","A section will typically contain one or more questions. Click the button below to add a question to this section.")),o().createElement(u.zxk,{className:on.addQuestionButton,kind:"ghost",renderIcon:A.mm,onClick:function(){P(!0),w(E),C(t),I(n)},iconDescription:p("addQuestion","Add Question")},p("addQuestion","Add Question"))))))})):o().createElement("p",{className:on.explainer},p("pageExplainer","Pages typically have one or more sections. Click the button below to add a section to your page."))),o().createElement(u.zxk,{className:on.addSectionButton,kind:"ghost",renderIcon:A.mm,onClick:function(){M(!0),C(t)},iconDescription:p("addSection","Add Section")},p("addSection","Add Section")))})):null))};var fn=n(74981),_n=(n(66245),n(82679),n(14858)),pn={};pn.styleTagTransform=H(),pn.setAttributes=G(),pn.insert=L().bind(null,"head"),pn.domAPI=z(),pn.insertStyleElement=Z(),P()(_n.Z,pn);const bn=_n.Z&&_n.Z.locals?_n.Z.locals:void 0,hn=function(e){var t=e.invalidJsonErrorMessage,n=e.onSchemaChange,r=e.stringifiedSchema,a=(0,c.useTranslation)().t;return o().createElement(o().Fragment,null,t?o().createElement("div",{className:bn.errorContainer},o().createElement("p",{className:bn.heading},a("schemaError","There's an error in your schema.")),o().createElement("p",null,t)):null,o().createElement(fn.ZP,{style:{height:"100vh",width:"100%"},mode:"json",theme:"textmate",name:"schemaEditor",onChange:n,fontSize:15,showPrintMargin:!1,showGutter:!0,highlightActiveLine:!0,value:r,setOptions:{enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,displayIndentGuides:!0,enableSnippets:!1,showLineNumbers:!0,tabSize:2}}))};var gn=n(34553),yn={};yn.styleTagTransform=H(),yn.setAttributes=G(),yn.insert=L().bind(null,"head"),yn.domAPI=z(),yn.insertStyleElement=Z(),P()(gn.Z,yn);const Cn=gn.Z&&gn.Z.locals?gn.Z.locals:void 0;function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function wn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){En(a,r,o,i,l,"next",e)}function l(e){En(a,r,o,i,l,"throw",e)}i(void 0)}))}}function Sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){l=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var xn=function(e){var t=e.error,n=e.title;return o().createElement(u.K0D,{className:Cn.errorNotification,kind:"error",lowContrast:!0,subtitle:null==t?void 0:t.message,title:n})};const Dn=function(){var e=(0,c.useTranslation)().t,t=(0,i.UO)().formUuid,n=!t,a=kn((0,r.useState)(),2),l=a[0],s=a[1],m=kn((0,r.useState)(!1),2),A=m[0],_=m[1],p=ve(t),b=p.form,h=p.formError,g=p.isLoadingForm,y=X(b),C=y.clobdata,v=y.clobdataError,E=y.isLoadingClobdata,w=kn((0,r.useState)("idle"),2),S=w[0],k=w[1],x=kn((0,r.useState)(l?JSON.stringify(l,null,2):""),2),D=x[0],O=x[1],I=Boolean(t)&&(E||g);(0,r.useEffect)((function(){t&&(b&&Object.keys(b).length>0&&k("formLoaded"),"formLoaded"!==S||E||void 0!==C||_(!0),C&&Object.keys(C).length>0&&(k("schemaLoaded"),s(C),localStorage.setItem("formJSON",JSON.stringify(C))))}),[C,b,t,E,I,S]),(0,r.useEffect)((function(){O(JSON.stringify(l,null,2))}),[l]);var B=(0,r.useCallback)((function(){_(!1);try{var e=localStorage.getItem("formJSON");e&&s(JSON.parse(e))}catch(e){console.error("Error fetching draft schema from localStorage: ",null==e?void 0:e.message)}}),[]),T=(0,r.useCallback)((function(e){O(e)}),[]),q=(0,r.useCallback)((function(e){s(e),localStorage.setItem("formJSON",JSON.stringify(e))}),[]),F=(0,r.useCallback)((function(){var e={encounterType:"",name:"Sample Form",processor:"EncounterFormProcessor",referencedForms:[],uuid:"",version:"1.0",pages:[{label:"First Page",sections:[{label:"A Section",isExpanded:"true",questions:[{id:"sampleQuestion",label:"A Question of type obs that renders a text input",type:"obs",questionOptions:{rendering:"text",concept:"a-system-defined-concept-uuid"}}]},{label:"Another Section",isExpanded:"true",questions:[{id:"anotherSampleQuestion",label:"Another Question of type obs whose answers get rendered as radio inputs",type:"obs",questionOptions:{rendering:"radio",concept:"system-defined-concept-uuid",answers:[{concept:"another-system-defined-concept-uuid",label:"Choice 1",conceptMappings:[]},{concept:"yet-another-system-defined-concept-uuid",label:"Choice 2",conceptMappings:[]},{concept:"yet-one-more-system-defined-concept-uuid",label:"Choice 3",conceptMappings:[]}]}}]}]}]};O(JSON.stringify(e,null,2)),q(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Sn(e,t,n[t])}))}return e}({},e))}),[q]),N=kn((0,r.useState)(""),2),P=N[0],j=N[1],z=(0,r.useCallback)((function(){j("")}),[]),M=(0,r.useCallback)((function(){z();try{var e=JSON.parse(D);q(e),O(JSON.stringify(e,null,2))}catch(e){t=e,(null!=(n=Error)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?n[Symbol.hasInstance](t):t instanceof n)&&j(e.message)}var t,n}),[D,q,z]),L=function(){return o().createElement(u.lpG,{open:A,onClose:function(){return _(!1)},preventCloseOnClickOutside:!0},o().createElement(u.xBx,{title:e("schemaNotFound","Schema not found")}),o().createElement(u.l09,{onSubmit:function(e){return e.preventDefault()}},o().createElement(u.fef,null,o().createElement("p",null,e("schemaNotFoundText","The schema originally associated with this form could not be found. A draft schema was found saved in your browser's local storage. Would you like to load it instead?")))),o().createElement(u.mzw,null,o().createElement(u.zxk,{onClick:function(){return _(!1)},kind:"secondary"},e("cancel","Cancel")),o().createElement(u.zxk,{onClick:B},o().createElement("span",null,e("loadDraft","Load draft")))))},R=(0,r.useMemo)((function(){return new Blob([JSON.stringify(l,null,2)],{type:"application/json"})}),[l]),G=(0,r.useCallback)(wn((function(){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,(function(e){switch(e.label){case 0:return[4,navigator.clipboard.writeText(D)];case 1:return e.sent(),[2]}}))})),[D]);return o().createElement(o().Fragment,null,o().createElement("div",{className:Cn.breadcrumbsContainer},o().createElement(f.ExtensionSlot,{name:"breadcrumbs-slot"})),o().createElement("div",{className:Cn.container},A&&o().createElement(L,null),o().createElement(u.rjZ,{className:Cn.grid},o().createElement(u.sgG,{lg:8,md:8,className:Cn.column},o().createElement("div",{className:Cn.actionButtons},I?o().createElement(u.lSo,{description:e("loadingSchema","Loading schema")+"..."}):null,n&&!l?o().createElement(u.zxk,{kind:"ghost",onClick:F},e("inputDummySchema","Input dummy schema")):null,o().createElement(u.zxk,{kind:"ghost",onClick:M},o().createElement("span",null,e("renderChanges","Render changes")))),o().createElement("div",null,o().createElement("div",{className:Cn.heading},o().createElement("span",{className:Cn.tabHeading},e("schemaEditor","Schema editor")),l?o().createElement(o().Fragment,null,o().createElement(u.qi1,{align:"top",className:"cds--btn--md",enterDelayMs:300,iconDescription:e("copySchema","Copy schema"),kind:"ghost",onClick:G}),o().createElement("a",{download:"".concat(null==b?void 0:b.name,".json"),href:window.URL.createObjectURL(R)},o().createElement(u.zxk,{enterDelayMs:300,renderIcon:d.UW,kind:"ghost",iconDescription:e("downloadSchema","Download schema"),hasIconOnly:!0,size:"md",tooltipAlignment:"start"}))):null),h?o().createElement(xn,{error:h,title:e("formError","Error loading form metadata")}):null,v?o().createElement(xn,{error:v,title:e("schemaLoadError","Error loading schema")}):null,o().createElement("div",{className:Cn.editorContainer},o().createElement(hn,{invalidJsonErrorMessage:P,isLoading:I,onSchemaChange:T,stringifiedSchema:D})))),o().createElement(u.sgG,{lg:8,md:8,className:Cn.column},o().createElement(Qe,{schema:l,t:e}),o().createElement(u.mQc,null,o().createElement(u.tdY,{"aria-label":"Form previews"},o().createElement(u.OK9,null,e("preview","Preview")),o().createElement(u.OK9,null,e("interactiveBuilder","Interactive Builder")),o().createElement(u.OK9,null,b&&e("auditDetails","Audit Details"))),o().createElement(u.nPR,null,o().createElement(u.x45,null,o().createElement(et,{schema:l,isLoading:I})),o().createElement(u.x45,null,o().createElement(An,{schema:l,onSchemaChange:q,isLoading:I})),o().createElement(u.x45,null,b&&o().createElement(He,{form:b,key:b.uuid}))))))))},On=function(){return o().createElement(a.VK,{basename:"".concat(window.spaBase,"/form-builder")},o().createElement(i.Z5,null,o().createElement(i.AW,{path:"/",element:o().createElement(Ce,null)}),o().createElement(i.AW,{path:"/new",element:o().createElement(Dn,null)}),o().createElement(i.AW,{path:"/edit/:formUuid",element:o().createElement(Dn,null)})))}}}]);