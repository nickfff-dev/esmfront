"use strict";(globalThis.webpackChunk_openmrs_esm_openconceptlab_app=globalThis.webpackChunk_openmrs_esm_openconceptlab_app||[]).push([[535],{7916:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__import__grid___YZXsF{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__import__productiveHeading03___aJ3VQ{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__import__form___Ag0gn{margin-top:2rem}.-esm-openconceptlab__import__formText___cuZHY{padding-bottom:1rem}.-esm-openconceptlab__import__fileUploaderDropContainer___ez4ji{margin-bottom:1.5rem}","",{version:3,sources:["webpack://./src/import/import.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAGA,2CACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,0DCw1BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BF,mBESW,CFNb,2CACE,eEyBW,CFtBb,+CACE,mBEWW,CFRb,gEACE,oBEYW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__import__grid___YZXsF",productiveHeading03:"-esm-openconceptlab__import__productiveHeading03___aJ3VQ",form:"-esm-openconceptlab__import__form___Ag0gn",formText:"-esm-openconceptlab__import__formText___cuZHY",fileUploaderDropContainer:"-esm-openconceptlab__import__fileUploaderDropContainer___ez4ji"};const s=i},4301:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__import-items__pagination___FsMvH{font-size:var(--cds-body-short-01-font-size, 0.875rem);font-weight:var(--cds-body-short-01-font-weight, 400);line-height:var(--cds-body-short-01-line-height, 1.28572);letter-spacing:var(--cds-body-short-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__import-items__tableBordered___sPzlD{border:1px solid #e0e0e0}.-esm-openconceptlab__import-items__tableDataRow___Gv_2K>td{padding-left:1rem !important;background-color:#fff !important}.-esm-openconceptlab__import-items__tableHeaderRow___iYUNO>th{background-color:#e0e0e0 !important}","",{version:3,sources:["webpack://./src/previous-imports/import-overview/import-items.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAGA,uDC+1BI,sDAAA,CAAA,qDAAA,CAAA,yDAAA,CAAA,8DAAA,CD71BF,qBEqHQ,CFpHR,aE0CQ,CFzCR,wBAAA,CACA,YAAA,CAGF,0DACE,wBAAA,CAGF,4DACE,4BAAA,CACA,gCAAA,CAGF,8DACE,mCAAA",sourceRoot:""}]),i.locals={pagination:"-esm-openconceptlab__import-items__pagination___FsMvH",tableBordered:"-esm-openconceptlab__import-items__tableBordered___sPzlD",tableDataRow:"-esm-openconceptlab__import-items__tableDataRow___Gv_2K",tableHeaderRow:"-esm-openconceptlab__import-items__tableHeaderRow___iYUNO"};const s=i},9063:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__import-overview__heading01___JDxgf{font-size:var(--cds-heading-01-font-size, 0.875rem);font-weight:var(--cds-heading-01-font-weight, 600);line-height:var(--cds-heading-01-line-height, 1.42857);letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px)}.-esm-openconceptlab__import-overview__indentedContent___tuwKa{margin-left:2rem}","",{version:3,sources:["webpack://./src/previous-imports/import-overview/import-overview.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAGA,yDC+1BI,mDAAA,CAAA,kDAAA,CAAA,sDAAA,CAAA,2DAAA,CD31BJ,+DACE,gBEiCW",sourceRoot:""}]),i.locals={heading01:"-esm-openconceptlab__import-overview__heading01___JDxgf",indentedContent:"-esm-openconceptlab__import-overview__indentedContent___tuwKa"};const s=i},4933:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__previous-imports__grid___HkWqe{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__previous-imports__productiveHeading03___WAEk0{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__previous-imports__pagination___gCxCs{font-size:var(--cds-body-compact-01-font-size, 0.875rem);font-weight:var(--cds-body-compact-01-font-weight, 400);line-height:var(--cds-body-compact-01-line-height, 1.28572);letter-spacing:var(--cds-body-compact-01-letter-spacing, 0.16px);background-color:#fff;color:#525252;border:1px solid #e0e0e0;display:flex}.-esm-openconceptlab__previous-imports__tableBordered___Yob2_{border:1px solid #e0e0e0}.-esm-openconceptlab__previous-imports__tableRow___PURuk>td{background-color:#fff;border-bottom:1px solid #e0e0e0 !important}.-esm-openconceptlab__previous-imports__tableExpandedRow___YlWRi>td{padding-left:3rem !important;padding-right:3rem;padding-top:1rem;padding-bottom:1rem}","",{version:3,sources:["webpack://./src/previous-imports/previous-imports.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss","webpack://./../../node_modules/@carbon/colors/index.scss"],names:[],mappings:"AAIA,qDACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,oECu1BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDr1BF,mBEQW,CFLb,2DCk1BI,wDAAA,CAAA,uDAAA,CAAA,2DAAA,CAAA,gEAAA,CDh1BF,qBGwGQ,CHvGR,aG6BQ,CH5BR,wBAAA,CACA,YAAA,CAGF,8DACE,wBAAA,CAGF,4DACE,qBG6FQ,CH5FR,0CAAA,CAGF,oEACE,4BAAA,CACA,kBEgBW,CFfX,gBELW,CFMX,mBENW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__previous-imports__grid___HkWqe",productiveHeading03:"-esm-openconceptlab__previous-imports__productiveHeading03___WAEk0",pagination:"-esm-openconceptlab__previous-imports__pagination___gCxCs",tableBordered:"-esm-openconceptlab__previous-imports__tableBordered___Yob2_",tableRow:"-esm-openconceptlab__previous-imports__tableRow___PURuk",tableExpandedRow:"-esm-openconceptlab__previous-imports__tableExpandedRow___YlWRi"};const s=i},1234:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__root__main___xjPQ1{background-color:#fff}.-esm-openconceptlab__root__moduleHeader___dcCSY{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);padding-left:1rem;padding-top:1rem;padding-bottom:1rem}.-esm-openconceptlab__root__tabList___gASbP{padding:0 1rem}.-esm-openconceptlab__root__tabPanel___b1OQL{height:100%;background-color:#f4f4f4}","",{version:3,sources:["webpack://./src/root.scss","webpack://./../../node_modules/@carbon/colors/index.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAIA,yCACE,qBCqHQ,CDlHV,iDE01BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CFx1BF,iBGqBW,CHpBX,gBGoBW,CHnBX,mBGmBW,CHhBb,4CACE,cAAA,CAGF,6CACE,WAAA,CACA,wBCqBQ",sourceRoot:""}]),i.locals={main:"-esm-openconceptlab__root__main___xjPQ1",moduleHeader:"-esm-openconceptlab__root__moduleHeader___dcCSY",tabList:"-esm-openconceptlab__root__tabList___gASbP",tabPanel:"-esm-openconceptlab__root__tabPanel___b1OQL"};const s=i},5271:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(272),o=n.n(r),a=n(2609),i=n.n(a)()(o());i.push([e.id,".-esm-openconceptlab__subscription__grid___gYc7w{margin-left:0;margin-right:0;padding-left:0;padding-right:0}.-esm-openconceptlab__subscription__productiveHeading03___EXzJg{font-size:var(--cds-heading-03-font-size, 1.25rem);font-weight:var(--cds-heading-03-font-weight, 400);line-height:var(--cds-heading-03-line-height, 1.4);letter-spacing:var(--cds-heading-03-letter-spacing, 0);margin-bottom:.5rem}.-esm-openconceptlab__subscription__formGroup___lGgTS{margin-bottom:1rem}.-esm-openconceptlab__subscription__unsubscribeText___UJbmQ{padding-bottom:1rem}.-esm-openconceptlab__subscription__unsubscribeForm___BGAJC{margin-top:1rem}","",{version:3,sources:["webpack://./src/subscription/subscription.scss","webpack://./../../node_modules/@carbon/type/scss/_styles.scss","webpack://./../../node_modules/@carbon/layout/scss/generated/_spacing.scss"],names:[],mappings:"AAGA,iDACE,aAAA,CACA,cAAA,CACA,cAAA,CACA,eAAA,CAGF,gECw1BI,kDAAA,CAAA,kDAAA,CAAA,kDAAA,CAAA,sDAAA,CDt1BF,mBESW,CFNb,sDACE,kBEeW,CFZb,4DACE,mBEWW,CFRb,4DACE,eEOW",sourceRoot:""}]),i.locals={grid:"-esm-openconceptlab__subscription__grid___gYc7w",productiveHeading03:"-esm-openconceptlab__subscription__productiveHeading03___EXzJg",formGroup:"-esm-openconceptlab__subscription__formGroup___lGgTS",unsubscribeText:"-esm-openconceptlab__subscription__unsubscribeText___UJbmQ",unsubscribeForm:"-esm-openconceptlab__subscription__unsubscribeForm___BGAJC"};const s=i},2853:(e,t,n)=>{n.r(t),n.d(t,{default:()=>De});var r=n(268),o=n.n(r),a=n(5638),i=n(4924),s=n(3255),l=n(906);function c(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))}}function p(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function d(e){return m.apply(this,arguments)}function m(){return(m=u((function(e){var t;return p(this,(function(n){return[2,(0,l.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:{},headers:{"Content-Type":"application/json"},signal:null===(t=e)||void 0===t?void 0:t.signal})]}))}))).apply(this,arguments)}function b(e,t){return f.apply(this,arguments)}function f(){return(f=u((function(e,t){var n,r;return p(this,(function(o){return(r=new FormData).append("file",e),[2,(0,l.openmrsFetch)("/ws/rest/v1/openconceptlab/import",{method:"POST",body:r,signal:null===(n=t)||void 0===n?void 0:n.signal})]}))}))).apply(this,arguments)}var _=n(1354),g=n.n(_),h=n(1583),A=n.n(h),v=n(7378),y=n.n(v),E=n(5993),w=n.n(E),C=n(4154),k=n.n(C),S=n(8141),D=n.n(S),N=n(7916),T={};T.styleTagTransform=D(),T.setAttributes=w(),T.insert=y().bind(null,"head"),T.domAPI=A(),T.insertStyleElement=k(),g()(N.Z,T);const x=N.Z&&N.Z.locals?N.Z.locals:void 0;function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function P(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){F(a,r,o,i,s,"next",e)}function s(e){F(a,r,o,i,s,"throw",e)}i(void 0)}))}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}const j=function(){var e,t,n,c,u,p,m=(0,i.useTranslation)().t,f=B((0,r.useState)(!1),2),_=f[0],g=f[1],h=B((0,r.useState)(),2),A=h[0],v=h[1],y=B((0,r.useState)(!1),2),E=y[0],w=y[1],C=(c=(n=(0,s.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",l.openmrsFetch)).data,u=n.error,p=n.isValidating,{data:null===(t=c)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results[0],isLoading:!c&&!u,isError:u,isValidating:p}),k=C.data,S=C.isLoading,D=C.isError;(0,r.useEffect)((function(){S||D||g(!!k)}),[S,D,k]);var N,T=(0,r.useCallback)((function(e,t){var n=t.addedFiles[0];"application/zip"!==n.type?(0,l.showNotification)({kind:"error",description:m("fileFormatError","Only .zip files are allowed")}):v(n)}),[m]),O=(0,r.useCallback)((function(){v(null)}),[]),F=(0,r.useCallback)((N=P((function(e){return I(this,(function(t){switch(t.label){case 0:return e.preventDefault(),e.stopPropagation(),_?[4,d(new AbortController)]:((0,l.showNotification)({kind:"error",description:m("noSubscriptionError","No saved subscription")}),[2]);case 1:return 201===t.sent().status?(0,l.showNotification)({kind:"success",description:m("importSuccess","Import started successfully")}):(0,l.showNotification)({kind:"error",description:m("importFailed","Import failed")}),[2]}}))})),function(e){return N.apply(this,arguments)}),[_,m]),j=(0,r.useCallback)(function(){var e=P((function(e){var t;return I(this,(function(n){switch(n.label){case 0:return w(!0),e.preventDefault(),e.stopPropagation(),A?(t=new AbortController,[4,b(A,t)]):(w(!1),(0,l.showNotification)({kind:"error",description:m("noFileSelected","No file selected")}),[2]);case 1:return 201===n.sent().status?(v(null),w(!1),(0,l.showNotification)({kind:"success",description:m("importSuccess","Import started successfully")})):(w(!1),(0,l.showNotification)({kind:"error",description:m("importFailed","Import failed")})),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[A,m]);return S?o().createElement(a.rjZ,{className:x.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement(a.l09,null,o().createElement(a.N2B,{className:x.productiveHeading03,heading:!0}),o().createElement(a.N2B,{className:x.formText,paragraph:!0,lineCount:2}),o().createElement(a.Db,null)),o().createElement(a.l09,{className:x.form},o().createElement(a.N2B,{className:x.productiveHeading03,heading:!0}),o().createElement(a.N2B,{className:x.formText}),o().createElement(a.rhD,{style:{marginBottom:"1.5rem"}}),o().createElement(a.Db,null)))):(D&&(0,l.showNotification)({kind:"error",description:m("subscriptionError","Error occured while fetching the subscription")}),o().createElement(a.rjZ,{className:x.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement(a.l09,{onSubmit:F},o().createElement("h3",{className:x.productiveHeading03},m("importConcepts","Import Concepts")),o().createElement("p",{className:x.formText},m("importInstructions","Avoid importing during data entry hours, because the operation may significantly slow down the system. You can either use the subscription or a zip file to import concepts.")),o().createElement(a.zxk,{kind:"primary",type:"submit",disabled:!_},m("importFromSubscription","Import from Subscription"))),o().createElement(a.l09,{className:x.form,onSubmit:j},o().createElement("h3",{className:x.productiveHeading03},m("importFromFileHeading","Import from file (Offline)")),o().createElement("p",{className:x.formText},m("importFromFileInfo","You can import data without setting up a subscription by using this option.")),A?o().createElement(a.Py3,{key:A.name,name:A.name,size:"default",status:"edit",iconDescription:m("fileAdded","File Added"),onDelete:O,style:{backgroundColor:"#e0e0e0"}}):o().createElement(a.awp,{accept:["application/zip"],multiple:!0,labelText:m("importFromFileDragInfo","Drag and drop file here or click to upload"),onAddFiles:T,style:{marginBottom:"1.5rem"}}),o().createElement(a.Kqy,{gap:6,orientation:"horizontal"},o().createElement(a.zxk,{kind:"primary",type:"submit"},m("importFromFile","Import from file")),E&&o().createElement(a.lSo,{description:m("uploading","Uploading...")}))))))};function H(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Z(e,t){return G.apply(this,arguments)}function G(){var e;return e=function(e,t){var n,r;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(o){return r="/ws/rest/v1/openconceptlab/import/".concat(e,"/item?state=ERROR&v=full"),[2,(0,l.openmrsFetch)(r,{method:"GET",signal:null===(n=t)||void 0===n?void 0:n.signal})]}))},G=function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){H(a,r,o,i,s,"next",e)}function s(e){H(a,r,o,i,s,"throw",e)}i(void 0)}))},G.apply(this,arguments)}var z=n(4301),R={};R.styleTagTransform=D(),R.setAttributes=w(),R.insert=y().bind(null,"head"),R.domAPI=A(),R.insertStyleElement=k(),g()(z.Z,R);const L=z.Z&&z.Z.locals?z.Z.locals:void 0;function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const q=function(e){var t,n,s,c,u=e.importUuid,p=(0,i.useTranslation)().t,d=Y((0,r.useState)(),2),m=d[0],b=d[1],f=Y((0,r.useState)(5),2),_=f[0],g=f[1],h=Y((0,r.useState)([]),2),A=h[0],v=h[1],y=(0,l.usePagination)(A,_),E=y.results,w=y.currentPage,C=y.goTo,k=(0,r.useCallback)((s=function(e){var t,n;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return b(!0),t=new AbortController,[4,Z(e,t)];case 1:return(n=r.sent()).ok?v(n.data.results):(0,l.showNotification)({title:p("importItemsFetchError","Error occured while fetching the import items"),kind:"error",critical:!0,description:JSON.stringify(n.data)}),b(!1),[2,function(){return t.abort()}]}}))},c=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=s.apply(e,t);function a(e){W(o,n,r,a,i,"next",e)}function i(e){W(o,n,r,a,i,"throw",e)}a(void 0)}))},function(e){return c.apply(this,arguments)}),[p]);if((0,r.useEffect)((function(){k(u)}),[k,u]),m)return o().createElement("div",null,o().createElement(a.gqd,{showHeader:!1,showToolbar:!1,columnCount:2}),o().createElement(a.F3O,null));var S=[{header:p("conceptOrMapping","Concept/Mapping"),key:"uuid"},{header:p("message","Message"),key:"errorMessage"}];return!m&&o().createElement("div",null,o().createElement(a.iA_,{size:"sm",className:L.tableBordered},o().createElement(a.ssF,null,o().createElement(a.SCH,{className:L.tableHeaderRow},S.map((function(e,t){return o().createElement(a.xDH,{key:t,isSortable:!0},e.header)})))),o().createElement(a.RMI,null,null===(t=E)||void 0===t?void 0:t.map((function(e){return o().createElement(r.Fragment,{key:e.uuid},o().createElement(a.SCH,{className:L.tableDataRow},o().createElement(a.pj1,null,o().createElement(a.rUS,{href:e.versionUrl},e.type," ",e.uuid)),o().createElement(a.pj1,null,e.errorMessage)))})))),o().createElement(a.tlE,{className:L.pagination,size:"sm",page:w,pageSize:_,pageSizes:[5,10,20,50,100],totalItems:null===(n=A)||void 0===n?void 0:n.length,onChange:function(e){var t=e.page,n=e.pageSize;C(t),g(n)}}))};var J=n(9063),Q={};Q.styleTagTransform=D(),Q.setAttributes=w(),Q.insert=y().bind(null,"head"),Q.domAPI=A(),Q.insertStyleElement=k(),g()(J.Z,Q);const M=J.Z&&J.Z.locals?J.Z.locals:void 0,V=function(e){var t=e.selectedImportObject,n=(0,i.useTranslation)().t;return o().createElement("div",null,o().createElement("span",{className:M.heading01},n("startedOn","Started on")," "),o().createElement("span",{className:"body"},(0,l.formatDatetime)(new Date(t.localDateStarted))),o().createElement("br",null),o().createElement("span",{className:M.heading01},n("completedOn","Completed on")," "),o().createElement("span",{className:"body"},(0,l.formatDatetime)(new Date(t.localDateStopped))),o().createElement("br",null),o().createElement("span",{className:M.heading01},n("duration","Duration")," "),o().createElement("span",{className:"body"},t.importTime),o().createElement("br",null),o().createElement("br",null),o().createElement("span",{className:M.heading01},n("result","Result:")," "),o().createElement("br",null),o().createElement("div",{className:"body ".concat(M.indentedContent)},o().createElement("span",null,t.upToDateItemsCount," ",n("conceptsUpToDate","concepts up to date")),o().createElement("br",null),o().createElement("span",null,t.addedItemsCount," ",n("conceptsAdded","concepts added")),o().createElement("br",null),o().createElement("span",null,t.updatedItemsCount," ",n("conceptsUpdated","concepts updated")),o().createElement("br",null),o().createElement("span",null,t.retiredItemsCount," ",n("conceptsRetired","concepts retired")),o().createElement("br",null),o().createElement("span",null,t.errorItemsCount," ",n("errorsFound","errors found")),o().createElement("br",null),o().createElement("span",null,t.ignoredErrorsCount," ",n("errorsIgnored","errors ignored")),o().createElement("br",null)),o().createElement("br",null),0!=t.errorItemsCount&&o().createElement(q,{importUuid:t.uuid}))};var K=n(4933),X={};X.styleTagTransform=D(),X.setAttributes=w(),X.insert=y().bind(null,"head"),X.domAPI=A(),X.insertStyleElement=k(),g()(K.Z,X);const $=K.Z&&K.Z.locals?K.Z.locals:void 0;function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){te(e,t,n[t])}))}return e}function re(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}const oe=function(){var e,t,n,c,u,p,d,m,b,f=(0,i.useTranslation)().t,_=(m=(0,r.useState)(10),b=2,function(e){if(Array.isArray(e))return e}(m)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(m,b)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(m,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=_[0],h=_[1],A=(u=(c=(0,s.ZP)("/ws/rest/v1/openconceptlab/import?v=full",l.openmrsFetch)).data,p=c.error,d=c.isValidating,{data:null===(n=u)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.results,isLoading:!u&&!p,isError:p,isValidating:d}),v=A.data,y=A.isLoading,E=A.isError,w=(0,l.usePagination)(v,g),C=w.results,k=w.currentPage,S=w.goTo;if(y)return o().createElement(a.rjZ,{className:$.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement(a.N2B,{className:$.productiveHeading03}),o().createElement(a.gqd,{showHeader:!1,showToolbar:!1,rowCount:10,columnCount:3}),o().createElement(a.F3O,null)));E&&(0,l.showNotification)({kind:"error",description:f("previousImportsFetchError","Error occured while fetching the imports")});var D=[{header:f("dateAndTime","Date and Time"),key:"localDateStarted"},{header:f("duration","Duration"),key:"importTime"},{header:f("status","Status"),key:"status"}],N=null===(e=C)||void 0===e?void 0:e.map((function(e){return{id:e.uuid,localDateStarted:(0,l.formatDatetime)(new Date(e.localDateStarted)),importTime:e.importTime,status:e.status}}));return!y&&!E&&o().createElement(a.rjZ,{className:$.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement("h3",{className:$.productiveHeading03},f("previousImports","Previous Imports")),o().createElement(a.wQF,{rows:N,headers:D,size:"sm"},(function(e){var t=e.rows,n=e.headers,i=e.getHeaderProps,s=e.getRowProps,l=e.getTableProps;return o().createElement(a.iA_,re(ne({},l()),{className:$.tableBordered}),o().createElement(a.ssF,null,o().createElement(a.SCH,null,o().createElement(a.MOD,null),n.map((function(e,t){return o().createElement(a.xDH,ne({key:t},i({header:e})),e.header)})))),o().createElement(a.RMI,null,t.map((function(e){return o().createElement(r.Fragment,{key:e.id},o().createElement(a.RcE,re(ne({},s({row:e})),{className:$.tableRow}),e.cells.map((function(e){return o().createElement(a.pj1,{key:e.id},e.value)}))),e.isExpanded&&o().createElement(a.WdL,{colSpan:n.length+1,className:$.tableExpandedRow},o().createElement(V,{selectedImportObject:v.find((function(t){return t.uuid===e.id}))})))}))))})),o().createElement(a.tlE,{className:$.pagination,size:"sm",page:k,pageSize:g,pageSizes:[10,20,50,100],totalItems:v.length,onChange:function(e){var t=e.page,n=e.pageSize;S(t),h(n)}})))};var ae=n(9140);function ie(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ie(a,r,o,i,s,"next",e)}function s(e){ie(a,r,o,i,s,"throw",e)}i(void 0)}))}}function le(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function ce(e,t){return ue.apply(this,arguments)}function ue(){return ue=se((function(e,t){var n,r;return le(this,(function(o){return r=(0,ae.Z)(e.uuid)?"/ws/rest/v1/openconceptlab/subscription":"/ws/rest/v1/openconceptlab/subscription/".concat(e.uuid),[2,(0,l.openmrsFetch)(r,{method:"POST",body:e,headers:{"Content-Type":"application/json"},signal:null===(n=t)||void 0===n?void 0:n.signal})]}))})),ue.apply(this,arguments)}function pe(e,t){return de.apply(this,arguments)}function de(){return de=se((function(e,t){var n,r;return le(this,(function(o){return r="/ws/rest/v1/openconceptlab/subscription/".concat(e.uuid),[2,(0,l.openmrsFetch)(r,{method:"DELETE",signal:null===(n=t)||void 0===n?void 0:n.signal})]}))})),de.apply(this,arguments)}var me=function(e){var t,n,r;e.endsWith("/")&&(e=e.substring(0,e.lastIndexOf("/")));try{n=new URL(e)}catch(e){return!1}return 5==(null!==(r=null===(t=n.pathname.match(/\//g))||void 0===t?void 0:t.length)&&void 0!==r?r:0)},be=n(5271),fe={};fe.styleTagTransform=D(),fe.setAttributes=w(),fe.insert=y().bind(null,"head"),fe.domAPI=A(),fe.insertStyleElement=k(),g()(be.Z,fe);const _e=be.Z&&be.Z.locals?be.Z.locals:void 0;function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function he(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){he(a,r,o,i,s,"next",e)}function s(e){he(a,r,o,i,s,"throw",e)}i(void 0)}))}}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}const we=function(){var e,t,n,c,u,p,d=(0,i.useTranslation)().t,m=(0,s.kY)().mutate,b=ye((0,r.useState)(""),2),f=b[0],_=b[1],g=ye((0,r.useState)(""),2),h=g[0],A=g[1],v=ye((0,r.useState)(!1),2),y=v[0],E=v[1],w=ye((0,r.useState)("FULL"),2),C=w[0],k=w[1],S=ye((0,r.useState)(!1),2),D=S[0],N=S[1],T=(c=(n=(0,s.ZP)("/ws/rest/v1/openconceptlab/subscription?v=full",l.openmrsFetch)).data,u=n.error,p=n.isValidating,{data:null===(t=c)||void 0===t||null===(e=t.data)||void 0===e?void 0:e.results[0],isLoading:!c&&!u,isError:u,isValidating:p}),x=T.data,O=T.isLoading,F=T.isError;(0,r.useEffect)((function(){var e,t,n,r;O||F||(_((null===(e=x)||void 0===e?void 0:e.url)||""),A((null===(t=x)||void 0===t?void 0:t.token)||""),E((null===(n=x)||void 0===n?void 0:n.subscribedToSnapshot)||!1),k((null===(r=x)||void 0===r?void 0:r.validationType)||"FULL"),N(!!x&&me(x.url)))}),[O,F,x]);var P,B=(0,r.useCallback)((function(e){_(e.target.value),me(e.target.value)?(N(!0),E(!1)):N(!1)}),[]),I=(0,r.useCallback)((function(e){A(e.target.value)}),[]),j=(0,r.useCallback)((function(e,t){var n=t.checked;t.id,k(n?"NONE":"FULL")}),[]),H=(0,r.useCallback)((function(e,t){var n=t.checked;t.id,E(n)}),[]),Z=(0,r.useCallback)((P=Ae((function(e){var t,n,r;return Ee(this,(function(o){switch(o.label){case 0:return e.preventDefault(),e.stopPropagation(),D&&y?((0,l.showNotification)({kind:"error",description:d("snapshotDisabledError","You cannot subscribe to a SNAPSHOT if you've provided the collection version")}),[2]):(t=new AbortController,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ve(e,t,n[t])}))}return e}({},x),i=null!=(i={url:f,token:h,validationType:C,subscribedToSnapshot:y})?i:{},Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n}(Object(i)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))})),m("/ws/rest/v1/openconceptlab/subscription?v=full",n=a,!1),[4,ce(n,t)]);case 1:return r=o.sent(),m("/ws/rest/v1/openconceptlab/subscription?v=full"),r.ok?(0,l.showNotification)({kind:"success",description:d(201===r.status?"subscriptionCreated":"subscriptionUpdated",201===r.status?"Subscription created successfully":"Subscription updated successfully")}):(0,l.showNotification)({title:d("errorSavingSubscription","Error occured while saving the subscription"),kind:"error",critical:!0,description:JSON.stringify(r.data)}),[2,function(){return t.abort()}]}var a,i}))})),function(e){return P.apply(this,arguments)}),[f,h,C,y,D,x,d,m]),G=(0,r.useCallback)((function(){var e,t,n,r;_((null===(e=x)||void 0===e?void 0:e.url)||""),A((null===(t=x)||void 0===t?void 0:t.token)||""),E((null===(n=x)||void 0===n?void 0:n.subscribedToSnapshot)||!1),k((null===(r=x)||void 0===r?void 0:r.validationType)||"FULL"),N(!!x&&me(x.url)),(0,l.showNotification)({kind:"info",description:d("cancelledChanges","Cancelled changes successfully")})}),[x,d]),z=(0,r.useCallback)(function(){var e=Ae((function(e){var t,n;return Ee(this,(function(r){switch(r.label){case 0:return e.preventDefault(),e.stopPropagation(),t=new AbortController,[4,pe(x,t)];case 1:return n=r.sent(),m("/ws/rest/v1/openconceptlab/subscription?v=full"),204===n.status?(_(""),A(""),E(!1),k("FULL"),N(!1),(0,l.showNotification)({kind:"success",description:d("subscriptionDeleted","Successfully unsubscribed")})):(0,l.showNotification)({title:d("errorDeletingSubscription","Error occured while deleting the subscription"),kind:"error",critical:!0,description:JSON.stringify(n.data)}),[2,function(){return t.abort()}]}}))}));return function(t){return e.apply(this,arguments)}}(),[x,d,m]);return O?o().createElement(a.rjZ,{className:_e.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement(a.l09,null,o().createElement(a.N2B,{className:_e.productiveHeading03}),o().createElement(a.Kqy,{gap:5},o().createElement(a.znL,null),o().createElement(a.znL,null),o().createElement(a.cwH,{legendText:o().createElement(a.N2B,{width:"75px"}),className:_e.formGroup},o().createElement(a.jJq,null),o().createElement(a.jJq,null))),o().createElement(a.Db,null),o().createElement(a.Db,null)),o().createElement(a.l09,{className:_e.unsubscribeForm},o().createElement(a.N2B,{className:_e.productiveHeading03}),o().createElement(a.N2B,{className:_e.unsubscribeText}),o().createElement(a.Db,null)))):(F&&(0,l.showNotification)({kind:"error",description:d("subscriptionError","Error occured while fetching the subscription")}),o().createElement(a.rjZ,{className:_e.grid},o().createElement(a.sgG,{sm:4,md:8,lg:10},o().createElement(a.l09,{onSubmit:Z},o().createElement("h3",{className:_e.productiveHeading03},d("setupSubscription","Setup Subscription")),o().createElement(a.Kqy,{gap:5},o().createElement(a.mh4,null,o().createElement(a.oil,{id:"subscriptionUrl",type:"url",labelText:d("subscriptionUrl","Subscription URL"),placeholder:"https://api.openconceptlab.org/orgs/organization-name/collections/dictionary-name",value:f,onChange:B,required:!0})),o().createElement(a.mh4,null,o().createElement(a.oil,{id:"apiToken",type:"password",placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••",labelText:d("apiToken","Token"),value:h,onChange:I,required:!0})),o().createElement(a.cwH,{legendText:d("advancedOptions","Advanced Options"),className:_e.formGroup},o().createElement(a.XZJ,{checked:y,onChange:H,labelText:d("subscribeToSnapshotText","Subscribe to SNAPSHOT versions (not recommended)"),id:"isSubscribedToSnapshot",disabled:D}),o().createElement(a.XZJ,{checked:"NONE"===C,onChange:j,labelText:d("disableValidationText","Disable validation (should be used with care for well curated collections or sources)"),id:"isValidationDisabled"}))),o().createElement(a.zxk,{kind:"secondary",onClick:G},d("cancelButton","Cancel changes")),o().createElement(a.zxk,{kind:"primary",type:"submit"},d("subscribeButton","Save changes"))),o().createElement(a.l09,{onSubmit:z,className:_e.unsubscribeForm},o().createElement("h3",{className:_e.productiveHeading03},d("unsubscribe","Unsubscribe")),o().createElement("p",{className:_e.unsubscribeText},d("unsubscribeInfo","If you unsubscribe, no concepts will be deleted nor changed. All information about subscription will be deleted from your system.")),o().createElement(a.zxk,{kind:"danger",type:"submit",disabled:!x},d("unsubscribeButton","Unsubscribe"))))))};var Ce=n(1234),ke={};ke.styleTagTransform=D(),ke.setAttributes=w(),ke.insert=y().bind(null,"head"),ke.domAPI=A(),ke.insertStyleElement=k(),g()(Ce.Z,ke);const Se=Ce.Z&&Ce.Z.locals?Ce.Z.locals:void 0,De=function(){var e=(0,i.useTranslation)().t;return o().createElement(s.J$,null,o().createElement("main",{className:"omrs-main-content ".concat(Se.main)},o().createElement("h3",{className:Se.moduleHeader},e("moduleTitle","OCL Subscription Module")),o().createElement(a.mQc,null,o().createElement(a.tdY,{"aria-label":"OCL tabs",className:Se.tabList,contained:!0},o().createElement(a.OK9,null,e("subscription","Subscription")," "),o().createElement(a.OK9,null,e("import","Import")," "),o().createElement(a.OK9,null,e("previousImports","Previous Imports")," ")),o().createElement(a.nPR,null,o().createElement(a.x45,{className:Se.tabPanel},o().createElement(we,null)),o().createElement(a.x45,{className:Se.tabPanel},o().createElement(j,null)),o().createElement(a.x45,{className:Se.tabPanel},o().createElement(oe,null))))))}}}]);